import{P as gi,b9 as he,X as Pt,d as Me,bw as rt,bx as Aa,ai as G,G as ae,m as J,Q as Ae,by as Fr,T as De,b6 as Hr,R as Le,f as be,n as le,Z as Ee,e as k,bz as qo,i as Re,bg as $r,h as Y,bm as Ko,a as Z,g as ye,bA as pi,bB as pt,B as gt,bC as jo,k as zt,o as Jo,c as lt,s as Qo,bD as di,bf as Qt,a0 as el,K as tl,q as dt,ah as rr,aG as Wr,aF as al,aH as rl,bc as nl,aI as yi,aS as mi,aT as il,ax as Nt,p as dr,a_ as Ke,aU as yr,a$ as ol,bE as ll,aV as xt,bF as Ur,bG as sl,aL as Se,bH as nr,b3 as ul,b8 as Si,bI as vl,j as ca,bn as hl,b as cl,bJ as fl,b7 as gl,bK as Zr,bL as pl,aM as dl,am as Xr,bM as Wt,bN as yl,aD as Ge}from"./graphic-ca490178.js";import{c as He,p as fa}from"./createSeriesData-0936dc3f.js";import{cE as ir,a4 as yt,bE as Et,v as Ve,av as ne,p as ea,cF as nt,af as se,W as It,a7 as Je,c3 as Yr,cq as ge,x as ue,b9 as ie,bO as qr,aw as ee,cG as ta,b8 as Te,b6 as we,cH as ml,cI as bi,al as K,a2 as wi,cJ as ga,ci as Di,bc as pa,b5 as ke,cK as aa,cL as _i,aZ as Sl,cM as xi,cN as Ii,K as xe,y as mt,bt as O,br as St,j as st,cO as mr,cP as bl,bB as Sr,cQ as Ai,a_ as da,a3 as br,bM as ya,bb as Li,cR as wl,c7 as Pe,_ as Ti,cS as Bt,cT as Dl,Z as _l,by as ra,ba as na,bU as ma,M as ut,cv as xl,n as Kr,bV as Il,cU as Al,u as Be,bI as Ll,bJ as Sa,ch as Ci,cV as jr,ct as Ut,cW as Jr,z as Qr,l as Pi,cX as Tl,a1 as en,cY as tn,cZ as Cl,N as Pl,b3 as Ni,b4 as Ei,c_ as or,o as lr,m as Nl,D as El,P as La,cz as Ml,c5 as Mi,c$ as Ta,b7 as Ri,I as Rl,d as Vl,bz as Vi,J as kl,d0 as an,d1 as zl,b$ as Bl,ah as Gl,ad as Ol}from"./Axis-22733173.js";import{S as ba,z as wa,C as ki,D as Mt,v as Da,E as Fl,i as Hl,w as $l,M as Wl,F as Ul,x as Zl,R as wr,G as Dr,H as zi,I as Bi,J as Gi,K as Oi,V as Fi,L as Hi,y as Xl,N as $i,n as _r,O as rn,e as Yl,f as ql,s as Kl,h as jl,j as Jl}from"./customGraphicKeyframeAnimation-74a2bc0d.js";gi.CMD;function Wi(r,t,e,a,n,i,o,l){var s=n-r,u=i-t,v=e-r,h=a-t,c=Math.sqrt(v*v+h*h);v/=c,h/=c;var f=s*v+u*h,g=f/c;l&&(g=Math.min(Math.max(g,0),1)),g*=c;var p=o[0]=r+g*v,d=o[1]=t+g*h;return Math.sqrt((p-n)*(p-n)+(d-i)*(d-i))}var Xe=new he,re=new he,fe=new he,Ye=new he,Ne=new he,ia=[],de=new he;function Ql(r,t){if(t<=180&&t>0){t=t/180*Math.PI,Xe.fromArray(r[0]),re.fromArray(r[1]),fe.fromArray(r[2]),he.sub(Ye,Xe,re),he.sub(Ne,fe,re);var e=Ye.len(),a=Ne.len();if(!(e<.001||a<.001)){Ye.scale(1/e),Ne.scale(1/a);var n=Ye.dot(Ne),i=Math.cos(t);if(i<n){var o=Wi(re.x,re.y,fe.x,fe.y,Xe.x,Xe.y,ia,!1);de.fromArray(ia),de.scaleAndAdd(Ne,o/Math.tan(Math.PI-t));var l=fe.x!==re.x?(de.x-re.x)/(fe.x-re.x):(de.y-re.y)/(fe.y-re.y);if(isNaN(l))return;l<0?he.copy(de,re):l>1&&he.copy(de,fe),de.toArray(r[1])}}}}function es(r,t,e){if(e<=180&&e>0){e=e/180*Math.PI,Xe.fromArray(r[0]),re.fromArray(r[1]),fe.fromArray(r[2]),he.sub(Ye,re,Xe),he.sub(Ne,fe,re);var a=Ye.len(),n=Ne.len();if(!(a<.001||n<.001)){Ye.scale(1/a),Ne.scale(1/n);var i=Ye.dot(t),o=Math.cos(e);if(i<o){var l=Wi(re.x,re.y,fe.x,fe.y,Xe.x,Xe.y,ia,!1);de.fromArray(ia);var s=Math.PI/2,u=Math.acos(Ne.dot(t)),v=s+u-e;if(v>=s)he.copy(de,fe);else{de.scaleAndAdd(Ne,l/Math.tan(Math.PI/2-v));var h=fe.x!==re.x?(de.x-re.x)/(fe.x-re.x):(de.y-re.y)/(fe.y-re.y);if(isNaN(h))return;h<0?he.copy(de,re):h>1&&he.copy(de,fe)}de.toArray(r[1])}}}}function Ca(r,t,e,a){var n=e==="normal",i=n?r:r.ensureState(e);i.ignore=t;var o=a.get("smooth");o&&o===!0&&(o=.3),i.shape=i.shape||{},o>0&&(i.shape.smooth=o);var l=a.getModel("lineStyle").getLineStyle();n?r.useStyle(l):i.style=l}function ts(r,t){var e=t.smooth,a=t.points;if(a)if(r.moveTo(a[0][0],a[0][1]),e>0&&a.length>=3){var n=rt(a[0],a[1]),i=rt(a[1],a[2]);if(!n||!i){r.lineTo(a[1][0],a[1][1]),r.lineTo(a[2][0],a[2][1]);return}var o=Math.min(n,i)*e,l=Aa([],a[1],a[0],o/n),s=Aa([],a[1],a[2],o/i),u=Aa([],l,s,.5);r.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),r.bezierCurveTo(s[0],s[1],s[0],s[1],a[2][0],a[2][1])}else for(var v=1;v<a.length;v++)r.lineTo(a[v][0],a[v][1])}function Ui(r,t,e){var a=r.getTextGuideLine(),n=r.getTextContent();if(!n){a&&r.removeTextGuideLine();return}for(var i=t.normal,o=i.get("show"),l=n.ignore,s=0;s<ir.length;s++){var u=ir[s],v=t[u],h=u==="normal";if(v){var c=v.get("show"),f=h?l:Pt(n.states[u]&&n.states[u].ignore,l);if(f||!Pt(c,o)){var g=h?a:a&&a.states[u];g&&(g.ignore=!0),a&&Ca(a,!0,u,v);continue}a||(a=new yt,r.setTextGuideLine(a),!h&&(l||!o)&&Ca(a,!0,"normal",t.normal),r.stateProxy&&(a.stateProxy=r.stateProxy)),Ca(a,!1,u,v)}}if(a){Me(a.style,e),a.style.fill=null;var p=i.get("showAbove"),d=r.textGuideLineConfig=r.textGuideLineConfig||{};d.showAbove=p||!1,a.buildPath=ts}}function Zi(r,t){t=t||"labelLine";for(var e={normal:r.getModel(t)},a=0;a<Et.length;a++){var n=Et[a];e[n]=r.getModel([n,t])}return e}var as=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return He(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new ae,n=Ve("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(n),n.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l=i==="none"?"circle":i,s=e.itemHeight*.8,u=Ve(l,(e.itemWidth-s)/2,(e.itemHeight-s)/2,s,s,e.itemStyle.fill);a.add(u),u.setStyle(e.itemStyle);var v=e.iconRotate==="inherit"?o:e.iconRotate||0;return u.rotation=v*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(ne);const rs=as;function Xi(r,t,e){var a=r.getBaseAxis(),n=r.getOtherAxis(a),i=ns(n,e),o=a.dim,l=n.dim,s=t.mapDimension(l),u=t.mapDimension(o),v=l==="x"||l==="radius"?1:0,h=J(r.dimensions,function(g){return t.mapDimension(g)}),c=!1,f=t.getCalculationInfo("stackResultDimension");return ea(t,h[0])&&(c=!0,h[0]=f),ea(t,h[1])&&(c=!0,h[1]=f),{dataDimsForPoint:h,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!c,valueDim:s,baseDim:u,baseDataOffset:v,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function ns(r,t){var e=0,a=r.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:Ae(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function Yi(r,t,e,a){var n=NaN;r.stacked&&(n=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=r.valueStart);var i=r.baseDataOffset,o=[];return o[i]=e.get(r.baseDim,a),o[1-i]=n,t.dataToPoint(o)}function is(r,t){var e=[];return t.diff(r).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,n){e.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function os(r,t,e,a,n,i,o,l){for(var s=is(r,t),u=[],v=[],h=[],c=[],f=[],g=[],p=[],d=Xi(n,t,o),S=r.getLayout("points")||[],y=t.getLayout("points")||[],m=0;m<s.length;m++){var b=s[m],w=!0,D=void 0,_=void 0;switch(b.cmd){case"=":D=b.idx*2,_=b.idx1*2;var x=S[D],C=S[D+1],A=y[_],I=y[_+1];(isNaN(x)||isNaN(C))&&(x=A,C=I),u.push(x,C),v.push(A,I),h.push(e[D],e[D+1]),c.push(a[_],a[_+1]),p.push(t.getRawIndex(b.idx1));break;case"+":var L=b.idx,N=d.dataDimsForPoint,P=n.dataToPoint([t.get(N[0],L),t.get(N[1],L)]);_=L*2,u.push(P[0],P[1]),v.push(y[_],y[_+1]);var T=Yi(d,n,t,L);h.push(T[0],T[1]),c.push(a[_],a[_+1]),p.push(t.getRawIndex(L));break;case"-":w=!1}w&&(f.push(b),g.push(g.length))}g.sort(function(U,oe){return p[U]-p[oe]});for(var E=u.length,R=nt(E),M=nt(E),V=nt(E),B=nt(E),z=[],m=0;m<g.length;m++){var F=g[m],$=m*2,H=F*2;R[$]=u[H],R[$+1]=u[H+1],M[$]=v[H],M[$+1]=v[H+1],V[$]=h[H],V[$+1]=h[H+1],B[$]=c[H],B[$+1]=c[H+1],z[m]=f[F]}return{current:R,next:M,stackedOnCurrent:V,stackedOnNext:B,status:z}}var We=Math.min,Ue=Math.max;function ot(r,t){return isNaN(r)||isNaN(t)}function sr(r,t,e,a,n,i,o,l,s){for(var u,v,h,c,f,g,p=e,d=0;d<a;d++){var S=t[p*2],y=t[p*2+1];if(p>=n||p<0)break;if(ot(S,y)){if(s){p+=i;continue}break}if(p===e)r[i>0?"moveTo":"lineTo"](S,y),h=S,c=y;else{var m=S-u,b=y-v;if(m*m+b*b<.5){p+=i;continue}if(o>0){for(var w=p+i,D=t[w*2],_=t[w*2+1];D===S&&_===y&&d<a;)d++,w+=i,p+=i,D=t[w*2],_=t[w*2+1],S=t[p*2],y=t[p*2+1],m=S-u,b=y-v;var x=d+1;if(s)for(;ot(D,_)&&x<a;)x++,w+=i,D=t[w*2],_=t[w*2+1];var C=.5,A=0,I=0,L=void 0,N=void 0;if(x>=a||ot(D,_))f=S,g=y;else{A=D-u,I=_-v;var P=S-u,T=D-S,E=y-v,R=_-y,M=void 0,V=void 0;if(l==="x"){M=Math.abs(P),V=Math.abs(T);var B=A>0?1:-1;f=S-B*M*o,g=y,L=S+B*V*o,N=y}else if(l==="y"){M=Math.abs(E),V=Math.abs(R);var z=I>0?1:-1;f=S,g=y-z*M*o,L=S,N=y+z*V*o}else M=Math.sqrt(P*P+E*E),V=Math.sqrt(T*T+R*R),C=V/(V+M),f=S-A*o*(1-C),g=y-I*o*(1-C),L=S+A*o*C,N=y+I*o*C,L=We(L,Ue(D,S)),N=We(N,Ue(_,y)),L=Ue(L,We(D,S)),N=Ue(N,We(_,y)),A=L-S,I=N-y,f=S-A*M/V,g=y-I*M/V,f=We(f,Ue(u,S)),g=We(g,Ue(v,y)),f=Ue(f,We(u,S)),g=Ue(g,We(v,y)),A=S-f,I=y-g,L=S+A*V/M,N=y+I*V/M}r.bezierCurveTo(h,c,f,g,S,y),h=L,c=N}else r.lineTo(S,y)}u=S,v=y,p+=i}return d}var qi=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),ls=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new qi},t.prototype.buildPath=function(e,a){var n=a.points,i=0,o=n.length/2;if(a.connectNulls){for(;o>0&&ot(n[o*2-2],n[o*2-1]);o--);for(;i<o&&ot(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=sr(e,n,i,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=gi.CMD,l,s,u=a==="x",v=[],h=0;h<i.length;){var c=i[h++],f=void 0,g=void 0,p=void 0,d=void 0,S=void 0,y=void 0,m=void 0;switch(c){case o.M:l=i[h++],s=i[h++];break;case o.L:if(f=i[h++],g=i[h++],m=u?(e-l)/(f-l):(e-s)/(g-s),m<=1&&m>=0){var b=u?(g-s)*m+s:(f-l)*m+l;return u?[e,b]:[b,e]}l=f,s=g;break;case o.C:f=i[h++],g=i[h++],p=i[h++],d=i[h++],S=i[h++],y=i[h++];var w=u?Fr(l,f,p,S,e,v):Fr(s,g,d,y,e,v);if(w>0)for(var D=0;D<w;D++){var _=v[D];if(_<=1&&_>=0){var b=u?Hr(s,g,d,y,_):Hr(l,f,p,S,_);return u?[e,b]:[b,e]}}l=S,s=y;break}}},t}(De),ss=function(r){G(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(qi),Ki=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new ss},t.prototype.buildPath=function(e,a){var n=a.points,i=a.stackedOnPoints,o=0,l=n.length/2,s=a.smoothMonotone;if(a.connectNulls){for(;l>0&&ot(n[l*2-2],n[l*2-1]);l--);for(;o<l&&ot(n[o*2],n[o*2+1]);o++);}for(;o<l;){var u=sr(e,n,o,l,l,1,a.smooth,s,a.connectNulls);sr(e,i,o+u-1,u,l,-1,a.stackedOnSmooth,s,a.connectNulls),o+=u+1,e.closePath()}},t}(De);function ji(r,t,e,a,n){var i=r.getArea(),o=i.x,l=i.y,s=i.width,u=i.height,v=e.get(["lineStyle","width"])||0;o-=v/2,l-=v/2,s+=v,u+=v,s=Math.ceil(s),o!==Math.floor(o)&&(o=Math.floor(o),s++);var h=new Le({shape:{x:o,y:l,width:s,height:u}});if(t){var c=r.getBaseAxis(),f=c.isHorizontal(),g=c.inverse;f?(g&&(h.shape.x+=s),h.shape.width=0):(g||(h.shape.y+=u),h.shape.height=0);var p=be(n)?function(d){n(d,h)}:null;se(h,{shape:{width:s,height:u,x:o,y:l}},e,null,a,p)}return h}function Ji(r,t,e){var a=r.getArea(),n=It(a.r0,1),i=It(a.r,1),o=new Je({shape:{cx:It(r.cx,1),cy:It(r.cy,1),r0:n,r:i,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var l=r.getBaseAxis().dim==="angle";l?o.shape.endAngle=a.startAngle:o.shape.r=n,se(o,{shape:{endAngle:a.endAngle,r:i}},e)}return o}function Gt(r,t,e,a,n){if(r){if(r.type==="polar")return Ji(r,t,e);if(r.type==="cartesian2d")return ji(r,t,e,a,n)}else return null;return null}function nn(r,t){if(r.length===t.length){for(var e=0;e<r.length;e++)if(r[e]!==t[e])return;return!0}}function on(r){for(var t=1/0,e=1/0,a=-1/0,n=-1/0,i=0;i<r.length;){var o=r[i++],l=r[i++];isNaN(o)||(t=Math.min(o,t),a=Math.max(o,a)),isNaN(l)||(e=Math.min(l,e),n=Math.max(l,n))}return[[t,e],[a,n]]}function ln(r,t){var e=on(r),a=e[0],n=e[1],i=on(t),o=i[0],l=i[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]))}function sn(r){return Ae(r)?r:r?.5:0}function us(r,t,e){if(!e.valueDim)return[];for(var a=t.count(),n=nt(a*2),i=0;i<a;i++){var o=Yi(e,r,t,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function Ze(r,t,e,a,n){var i=e.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,l=[],s=0,u=[],v=[],h=[],c=[];if(n){for(s=0;s<r.length;s+=2){var f=t||r;!isNaN(f[s])&&!isNaN(f[s+1])&&c.push(r[s],r[s+1])}r=c}for(s=0;s<r.length-2;s+=2)switch(h[0]=r[s+2],h[1]=r[s+3],v[0]=r[s],v[1]=r[s+1],l.push(v[0],v[1]),a){case"end":u[o]=h[o],u[1-o]=v[1-o],l.push(u[0],u[1]);break;case"middle":var g=(v[o]+h[o])/2,p=[];u[o]=p[o]=g,u[1-o]=v[1-o],p[1-o]=h[1-o],l.push(u[0],u[1]),l.push(p[0],p[1]);break;default:u[o]=v[o],u[1-o]=h[1-o],l.push(u[0],u[1])}return l.push(r[s++],r[s++]),l}function vs(r,t){var e=[],a=r.length,n,i;function o(v,h,c){var f=v.coord,g=(c-f)/(h.coord-f),p=qo(g,[v.color,h.color]);return{coord:c,color:p}}for(var l=0;l<a;l++){var s=r[l],u=s.coord;if(u<0)n=s;else if(u>t){i?e.push(o(i,s,t)):n&&e.push(o(n,s,0),o(n,s,t));break}else n&&(e.push(o(n,s,0)),n=null),e.push(s),i=s}return e}function hs(r,t,e){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&t.type==="cartesian2d"){for(var n,i,o=a.length-1;o>=0;o--){var l=r.getDimensionInfo(a[o].dimension);if(n=l&&l.coordDim,n==="x"||n==="y"){i=a[o];break}}if(i){var s=t.getAxis(n),u=J(i.stops,function(m){return{coord:s.toGlobalCoord(s.dataToCoord(m.value)),color:m.color}}),v=u.length,h=i.outerColors.slice();v&&u[0].coord>u[v-1].coord&&(u.reverse(),h.reverse());var c=vs(u,n==="x"?e.getWidth():e.getHeight()),f=c.length;if(!f&&v)return u[0].coord<0?h[1]?h[1]:u[v-1].color:h[0]?h[0]:u[0].color;var g=10,p=c[0].coord-g,d=c[f-1].coord+g,S=d-p;if(S<.001)return"transparent";k(c,function(m){m.offset=(m.coord-p)/S}),c.push({offset:f?c[f-1].offset:.5,color:h[1]||"transparent"}),c.unshift({offset:f?c[0].offset:.5,color:h[0]||"transparent"});var y=new wi(0,0,0,0,c,!0);return y[n]=p,y[n+"2"]=d,y}}}function cs(r,t,e){var a=r.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var i=e.getAxesByScale("ordinal")[0];if(i&&!(n&&fs(i,t))){var o=t.mapDimension(i.dim),l={};return k(i.getViewLabels(),function(s){var u=i.scale.getRawOrdinalNumber(s.tickValue);l[u]=1}),function(s){return!l.hasOwnProperty(t.get(o,s))}}}}function fs(r,t){var e=r.getExtent(),a=Math.abs(e[1]-e[0])/r.scale.count();isNaN(a)&&(a=0);for(var n=t.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(wa.getSymbolSize(t,o)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function gs(r,t){return isNaN(r)||isNaN(t)}function ps(r){for(var t=r.length/2;t>0&&gs(r[t*2-2],r[t*2-1]);t--);return t-1}function un(r,t){return[r[t*2],r[t*2+1]]}function ds(r,t,e){for(var a=r.length/2,n=e==="x"?0:1,i,o,l=0,s=-1,u=0;u<a;u++)if(o=r[u*2+n],!(isNaN(o)||isNaN(r[u*2+1-n]))){if(u===0){i=o;continue}if(i<=t&&o>=t||i>=t&&o<=t){s=u;break}l=u,i=o}return{range:[l,s],t:(t-i)/(o-i)}}function Qi(r){if(r.get(["endLabel","show"]))return!0;for(var t=0;t<Et.length;t++)if(r.get([Et[t],"endLabel","show"]))return!0;return!1}function Pa(r,t,e,a){if(Da(t,"cartesian2d")){var n=a.getModel("endLabel"),i=n.get("valueAnimation"),o=a.getData(),l={lastFrameIndex:0},s=Qi(a)?function(f,g){r._endLabelOnDuring(f,g,o,l,i,n,t)}:null,u=t.getBaseAxis().isHorizontal(),v=ji(t,e,a,function(){var f=r._endLabel;f&&e&&l.originalX!=null&&f.attr({x:l.originalX,y:l.originalY})},s);if(!a.get("clip",!0)){var h=v.shape,c=Math.max(h.width,h.height);u?(h.y-=c,h.height+=c*2):(h.x-=c,h.width+=c*2)}return s&&s(1,v),v}else return Ji(t,e,a)}function ys(r,t){var e=t.getBaseAxis(),a=e.isHorizontal(),n=e.inverse,i=a?n?"right":"left":"center",o=a?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||o}}}var ms=function(r){G(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=new ae,a=new ba;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e,this._changePolyState=le(this._changePolyState,this)},t.prototype.render=function(e,a,n){var i=e.coordinateSystem,o=this.group,l=e.getData(),s=e.getModel("lineStyle"),u=e.getModel("areaStyle"),v=l.getLayout("points")||[],h=i.type==="polar",c=this._coordSys,f=this._symbolDraw,g=this._polyline,p=this._polygon,d=this._lineGroup,S=!a.ssr&&e.get("animation"),y=!u.isEmpty(),m=u.get("origin"),b=Xi(i,l,m),w=y&&us(i,l,b),D=e.get("showSymbol"),_=e.get("connectNulls"),x=D&&!h&&cs(e,l,i),C=this._data;C&&C.eachItemGraphicEl(function(U,oe){U.__temp&&(o.remove(U),C.setItemGraphicEl(oe,null))}),D||f.remove(),o.add(d);var A=h?!1:e.get("step"),I;i&&i.getArea&&e.get("clip",!0)&&(I=i.getArea(),I.width!=null?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var L=hs(l,i,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(g&&c.type===i.type&&A===this._step))D&&f.updateData(l,{isIgnore:x,clipShape:I,disableAnimation:!0,getSymbolPoint:function(U){return[v[U*2],v[U*2+1]]}}),S&&this._initSymbolLabelAnimation(l,i,I),A&&(w&&(w=Ze(w,v,i,A,_)),v=Ze(v,null,i,A,_)),g=this._newPolyline(v),y?p=this._newPolygon(v,w):p&&(d.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(e,i,Yr(L)),d.setClipPath(Pa(this,i,!0,e));else{y&&!p?p=this._newPolygon(v,w):p&&!y&&(d.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(e,i,Yr(L));var N=d.getClipPath();if(N){var P=Pa(this,i,!1,e);se(N,{shape:P.shape},e)}else d.setClipPath(Pa(this,i,!0,e));D&&f.updateData(l,{isIgnore:x,clipShape:I,disableAnimation:!0,getSymbolPoint:function(U){return[v[U*2],v[U*2+1]]}}),(!nn(this._stackedOnPoints,w)||!nn(this._points,v))&&(S?this._doUpdateAnimation(l,w,i,n,A,m,_):(A&&(w&&(w=Ze(w,v,i,A,_)),v=Ze(v,null,i,A,_)),g.setShape({points:v}),p&&p.setShape({points:v,stackedOnPoints:w})))}var T=e.getModel("emphasis"),E=T.get("focus"),R=T.get("blurScope"),M=T.get("disabled");if(g.useStyle(Me(s.getLineStyle(),{fill:"none",stroke:L,lineJoin:"bevel"})),ge(g,e,"lineStyle"),g.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var V=g.getState("emphasis").style;V.lineWidth=+g.style.lineWidth+1}ue(g).seriesIndex=e.seriesIndex,ie(g,E,R,M);var B=sn(e.get("smooth")),z=e.get("smoothMonotone");if(g.setShape({smooth:B,smoothMonotone:z,connectNulls:_}),p){var F=l.getCalculationInfo("stackedOnSeries"),$=0;p.useStyle(Me(u.getAreaStyle(),{fill:L,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),F&&($=sn(F.get("smooth"))),p.setShape({smooth:B,stackedOnSmooth:$,smoothMonotone:z,connectNulls:_}),ge(p,e,"areaStyle"),ue(p).seriesIndex=e.seriesIndex,ie(p,E,R,M)}var H=this._changePolyState;l.eachItemGraphicEl(function(U){U&&(U.onHoverStateChange=H)}),this._polyline.onHoverStateChange=H,this._data=l,this._coordSys=i,this._stackedOnPoints=w,this._points=v,this._step=A,this._valueOrigin=m,e.get("triggerLineEvent")&&(this.packEventData(e,g),p&&this.packEventData(e,p))},t.prototype.packEventData=function(e,a){ue(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,n,i){var o=e.getData(),l=qr(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&l!=null&&l>=0){var s=o.getLayout("points"),u=o.getItemGraphicEl(l);if(!u){var v=s[l*2],h=s[l*2+1];if(isNaN(v)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(v,h))return;var c=e.get("zlevel")||0,f=e.get("z")||0;u=new wa(o,l),u.x=v,u.y=h,u.setZ(c,f);var g=u.getSymbolPath().getTextContent();g&&(g.zlevel=c,g.z=f,g.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(l,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else ee.prototype.highlight.call(this,e,a,n,i)},t.prototype.downplay=function(e,a,n,i){var o=e.getData(),l=qr(o,i);if(this._changePolyState("normal"),l!=null&&l>=0){var s=o.getItemGraphicEl(l);s&&(s.__temp?(o.setItemGraphicEl(l,null),this.group.remove(s)):s.downplay())}else ee.prototype.downplay.call(this,e,a,n,i)},t.prototype._changePolyState=function(e){var a=this._polygon;ta(this._polyline,e),a&&ta(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new ls({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Ki({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,a,n){var i,o,l=a.getBaseAxis(),s=l.inverse;a.type==="cartesian2d"?(i=l.isHorizontal(),o=!1):a.type==="polar"&&(i=l.dim==="angle",o=!0);var u=e.hostModel,v=u.get("animationDuration");be(v)&&(v=v(null));var h=u.get("animationDelay")||0,c=be(h)?h(null):h;e.eachItemGraphicEl(function(f,g){var p=f;if(p){var d=[f.x,f.y],S=void 0,y=void 0,m=void 0;if(n)if(o){var b=n,w=a.pointToCoord(d);i?(S=b.startAngle,y=b.endAngle,m=-w[1]/180*Math.PI):(S=b.r0,y=b.r,m=w[0])}else{var D=n;i?(S=D.x,y=D.x+D.width,m=f.x):(S=D.y+D.height,y=D.y,m=f.y)}var _=y===S?0:(m-S)/(y-S);s&&(_=1-_);var x=be(h)?h(g):v*_+c,C=p.getSymbolPath(),A=C.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),A&&A.animateFrom({style:{opacity:0}},{duration:300,delay:x}),C.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,n){var i=e.getModel("endLabel");if(Qi(e)){var o=e.getData(),l=this._polyline,s=o.getLayout("points");if(!s){l.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Ee({z2:200}),u.ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var v=ps(s);v>=0&&(Te(l,we(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:v,defaultText:function(h,c,f){return f!=null?ki(o,f):Mt(o,h)},enableTextSetter:!0},ys(i,a)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,n,i,o,l,s){var u=this._endLabel,v=this._polyline;if(u){e<1&&i.originalX==null&&(i.originalX=u.x,i.originalY=u.y);var h=n.getLayout("points"),c=n.hostModel,f=c.get("connectNulls"),g=l.get("precision"),p=l.get("distance")||0,d=s.getBaseAxis(),S=d.isHorizontal(),y=d.inverse,m=a.shape,b=y?S?m.x:m.y+m.height:S?m.x+m.width:m.y,w=(S?p:0)*(y?-1:1),D=(S?0:-p)*(y?-1:1),_=S?"x":"y",x=ds(h,b,_),C=x.range,A=C[1]-C[0],I=void 0;if(A>=1){if(A>1&&!f){var L=un(h,C[0]);u.attr({x:L[0]+w,y:L[1]+D}),o&&(I=c.getRawValue(C[0]))}else{var L=v.getPointOn(b,_);L&&u.attr({x:L[0]+w,y:L[1]+D});var N=c.getRawValue(C[0]),P=c.getRawValue(C[1]);o&&(I=ml(n,g,N,P,x.t))}i.lastFrameIndex=C[0]}else{var T=e===1||i.lastFrameIndex>0?C[0]:0,L=un(h,T);o&&(I=c.getRawValue(T)),u.attr({x:L[0]+w,y:L[1]+D})}if(o){var E=bi(u);typeof E.setLabelText=="function"&&E.setLabelText(I)}}},t.prototype._doUpdateAnimation=function(e,a,n,i,o,l,s){var u=this._polyline,v=this._polygon,h=e.hostModel,c=os(this._data,e,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),f=c.current,g=c.stackedOnCurrent,p=c.next,d=c.stackedOnNext;if(o&&(g=Ze(c.stackedOnCurrent,c.current,n,o,s),f=Ze(c.current,null,n,o,s),d=Ze(c.stackedOnNext,c.next,n,o,s),p=Ze(c.next,null,n,o,s)),ln(f,p)>3e3||v&&ln(g,d)>3e3){u.stopAnimation(),u.setShape({points:p}),v&&(v.stopAnimation(),v.setShape({points:p,stackedOnPoints:d}));return}u.shape.__points=c.current,u.shape.points=f;var S={shape:{points:p}};c.current!==f&&(S.shape.__points=c.next),u.stopAnimation(),K(u,S,h),v&&(v.setShape({points:f,stackedOnPoints:g}),v.stopAnimation(),K(v,{shape:{stackedOnPoints:d}},h),u.shape.points!==v.shape.points&&(v.shape.points=u.shape.points));for(var y=[],m=c.status,b=0;b<m.length;b++){var w=m[b].cmd;if(w==="="){var D=e.getItemGraphicEl(m[b].idx1);D&&y.push({el:D,ptIdx:b})}}u.animators&&u.animators.length&&u.animators[0].during(function(){v&&v.dirtyShape();for(var _=u.shape.__points,x=0;x<y.length;x++){var C=y[x].el,A=y[x].ptIdx*2;C.x=_[A],C.y=_[A+1],C.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(a.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ee);const Ss=ms;function Ot(r,t){return{seriesType:r,plan:ga(),reset:function(e){var a=e.getData(),n=e.coordinateSystem,i=e.pipelineContext,o=t||i.large;if(n){var l=J(n.dimensions,function(f){return a.mapDimension(f)}).slice(0,2),s=l.length,u=a.getCalculationInfo("stackResultDimension");ea(a,l[0])&&(l[0]=u),ea(a,l[1])&&(l[1]=u);var v=a.getStore(),h=a.getDimensionIndex(l[0]),c=a.getDimensionIndex(l[1]);return s&&{progress:function(f,g){for(var p=f.end-f.start,d=o&&nt(p*s),S=[],y=[],m=f.start,b=0;m<f.end;m++){var w=void 0;if(s===1){var D=v.get(h,m);w=n.dataToPoint(D,null,y)}else S[0]=v.get(h,m),S[1]=v.get(c,m),w=n.dataToPoint(S,null,y);o?(d[b++]=w[0],d[b++]=w[1]):g.setItemLayout(m,w.slice())}o&&g.setLayout("points",d)}}}}}}var bs={average:function(r){for(var t=0,e=0,a=0;a<r.length;a++)isNaN(r[a])||(t+=r[a],e++);return e===0?NaN:t/e},sum:function(r){for(var t=0,e=0;e<r.length;e++)t+=r[e]||0;return t},max:function(r){for(var t=-1/0,e=0;e<r.length;e++)r[e]>t&&(t=r[e]);return isFinite(t)?t:NaN},min:function(r){for(var t=1/0,e=0;e<r.length;e++)r[e]<t&&(t=r[e]);return isFinite(t)?t:NaN},nearest:function(r){return r[0]}},ws=function(r){return Math.round(r.length/2)};function eo(r){return{seriesType:r,reset:function(t,e,a){var n=t.getData(),i=t.get("sampling"),o=t.coordinateSystem,l=n.count();if(l>10&&o.type==="cartesian2d"&&i){var s=o.getBaseAxis(),u=o.getOtherAxis(s),v=s.getExtent(),h=a.getDevicePixelRatio(),c=Math.abs(v[1]-v[0])*(h||1),f=Math.round(l/c);if(isFinite(f)&&f>1){i==="lttb"?t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/f)):i==="minmax"&&t.setData(n.minmaxDownSample(n.mapDimension(u.dim),1/f));var g=void 0;Re(i)?g=bs[i]:be(i)&&(g=i),g&&t.setData(n.downSample(n.mapDimension(u.dim),1/f,g,ws))}}}}}function yg(r){r.registerChartView(Ss),r.registerSeriesModel(rs),r.registerLayout(Ot("line",!0)),r.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,eo("line"))}var to=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return He(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,a,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(e),l=i.dataToPoint(o);if(n)k(i.getAxes(),function(c,f){if(c.type==="category"&&a!=null){var g=c.getTicksCoords(),p=c.getTickModel().get("alignWithLabel"),d=o[f],S=a[f]==="x1"||a[f]==="y1";if(S&&!p&&(d+=1),g.length<2)return;if(g.length===2){l[f]=c.toGlobalCoord(c.getExtent()[S?1:0]);return}for(var y=void 0,m=void 0,b=1,w=0;w<g.length;w++){var D=g[w].coord,_=w===g.length-1?g[w-1].tickValue+b:g[w].tickValue;if(_===d){m=D;break}else if(_<d)y=D;else if(y!=null&&_>d){m=(D+y)/2;break}w===1&&(b=_-g[0].tickValue)}m==null&&(y?y&&(m=g[g.length-1].coord):m=g[0].coord),l[f]=c.toGlobalCoord(m)}});else{var s=this.getData(),u=s.getLayout("offset"),v=s.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;l[h]+=u+v/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ne);ne.registerClass(to);const oa=to;var Ds=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return He(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>e&&(e=a),e},t.prototype.brushSelector=function(e,a,n){return n.rect(a.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Di(oa.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(oa);const _s=Ds;var xs=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Is=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="sausage",a}return t.prototype.getDefaultShape=function(){return new xs},t.prototype.buildPath=function(e,a){var n=a.cx,i=a.cy,o=Math.max(a.r0||0,0),l=Math.max(a.r,0),s=(l-o)*.5,u=o+s,v=a.startAngle,h=a.endAngle,c=a.clockwise,f=Math.PI*2,g=c?h-v<f:v-h<f;g||(v=h-(c?f:-f));var p=Math.cos(v),d=Math.sin(v),S=Math.cos(h),y=Math.sin(h);g?(e.moveTo(p*o+n,d*o+i),e.arc(p*u+n,d*u+i,s,-Math.PI+v,v,!c)):e.moveTo(p*l+n,d*l+i),e.arc(n,i,l,v,h,!c),e.arc(S*u+n,y*u+i,s,h-Math.PI*2,h-Math.PI,!c),o!==0&&e.arc(n,i,o,h,v,c)},t}(De);const la=Is;function As(r,t){t=t||{};var e=t.isRoundCap;return function(a,n,i){var o=n.position;if(!o||o instanceof Array)return $r(a,n,i);var l=r(o),s=n.distance!=null?n.distance:5,u=this.shape,v=u.cx,h=u.cy,c=u.r,f=u.r0,g=(c+f)/2,p=u.startAngle,d=u.endAngle,S=(p+d)/2,y=e?Math.abs(c-f)/2:0,m=Math.cos,b=Math.sin,w=v+c*m(p),D=h+c*b(p),_="left",x="top";switch(l){case"startArc":w=v+(f-s)*m(S),D=h+(f-s)*b(S),_="center",x="top";break;case"insideStartArc":w=v+(f+s)*m(S),D=h+(f+s)*b(S),_="center",x="bottom";break;case"startAngle":w=v+g*m(p)+Zt(p,s+y,!1),D=h+g*b(p)+Xt(p,s+y,!1),_="right",x="middle";break;case"insideStartAngle":w=v+g*m(p)+Zt(p,-s+y,!1),D=h+g*b(p)+Xt(p,-s+y,!1),_="left",x="middle";break;case"middle":w=v+g*m(S),D=h+g*b(S),_="center",x="middle";break;case"endArc":w=v+(c+s)*m(S),D=h+(c+s)*b(S),_="center",x="bottom";break;case"insideEndArc":w=v+(c-s)*m(S),D=h+(c-s)*b(S),_="center",x="top";break;case"endAngle":w=v+g*m(d)+Zt(d,s+y,!0),D=h+g*b(d)+Xt(d,s+y,!0),_="left",x="middle";break;case"insideEndAngle":w=v+g*m(d)+Zt(d,-s+y,!0),D=h+g*b(d)+Xt(d,-s+y,!0),_="right",x="middle";break;default:return $r(a,n,i)}return a=a||{},a.x=w,a.y=D,a.align=_,a.verticalAlign=x,a}}function Ls(r,t,e,a){if(Ae(a)){r.setTextConfig({rotation:a});return}else if(Y(t)){r.setTextConfig({rotation:0});return}var n=r.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,l=(i+o)/2,s,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":s=l;break;case"startAngle":case"insideStartAngle":s=i;break;case"endAngle":case"insideEndAngle":s=o;break;default:r.setTextConfig({rotation:0});return}var v=Math.PI*1.5-s;u==="middle"&&v>Math.PI/2&&v<Math.PI*1.5&&(v-=Math.PI),r.setTextConfig({rotation:v})}function Zt(r,t,e){return t*Math.sin(r)*(e?-1:1)}function Xt(r,t,e){return t*Math.cos(r)*(e?1:-1)}function it(r,t,e){var a=r.get("borderRadius");if(a==null)return e?{cornerRadius:0}:null;Y(a)||(a=[a,a,a,a]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:J(a,function(i){return Ko(i,n)})}}var Na=Math.max,Ea=Math.min;function Ts(r,t){var e=r.getArea&&r.getArea();if(Da(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var n=t.getLayout("bandWidth");a.isHorizontal()?(e.x-=n,e.width+=n*2):(e.y-=n,e.height+=n*2)}}return e}var Cs=function(r){G(t,r);function t(){var e=r.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,a,n,i){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,a,n):this._renderNormal(e,a,n,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,a){this._progressiveEls=[],this._incrementalRenderLarge(e,a)},t.prototype.eachRendered=function(e){pa(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e,a,n,i){var o=this.group,l=e.getData(),s=this._data,u=e.coordinateSystem,v=u.getBaseAxis(),h;u.type==="cartesian2d"?h=v.isHorizontal():u.type==="polar"&&(h=v.dim==="angle");var c=e.isAnimationEnabled()?e:null,f=Ps(e,u);f&&this._enableRealtimeSort(f,l,n);var g=e.get("clip",!0)||f,p=Ts(u,l);o.removeClipPath();var d=e.get("roundCap",!0),S=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),m=y.get("borderRadius")||0,b=[],w=this._backgroundEls,D=i&&i.isInitSort,_=i&&i.type==="changeAxisOrder";function x(I){var L=Yt[u.type](l,I),N=zs(u,h,L);return N.useStyle(y.getItemStyle()),u.type==="cartesian2d"?N.setShape("r",m):N.setShape("cornerRadius",m),b[I]=N,N}l.diff(s).add(function(I){var L=l.getItemModel(I),N=Yt[u.type](l,I,L);if(S&&x(I),!(!l.hasValue(I)||!gn[u.type](N))){var P=!1;g&&(P=vn[u.type](p,N));var T=hn[u.type](e,l,I,N,h,c,v.model,!1,d);f&&(T.forceLabelAnimation=!0),pn(T,l,I,L,N,e,h,u.type==="polar"),D?T.attr({shape:N}):f?cn(f,c,T,N,I,h,!1,!1):se(T,{shape:N},e,I),l.setItemGraphicEl(I,T),o.add(T),T.ignore=P}}).update(function(I,L){var N=l.getItemModel(I),P=Yt[u.type](l,I,N);if(S){var T=void 0;w.length===0?T=x(L):(T=w[L],T.useStyle(y.getItemStyle()),u.type==="cartesian2d"?T.setShape("r",m):T.setShape("cornerRadius",m),b[I]=T);var E=Yt[u.type](l,I),R=ro(h,E,u);K(T,{shape:R},c,I)}var M=s.getItemGraphicEl(L);if(!l.hasValue(I)||!gn[u.type](P)){o.remove(M);return}var V=!1;if(g&&(V=vn[u.type](p,P),V&&o.remove(M)),M?ke(M):M=hn[u.type](e,l,I,P,h,c,v.model,!!M,d),f&&(M.forceLabelAnimation=!0),_){var B=M.getTextContent();if(B){var z=bi(B);z.prevValue!=null&&(z.prevValue=z.value)}}else pn(M,l,I,N,P,e,h,u.type==="polar");D?M.attr({shape:P}):f?cn(f,c,M,P,I,h,!0,_):K(M,{shape:P},e,I,null),l.setItemGraphicEl(I,M),M.ignore=V,o.add(M)}).remove(function(I){var L=s.getItemGraphicEl(I);L&&aa(L,e,I)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new ae);C.removeAll();for(var A=0;A<b.length;++A)C.add(b[A]);o.add(C),this._backgroundEls=b,this._data=l},t.prototype._renderLarge=function(e,a,n){this._clear(),yn(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,a){this._removeBackground(),yn(a,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var a=e.get("clip",!0)&&Gt(e.coordinateSystem,!1,e),n=this.group;a?n.setClipPath(a):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,a,n){var i=this;if(a.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,e,n),this._isFirstFrame=!1;else{var l=function(s){var u=a.getItemGraphicEl(s),v=u&&u.shape;return v&&Math.abs(o.isHorizontal()?v.height:v.width)||0};this._onRendered=function(){i._updateSortWithinSameData(a,l,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,a,n){var i=[];return e.each(e.mapDimension(a.dim),function(o,l){var s=n(l);s=s??NaN,i.push({dataIndex:l,mappedValue:s,ordinalNumber:o})}),i.sort(function(o,l){return l.mappedValue-o.mappedValue}),{ordinalNumbers:J(i,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,a,n){for(var i=n.scale,o=e.mapDimension(n.dim),l=Number.MAX_VALUE,s=0,u=i.getOrdinalMeta().categories.length;s<u;++s){var v=e.rawIndexOf(o,i.getRawOrdinalNumber(s)),h=v<0?Number.MIN_VALUE:a(e.indexOfRawIndex(v));if(h>l)return!0;l=h}return!1},t.prototype._isOrderDifferentInView=function(e,a){for(var n=a.scale,i=n.getExtent(),o=Math.max(0,i[0]),l=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=l;++o)if(e.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,a,n,i){if(this._isOrderChangedWithinSameData(e,a,n)){var o=this._dataSort(e,n,a);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,a,n){var i=a.baseAxis,o=this._dataSort(e,i,function(l){return e.get(e.mapDimension(a.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},t.prototype.remove=function(e,a){this._clear(this._model),this._removeOnRenderedListener(a)},t.prototype.dispose=function(e,a){this._removeOnRenderedListener(a)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var a=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){aa(i,e,ue(i).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ee),vn={cartesian2d:function(r,t){var e=t.width<0?-1:1,a=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var n=r.x+r.width,i=r.y+r.height,o=Na(t.x,r.x),l=Ea(t.x+t.width,n),s=Na(t.y,r.y),u=Ea(t.y+t.height,i),v=l<o,h=u<s;return t.x=v&&o>n?l:o,t.y=h&&s>i?u:s,t.width=v?0:l-o,t.height=h?0:u-s,e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),v||h},polar:function(r,t){var e=t.r0<=t.r?1:-1;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}var n=Ea(t.r,r.r),i=Na(t.r0,r.r0);t.r=n,t.r0=i;var o=n-i<0;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}return o}},hn={cartesian2d:function(r,t,e,a,n,i,o,l,s){var u=new Le({shape:Z({},a),z2:1});if(u.__dataIndex=e,u.name="item",i){var v=u.shape,h=n?"height":"width";v[h]=0}return u},polar:function(r,t,e,a,n,i,o,l,s){var u=!n&&s?la:Je,v=new u({shape:a,z2:1});v.name="item";var h=ao(n);if(v.calculateTextPosition=As(h,{isRoundCap:u===la}),i){var c=v.shape,f=n?"r":"endAngle",g={};c[f]=n?a.r0:a.startAngle,g[f]=a[f],(l?K:se)(v,{shape:g},i)}return v}};function Ps(r,t){var e=r.get("realtimeSort",!0),a=t.getBaseAxis();if(e&&a.type==="category"&&t.type==="cartesian2d")return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function cn(r,t,e,a,n,i,o,l){var s,u;i?(u={x:a.x,width:a.width},s={y:a.y,height:a.height}):(u={y:a.y,height:a.height},s={x:a.x,width:a.width}),l||(o?K:se)(e,{shape:s},t,n,null);var v=t?r.baseAxis.model:null;(o?K:se)(e,{shape:u},v,n)}function fn(r,t){for(var e=0;e<t.length;e++)if(!isFinite(r[t[e]]))return!0;return!1}var Ns=["x","y","width","height"],Es=["cx","cy","r","startAngle","endAngle"],gn={cartesian2d:function(r){return!fn(r,Ns)},polar:function(r){return!fn(r,Es)}},Yt={cartesian2d:function(r,t,e){var a=r.getItemLayout(t),n=e?Rs(e,a):0,i=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+i*n/2,y:a.y+o*n/2,width:a.width-i*n,height:a.height-o*n}},polar:function(r,t,e){var a=r.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function Ms(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function ao(r){return function(t){var e=t?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+e;default:return a}}}(r)}function pn(r,t,e,a,n,i,o,l){var s=t.getItemVisual(e,"style");if(l){if(!i.get("roundCap")){var v=r.shape,h=it(a.getModel("itemStyle"),v,!0);Z(v,h),r.setShape(v)}}else{var u=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(s);var c=a.getShallow("cursor");c&&r.attr("cursor",c);var f=l?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=we(a);Te(r,g,{labelFetcher:i,labelDataIndex:e,defaultText:Mt(i.getData(),e),inheritColor:s.fill,defaultOpacity:s.opacity,defaultOutsidePosition:f});var p=r.getTextContent();if(l&&p){var d=a.get(["label","position"]);r.textConfig.inside=d==="middle"?!0:null,Ls(r,d==="outside"?f:d,ao(o),a.get(["label","rotate"]))}_i(p,g,i.getRawValue(e),function(y){return ki(t,y)});var S=a.getModel(["emphasis"]);ie(r,S.get("focus"),S.get("blurScope"),S.get("disabled")),ge(r,a),Ms(n)&&(r.style.fill="none",r.style.stroke="none",k(r.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Rs(r,t){var e=r.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,n,i)}var Vs=function(){function r(){}return r}(),dn=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeBar",a}return t.prototype.getDefaultShape=function(){return new Vs},t.prototype.buildPath=function(e,a){for(var n=a.points,i=this.baseDimIdx,o=1-this.baseDimIdx,l=[],s=[],u=this.barWidth,v=0;v<n.length;v+=3)s[i]=u,s[o]=n[v+2],l[i]=n[v+i],l[o]=n[v+o],e.rect(l[0],l[1],s[0],s[1])},t}(De);function yn(r,t,e,a){var n=r.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),l=n.getLayout("size"),s=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var v=new dn({shape:{points:u},incremental:!!a,silent:!0,z2:0});v.baseDimIdx=i,v.largeDataIndices=o,v.barWidth=l,v.useStyle(s.getItemStyle()),t.add(v),e&&e.push(v)}var h=new dn({shape:{points:n.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=l,t.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,ue(h).seriesIndex=r.seriesIndex,r.get("silent")||(h.on("mousedown",mn),h.on("mousemove",mn)),e&&e.push(h)}var mn=Sl(function(r){var t=this,e=ks(t,r.offsetX,r.offsetY);ue(t).dataIndex=e>=0?e:null},30,!1);function ks(r,t,e){for(var a=r.baseDimIdx,n=1-a,i=r.shape.points,o=r.largeDataIndices,l=[],s=[],u=r.barWidth,v=0,h=i.length/3;v<h;v++){var c=v*3;if(s[a]=u,s[n]=i[c+2],l[a]=i[c+a],l[n]=i[c+n],s[n]<0&&(l[n]+=s[n],s[n]=-s[n]),t>=l[0]&&t<=l[0]+s[0]&&e>=l[1]&&e<=l[1]+s[1])return o[v]}return-1}function ro(r,t,e){if(Da(e,"cartesian2d")){var a=t,n=e.getArea();return{x:r?a.x:n.x,y:r?n.y:a.y,width:r?a.width:n.width,height:r?n.height:a.height}}else{var n=e.getArea(),i=t;return{cx:n.cx,cy:n.cy,r0:r?n.r0:i.r0,r:r?n.r:i.r,startAngle:r?i.startAngle:0,endAngle:r?i.endAngle:Math.PI*2}}}function zs(r,t,e){var a=r.type==="polar"?Je:Le;return new a({shape:ro(t,e,r),silent:!0,z2:0})}const Bs=Cs;function mg(r){r.registerChartView(Bs),r.registerSeriesModel(_s),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,ye(xi,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ii("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,eo("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var Sn=Math.PI*2,qt=Math.PI/180;function no(r,t){return mt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function io(r,t){var e=no(r,t),a=r.get("center"),n=r.get("radius");Y(n)||(n=[0,n]);var i=O(e.width,t.getWidth()),o=O(e.height,t.getHeight()),l=Math.min(i,o),s=O(n[0],l/2),u=O(n[1],l/2),v,h,c=r.coordinateSystem;if(c){var f=c.dataToPoint(a);v=f[0]||0,h=f[1]||0}else Y(a)||(a=[a,a]),v=O(a[0],i)+e.x,h=O(a[1],o)+e.y;return{cx:v,cy:h,r0:s,r:u}}function Gs(r,t,e){t.eachSeriesByType(r,function(a){var n=a.getData(),i=n.mapDimension("value"),o=no(a,e),l=io(a,e),s=l.cx,u=l.cy,v=l.r,h=l.r0,c=-a.get("startAngle")*qt,f=a.get("endAngle"),g=a.get("padAngle")*qt;f=f==="auto"?c-Sn:-f*qt;var p=a.get("minAngle")*qt,d=p+g,S=0;n.each(i,function(R){!isNaN(R)&&S++});var y=n.getSum(i),m=Math.PI/(y||S)*2,b=a.get("clockwise"),w=a.get("roseType"),D=a.get("stillShowZeroSum"),_=n.getDataExtent(i);_[0]=0;var x=b?1:-1,C=[c,f],A=x*g/2;pi(C,!b),c=C[0],f=C[1];var I=oo(a);I.startAngle=c,I.endAngle=f,I.clockwise=b;var L=Math.abs(f-c),N=L,P=0,T=c;if(n.setLayout({viewRect:o,r:v}),n.each(i,function(R,M){var V;if(isNaN(R)){n.setItemLayout(M,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:s,cy:u,r0:h,r:w?NaN:v});return}w!=="area"?V=y===0&&D?m:R*m:V=L/S,V<d?(V=d,N-=d):P+=R;var B=T+x*V,z=0,F=0;g>V?(z=T+x*V/2,F=z):(z=T+A,F=B-A),n.setItemLayout(M,{angle:V,startAngle:z,endAngle:F,clockwise:b,cx:s,cy:u,r0:h,r:w?xe(R,_,[h,v]):v}),T=B}),N<Sn&&S)if(N<=.001){var E=L/S;n.each(i,function(R,M){if(!isNaN(R)){var V=n.getItemLayout(M);V.angle=E;var B=0,z=0;E<g?(B=c+x*(M+1/2)*E,z=B):(B=c+x*M*E+A,z=c+x*(M+1)*E-A),V.startAngle=B,V.endAngle=z}})}else m=N/P,T=c,n.each(i,function(R,M){if(!isNaN(R)){var V=n.getItemLayout(M),B=V.angle===d?d:R*m,z=0,F=0;B<g?(z=T+x*B/2,F=z):(z=T+A,F=T+x*B-A),V.startAngle=z,V.endAngle=F,T+=x*B}})})}var oo=St();function Ft(r){return{seriesType:r,reset:function(t,e){var a=e.findComponents({mainType:"legend"});if(!(!a||!a.length)){var n=t.getData();n.filterSelf(function(i){for(var o=n.getName(i),l=0;l<a.length;l++)if(!a[l].isSelected(o))return!1;return!0})}}}}var Os=Math.PI/180;function bn(r,t,e,a,n,i,o,l,s,u){if(r.length<2)return;function v(p){for(var d=p.rB,S=d*d,y=0;y<p.list.length;y++){var m=p.list[y],b=Math.abs(m.label.y-e),w=a+m.len,D=w*w,_=Math.sqrt(Math.abs((1-b*b/S)*D)),x=t+(_+m.len2)*n,C=x-m.label.x,A=m.targetTextWidth-C*n;lo(m,A,!0),m.label.x=x}}function h(p){for(var d={list:[],maxY:0},S={list:[],maxY:0},y=0;y<p.length;y++)if(p[y].labelAlignTo==="none"){var m=p[y],b=m.label.y>e?S:d,w=Math.abs(m.label.y-e);if(w>=b.maxY){var D=m.label.x-t-m.len2*n,_=a+m.len,x=Math.abs(D)<_?Math.sqrt(w*w/(1-D*D/_/_)):_;b.rB=x,b.maxY=w}b.list.push(m)}v(d),v(S)}for(var c=r.length,f=0;f<c;f++)if(r[f].position==="outer"&&r[f].labelAlignTo==="labelLine"){var g=r[f].label.x-u;r[f].linePoints[1][0]+=g,r[f].label.x=u}Fl(r,s,s+o)&&h(r)}function Fs(r,t,e,a,n,i,o,l){for(var s=[],u=[],v=Number.MAX_VALUE,h=-Number.MAX_VALUE,c=0;c<r.length;c++){var f=r[c].label;Ma(r[c])||(f.x<t?(v=Math.min(v,f.x),s.push(r[c])):(h=Math.max(h,f.x),u.push(r[c])))}for(var c=0;c<r.length;c++){var g=r[c];if(!Ma(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var f=g.label,p=g.linePoints,d=void 0;g.labelAlignTo==="edge"?f.x<t?d=p[2][0]-g.labelDistance-o-g.edgeDistance:d=o+n-g.edgeDistance-p[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?f.x<t?d=v-o-g.bleedMargin:d=o+n-h-g.bleedMargin:f.x<t?d=f.x-o-g.bleedMargin:d=o+n-f.x-g.bleedMargin,g.targetTextWidth=d,lo(g,d)}}bn(u,t,e,a,1,n,i,o,l,h),bn(s,t,e,a,-1,n,i,o,l,v);for(var c=0;c<r.length;c++){var g=r[c];if(!Ma(g)&&g.linePoints){var f=g.label,p=g.linePoints,S=g.labelAlignTo==="edge",y=f.style.padding,m=y?y[1]+y[3]:0,b=f.style.backgroundColor?0:m,w=g.rect.width+b,D=p[1][0]-p[2][0];S?f.x<t?p[2][0]=o+g.edgeDistance+w+g.labelDistance:p[2][0]=o+n-g.edgeDistance-w-g.labelDistance:(f.x<t?p[2][0]=f.x+g.labelDistance:p[2][0]=f.x-g.labelDistance,p[1][0]=p[2][0]+D),p[1][1]=p[2][1]=f.y}}}function lo(r,t,e){if(e===void 0&&(e=!1),r.labelStyleWidth==null){var a=r.label,n=a.style,i=r.rect,o=n.backgroundColor,l=n.padding,s=l?l[1]+l[3]:0,u=n.overflow,v=i.width+(o?0:s);if(t<v||e){var h=i.height;if(u&&u.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",t-s);var c=a.getBoundingRect();a.setStyle("width",Math.ceil(c.width)),a.setStyle("backgroundColor",o)}else{var f=t-s,g=t<v?f:e?f>r.unconstrainedWidth?null:f:null;a.setStyle("width",g)}var p=a.getBoundingRect();i.width=p.width;var d=(a.style.margin||0)+2.1;i.height=p.height+d,i.y-=(i.height-h)/2}}}function Ma(r){return r.position==="center"}function Hs(r){var t=r.getData(),e=[],a,n,i=!1,o=(r.get("minShowLabelAngle")||0)*Os,l=t.getLayout("viewRect"),s=t.getLayout("r"),u=l.width,v=l.x,h=l.y,c=l.height;function f(D){D.ignore=!0}function g(D){if(!D.ignore)return!0;for(var _ in D.states)if(D.states[_].ignore===!1)return!0;return!1}t.each(function(D){var _=t.getItemGraphicEl(D),x=_.shape,C=_.getTextContent(),A=_.getTextGuideLine(),I=t.getItemModel(D),L=I.getModel("label"),N=L.get("position")||I.get(["emphasis","label","position"]),P=L.get("distanceToLabelLine"),T=L.get("alignTo"),E=O(L.get("edgeDistance"),u),R=L.get("bleedMargin"),M=I.getModel("labelLine"),V=M.get("length");V=O(V,u);var B=M.get("length2");if(B=O(B,u),Math.abs(x.endAngle-x.startAngle)<o){k(C.states,f),C.ignore=!0,A&&(k(A.states,f),A.ignore=!0);return}if(g(C)){var z=(x.startAngle+x.endAngle)/2,F=Math.cos(z),$=Math.sin(z),H,U,oe,Ce;a=x.cx,n=x.cy;var X=N==="inside"||N==="inner";if(N==="center")H=x.cx,U=x.cy,Ce="center";else{var W=(X?(x.r+x.r0)/2*F:x.r*F)+a,j=(X?(x.r+x.r0)/2*$:x.r*$)+n;if(H=W+F*3,U=j+$*3,!X){var q=W+F*(V+s-x.r),te=j+$*(V+s-x.r),ce=q+(F<0?-1:1)*B,me=te;T==="edge"?H=F<0?v+E:v+u-E:H=ce+(F<0?-P:P),U=me,oe=[[W,j],[q,te],[ce,me]]}Ce=X?"center":T==="edge"?F>0?"right":"left":F>0?"left":"right"}var Q=Math.PI,ve=0,pe=L.get("rotate");if(Ae(pe))ve=pe*(Q/180);else if(N==="center")ve=0;else if(pe==="radial"||pe===!0){var $e=F<0?-z+Q:-z;ve=$e}else if(pe==="tangential"&&N!=="outside"&&N!=="outer"){var ze=Math.atan2(F,$);ze<0&&(ze=Q*2+ze);var $t=$>0;$t&&(ze=Q+ze),ve=ze-Q}if(i=!!ve,C.x=H,C.y=U,C.rotation=ve,C.setStyle({verticalAlign:"middle"}),X){C.setStyle({align:Ce});var Ia=C.states.select;Ia&&(Ia.x+=C.x,Ia.y+=C.y)}else{var wt=C.getBoundingRect().clone();wt.applyTransform(C.getComputedTransform());var Or=(C.style.margin||0)+2.1;wt.y-=Or/2,wt.height+=Or,e.push({label:C,labelLine:A,position:N,len:V,len2:B,minTurnAngle:M.get("minTurnAngle"),maxSurfaceAngle:M.get("maxSurfaceAngle"),surfaceNormal:new he(F,$),linePoints:oe,textAlign:Ce,labelDistance:P,labelAlignTo:T,edgeDistance:E,bleedMargin:R,rect:wt,unconstrainedWidth:wt.width,labelStyleWidth:C.style.width})}_.setTextConfig({inside:X})}}),!i&&r.get("avoidLabelOverlap")&&Fs(e,a,n,s,u,c,v,h);for(var p=0;p<e.length;p++){var d=e[p],S=d.label,y=d.labelLine,m=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:d.textAlign}),m&&(k(S.states,f),S.ignore=!0);var b=S.states.select;b&&(b.x+=S.x,b.y+=S.y)}if(y){var w=d.linePoints;m||!w?(k(y.states,f),y.ignore=!0):(Ql(w,d.minTurnAngle),es(w,d.surfaceNormal,d.maxSurfaceAngle),y.setShape({points:w}),S.__hostTarget.textGuideLineConfig={anchor:new he(w[0][0],w[0][1])})}}}var $s=function(r){G(t,r);function t(e,a,n){var i=r.call(this)||this;i.z2=2;var o=new Ee;return i.setTextContent(o),i.updateData(e,a,n,!0),i}return t.prototype.updateData=function(e,a,n,i){var o=this,l=e.hostModel,s=e.getItemModel(a),u=s.getModel("emphasis"),v=e.getItemLayout(a),h=Z(it(s.getModel("itemStyle"),v,!0),v);if(isNaN(h.startAngle)){o.setShape(h);return}if(i){o.setShape(h);var c=l.getShallow("animationType");l.ecModel.ssr?(se(o,{scaleX:0,scaleY:0},l,{dataIndex:a,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):c==="scale"?(o.shape.r=v.r0,se(o,{shape:{r:v.r}},l,a)):n!=null?(o.setShape({startAngle:n,endAngle:n}),se(o,{shape:{startAngle:v.startAngle,endAngle:v.endAngle}},l,a)):(o.shape.endAngle=v.startAngle,K(o,{shape:{endAngle:v.endAngle}},l,a))}else ke(o),K(o,{shape:h},l,a);o.useStyle(e.getItemVisual(a,"style")),ge(o,s);var f=(v.startAngle+v.endAngle)/2,g=l.get("selectedOffset"),p=Math.cos(f)*g,d=Math.sin(f)*g,S=s.getShallow("cursor");S&&o.attr("cursor",S),this._updateLabel(l,e,a),o.ensureState("emphasis").shape=Z({r:v.r+(u.get("scale")&&u.get("scaleSize")||0)},it(u.getModel("itemStyle"),v)),Z(o.ensureState("select"),{x:p,y:d,shape:it(s.getModel(["select","itemStyle"]),v)}),Z(o.ensureState("blur"),{shape:it(s.getModel(["blur","itemStyle"]),v)});var y=o.getTextGuideLine(),m=o.getTextContent();y&&Z(y.ensureState("select"),{x:p,y:d}),Z(m.ensureState("select"),{x:p,y:d}),ie(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a,n){var i=this,o=a.getItemModel(n),l=o.getModel("labelLine"),s=a.getItemVisual(n,"style"),u=s&&s.fill,v=s&&s.opacity;Te(i,we(o),{labelFetcher:a.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:v,defaultText:e.getFormattedLabel(n,"normal")||a.getName(n)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var c=e.get(["label","position"]);if(c!=="outside"&&c!=="outer")i.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new yt,this.setTextGuideLine(f)),Ui(this,Zi(o),{stroke:u,opacity:pt(l.get(["lineStyle","opacity"]),v,1)})}},t}(Je),Ws=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,n,i){var o=e.getData(),l=this._data,s=this.group,u;if(!l&&o.count()>0){for(var v=o.getItemLayout(0),h=1;isNaN(v&&v.startAngle)&&h<o.count();++h)v=o.getItemLayout(h);v&&(u=v.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),o.count()===0&&e.get("showEmptyCircle")){var c=oo(e),f=new Je({shape:Z(io(e,n),c)});f.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,s.add(f)}o.diff(l).add(function(g){var p=new $s(o,g,u);o.setItemGraphicEl(g,p),s.add(p)}).update(function(g,p){var d=l.getItemGraphicEl(p);d.updateData(o,g,u),d.off("click"),s.add(d),o.setItemGraphicEl(g,d)}).remove(function(g){var p=l.getItemGraphicEl(g);aa(p,e,g)}).execute(),Hs(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,a){var n=a.getData(),i=n.getItemLayout(0);if(i){var o=e[0]-i.cx,l=e[1]-i.cy,s=Math.sqrt(o*o+l*l);return s<=i.r&&s>=i.r0}},t.type="pie",t}(ee);const Us=Ws;function bt(r,t,e){t=Y(t)&&{coordDimensions:t}||Z({encodeDefine:r.getEncode()},t);var a=r.getSource(),n=fa(a,t).dimensions,i=new st(n,r);return i.initData(a,e),i}var Zs=function(){function r(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},r.prototype.getItemVisual=function(t,e){var a=this._getDataWithEncodedVisual();return a.getItemVisual(t,e)},r}();const Ht=Zs;var Xs=St(),Ys=function(r){G(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ht(le(this.getData,this),le(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return bt(this,{coordDimensions:["value"],encodeDefaulter:ye(mr,this)})},t.prototype.getDataParams=function(e){var a=this.getData(),n=Xs(a),i=n.seats;if(!i){var o=[];a.each(a.mapDimension("value"),function(s){o.push(s)}),i=n.seats=bl(o,a.hostModel.get("percentPrecision"))}var l=r.prototype.getDataParams.call(this,e);return l.percent=i[e]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(e){Sr(e,"labelLine",["show"]);var a=e.labelLine,n=e.emphasis.labelLine;a.show=a.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(ne);const qs=Ys;function Ks(r){return{seriesType:r,reset:function(t,e){var a=t.getData();a.filterSelf(function(n){var i=a.mapDimension("value"),o=a.get(i,n);return!(Ae(o)&&!isNaN(o)&&o<0)})}}}function Sg(r){r.registerChartView(Us),r.registerSeriesModel(qs),Ai("pie",r.registerAction),r.registerLayout(ye(Gs,"pie")),r.registerProcessor(Ft("pie")),r.registerProcessor(Ks("pie"))}var js=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return He(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ne);const Js=js;var so=4,Qs=function(){function r(){}return r}(),eu=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new Qs},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,a){var n=a.points,i=a.size,o=this.symbolProxy,l=o.shape,s=e.getContext?e.getContext():e,u=s&&i[0]<so,v=this.softClipShape,h;if(u){this._ctx=s;return}for(this._ctx=null,h=this._off;h<n.length;){var c=n[h++],f=n[h++];isNaN(c)||isNaN(f)||v&&!v.contain(c,f)||(l.x=c-i[0]/2,l.y=f-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(e,l,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,a=e.points,n=e.size,i=this._ctx,o=this.softClipShape,l;if(i){for(l=this._off;l<a.length;){var s=a[l++],u=a[l++];isNaN(s)||isNaN(u)||o&&!o.contain(s,u)||i.fillRect(s-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},t.prototype.findDataIndex=function(e,a){for(var n=this.shape,i=n.points,o=n.size,l=Math.max(o[0],4),s=Math.max(o[1],4),u=i.length/2-1;u>=0;u--){var v=u*2,h=i[v]-l/2,c=i[v+1]-s/2;if(e>=h&&a>=c&&e<=h+l&&a<=c+s)return u}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),i=this.getBoundingRect();if(e=n[0],a=n[1],i.contain(e,a)){var o=this.hoverDataIdx=this.findDataIndex(e,a);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.points,i=a.size,o=i[0],l=i[1],s=1/0,u=1/0,v=-1/0,h=-1/0,c=0;c<n.length;){var f=n[c++],g=n[c++];s=Math.min(f,s),v=Math.max(f,v),u=Math.min(g,u),h=Math.max(g,h)}e=this._rect=new gt(s-o/2,u-l/2,v-s+o,h-u+l)}return e},t}(De),tu=function(){function r(){this.group=new ae}return r.prototype.updateData=function(t,e){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,e)},r.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var n=(a.endIndex-a.startIndex)*2,i=a.startIndex*4*2;e=new Float32Array(e.buffer,i,n)}a.setShape("points",e),a.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,e,a){var n=this._newAdded[0],i=e.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var l=o.length,s=new Float32Array(l+i.length);s.set(o),s.set(i,l),n.endIndex=t.end,n.setShape({points:s})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,e,a)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new eu({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;a=a||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=a.clipShape||null,t.symbolProxy=Ve(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<so;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var l=e.getVisual("style"),s=l&&l.fill;s&&t.setColor(s);var u=ue(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(v){u.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(u.dataIndex=h+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const au=tu;var ru=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var i=e.getData(),o=this._updateSymbolDraw(i,e);o.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._symbolDraw.incrementalUpdate(e,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=e.end===a.getData().count()},t.prototype.updateTransform=function(e,a,n){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=Ot("").reset(e,a,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var a=e.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,a){var n=this._symbolDraw,i=a.pipelineContext,o=i.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new au:new ba,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ee);const nu=ru;function bg(r){da(Hl),r.registerSeriesModel(Js),r.registerChartView(nu),r.registerLayout(Ot("scatter"))}function iu(r){r.eachSeriesByType("radar",function(t){var e=t.getData(),a=[],n=t.coordinateSystem;if(n){var i=n.getIndicatorAxes();k(i,function(o,l){e.each(e.mapDimension(i[l].dim),function(s,u){a[u]=a[u]||[];var v=n.dataToPoint(s,l);a[u][l]=wn(v)?v:Dn(n)})}),e.each(function(o){var l=jo(a[o],function(s){return wn(s)})||Dn(n);a[o].push(l.slice()),e.setItemLayout(o,a[o])})}})}function wn(r){return!isNaN(r[0])&&!isNaN(r[1])}function Dn(r){return[r.cx,r.cy]}function ou(r){var t=r.polar;if(t){Y(t)||(t=[t]);var e=[];k(t,function(a,n){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),r.radar=r.radar||[],Y(r.radar)||(r.radar=[r.radar]),r.radar.push(a)):e.push(a)}),r.polar=e}k(r.series,function(a){a&&a.type==="radar"&&a.polarIndex&&(a.radarIndex=a.polarIndex)})}var lu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.coordinateSystem,o=this.group,l=e.getData(),s=this._data;function u(c,f){var g=c.getItemVisual(f,"symbol")||"circle";if(g!=="none"){var p=Li(c.getItemVisual(f,"symbolSize")),d=Ve(g,-1,-1,2,2),S=c.getItemVisual(f,"symbolRotate")||0;return d.attr({style:{strokeNoScale:!0},z2:100,scaleX:p[0]/2,scaleY:p[1]/2,rotation:S*Math.PI/180||0}),d}}function v(c,f,g,p,d,S){g.removeAll();for(var y=0;y<f.length-1;y++){var m=u(p,d);m&&(m.__dimIdx=y,c[y]?(m.setPosition(c[y]),ya[S?"initProps":"updateProps"](m,{x:f[y][0],y:f[y][1]},e,d)):m.setPosition(f[y]),g.add(m))}}function h(c){return J(c,function(f){return[i.cx,i.cy]})}l.diff(s).add(function(c){var f=l.getItemLayout(c);if(f){var g=new br,p=new yt,d={shape:{points:f}};g.shape.points=h(f),p.shape.points=h(f),se(g,d,e,c),se(p,d,e,c);var S=new ae,y=new ae;S.add(p),S.add(g),S.add(y),v(p.shape.points,f,y,l,c,!0),l.setItemGraphicEl(c,S)}}).update(function(c,f){var g=s.getItemGraphicEl(f),p=g.childAt(0),d=g.childAt(1),S=g.childAt(2),y={shape:{points:l.getItemLayout(c)}};y.shape.points&&(v(p.shape.points,y.shape.points,S,l,c,!1),ke(d),ke(p),K(p,y,e),K(d,y,e),l.setItemGraphicEl(c,g))}).remove(function(c){o.remove(s.getItemGraphicEl(c))}).execute(),l.eachItemGraphicEl(function(c,f){var g=l.getItemModel(f),p=c.childAt(0),d=c.childAt(1),S=c.childAt(2),y=l.getItemVisual(f,"style"),m=y.fill;o.add(c),p.useStyle(Me(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:m})),ge(p,g,"lineStyle"),ge(d,g,"areaStyle");var b=g.getModel("areaStyle"),w=b.isEmpty()&&b.parentModel.isEmpty();d.ignore=w,k(["emphasis","select","blur"],function(x){var C=g.getModel([x,"areaStyle"]),A=C.isEmpty()&&C.parentModel.isEmpty();d.ensureState(x).ignore=A&&w}),d.useStyle(Me(b.getAreaStyle(),{fill:m,opacity:.7,decal:y.decal}));var D=g.getModel("emphasis"),_=D.getModel("itemStyle").getItemStyle();S.eachChild(function(x){if(x instanceof zt){var C=x.style;x.useStyle(Z({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},y))}else x.useStyle(y),x.setColor(m),x.style.strokeNoScale=!0;var A=x.ensureState("emphasis");A.style=Jo(_);var I=l.getStore().get(l.getDimensionIndex(x.__dimIdx),f);(I==null||isNaN(I))&&(I=""),Te(x,we(g),{labelFetcher:l.hostModel,labelDataIndex:f,labelDimIndex:x.__dimIdx,defaultText:I,inheritColor:m,defaultOpacity:y.opacity})}),ie(c,D.get("focus"),D.get("blurScope"),D.get("disabled"))}),this._data=l},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ee);const su=lu;var uu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ht(le(this.getData,this),le(this.getRawData,this))},t.prototype.getInitialData=function(e,a){return bt(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=this.coordinateSystem,l=o.getIndicatorAxes(),s=this.getData().getName(e),u=s===""?this.name:s,v=wl(this,e);return Pe("section",{header:u,sortBlocks:!0,blocks:J(l,function(h){var c=i.get(i.mapDimension(h.dim),e);return Pe("nameValue",{markerType:"subItem",markerColor:v,name:h.name,value:c,sortParam:c})})})},t.prototype.getTooltipPosition=function(e){if(e!=null){for(var a=this.getData(),n=this.coordinateSystem,i=a.getValues(J(n.dimensions,function(u){return a.mapDimension(u)}),e),o=0,l=i.length;o<l;o++)if(!isNaN(i[o])){var s=n.getIndicatorAxes();return n.coordToPoint(s[o].dataToCoord(i[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(ne);const vu=uu;function wg(r){da($l),r.registerChartView(su),r.registerSeriesModel(vu),r.registerLayout(iu),r.registerProcessor(Ft("radar")),r.registerPreprocessor(ou)}var hu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===e.id){var l=this._mapDraw;l&&o.add(l.group)}else if(e.needsDrawMap){var l=this._mapDraw||new Wl(n);o.add(l.group),l.draw(e,a,n,this,i),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(e,a,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,a,n){var i=e.originalData,o=this.group;i.each(i.mapDimension("value"),function(l,s){if(!isNaN(l)){var u=i.getItemLayout(s);if(!(!u||!u.point)){var v=u.point,h=u.offset,c=new Ti({style:{fill:e.getData().getVisual("style").fill},shape:{cx:v[0]+h*9,cy:v[1],r:3},silent:!0,z2:8+(h?0:Bt+1)});if(!h){var f=e.mainSeries.getData(),g=i.getName(s),p=f.indexOfName(g),d=i.getItemModel(s),S=d.getModel("label"),y=f.getItemGraphicEl(p);Te(c,we(d),{labelFetcher:{getFormattedLabel:function(m,b){return e.getFormattedLabel(p,b)}},defaultText:g}),c.disableLabelAnimation=!0,S.get("position")||c.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(m){ta(c,m)}}o.add(c)}}})},t.type="map",t}(ee);const cu=hu;var fu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(a){if(a!=null){var n=this.getData().getName(a),i=this.coordinateSystem,o=i.getRegion(n);return o&&i.dataToPoint(o.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var a=bt(this,{coordDimensions:["value"],encodeDefaulter:ye(mr,this)}),n=lt(),i=[],o=0,l=a.count();o<l;o++){var s=a.getName(o);n.set(s,o)}var u=Ul.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return k(u.regions,function(v){var h=v.name,c=n.get(h),f=v.properties&&v.properties.echartsStyle,g;c==null?(g={name:h},i.push(g)):g=a.getRawDataItem(c),f&&Qo(g,f)}),a.appendData(i),a},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var a=this.getData();return a.get(a.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var a=this.getData();return a.getItemModel(a.indexOfName(e))},t.prototype.formatTooltip=function(e,a,n){for(var i=this.getData(),o=this.getRawValue(e),l=i.getName(e),s=this.seriesGroup,u=[],v=0;v<s.length;v++){var h=s[v].originalData.indexOfName(l),c=i.mapDimension("value");isNaN(s[v].originalData.get(c,h))||u.push(s[v].name)}return Pe("section",{header:u.join(", "),noHeader:!u.length,blocks:[Pe("nameValue",{name:l,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var a=e.icon||"roundRect",n=Ve(a,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",a.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(ne);const gu=fu;function pu(r,t){var e={};return k(r,function(a){a.each(a.mapDimension("value"),function(n,i){var o="ec-"+a.getName(i);e[o]=e[o]||[],isNaN(n)||e[o].push(n)})}),r[0].map(r[0].mapDimension("value"),function(a,n){for(var i="ec-"+r[0].getName(n),o=0,l=1/0,s=-1/0,u=e[i].length,v=0;v<u;v++)l=Math.min(l,e[i][v]),s=Math.max(s,e[i][v]),o+=e[i][v];var h;return t==="min"?h=l:t==="max"?h=s:t==="average"?h=o/u:h=o,u===0?NaN:h})}function du(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getHostGeoModel(),n=a?"o"+a.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)}),k(t,function(e,a){for(var n=pu(J(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(var i=0;i<e.length;i++)e[i].seriesGroup=e,e[i].needsDrawMap=i===0&&!e[i].getHostGeoModel(),e[i].setData(n.cloneShallow()),e[i].mainSeries=e[0]})}function yu(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getMapType();if(!(e.getHostGeoModel()||t[a])){var n={};k(e.seriesGroup,function(o){var l=o.coordinateSystem,s=o.originalData;o.get("showLegendSymbol")&&r.getComponent("legend")&&s.each(s.mapDimension("value"),function(u,v){var h=s.getName(v),c=l.getRegion(h);if(!(!c||isNaN(u))){var f=n[h]||0,g=l.dataToPoint(c.getCenter());n[h]=f+1,s.setItemLayout(v,{point:g,offset:f})}})});var i=e.getData();i.each(function(o){var l=i.getName(o),s=i.getItemLayout(o)||{};s.showLabel=!n[l],i.setItemLayout(o,s)}),t[a]=!0}})}function Dg(r){da(Zl),r.registerChartView(cu),r.registerSeriesModel(gu),r.registerLayout(yu),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,du),Ai("map",r.registerAction)}function mu(r){var t=r;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],a,n;a=e.pop();)if(n=a.children,a.isExpand&&n.length)for(var i=n.length,o=i-1;o>=0;o--){var l=n[o];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},e.push(l)}}function Su(r,t){var e=r.isExpand?r.children:[],a=r.parentNode.children,n=r.hierNode.i?a[r.hierNode.i-1]:null;if(e.length){Du(r);var i=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;n?(r.hierNode.prelim=n.hierNode.prelim+t(r,n),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else n&&(r.hierNode.prelim=n.hierNode.prelim+t(r,n));r.parentNode.hierNode.defaultAncestor=_u(r,n,r.parentNode.hierNode.defaultAncestor||a[0],t)}function bu(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function _n(r){return arguments.length?r:Au}function At(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function wu(r,t){return mt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Du(r){for(var t=r.children,e=t.length,a=0,n=0;--e>=0;){var i=t[e];i.hierNode.prelim+=a,i.hierNode.modifier+=a,n+=i.hierNode.change,a+=i.hierNode.shift+n}}function _u(r,t,e,a){if(t){for(var n=r,i=r,o=i.parentNode.children[0],l=t,s=n.hierNode.modifier,u=i.hierNode.modifier,v=o.hierNode.modifier,h=l.hierNode.modifier;l=Ra(l),i=Va(i),l&&i;){n=Ra(n),o=Va(o),n.hierNode.ancestor=r;var c=l.hierNode.prelim+h-i.hierNode.prelim-u+a(l,i);c>0&&(Iu(xu(l,r,e),r,c),u+=c,s+=c),h+=l.hierNode.modifier,u+=i.hierNode.modifier,s+=n.hierNode.modifier,v+=o.hierNode.modifier}l&&!Ra(n)&&(n.hierNode.thread=l,n.hierNode.modifier+=h-s),i&&!Va(o)&&(o.hierNode.thread=i,o.hierNode.modifier+=u-v,e=r)}return e}function Ra(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function Va(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function xu(r,t,e){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:e}function Iu(r,t,e){var a=e/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,r.hierNode.change+=a}function Au(r,t){return r.parentNode===t.parentNode?1:2}var Lu=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),Tu=function(r){G(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Lu},t.prototype.buildPath=function(e,a){var n=a.childPoints,i=n.length,o=a.parentPoint,l=n[0],s=n[i-1];if(i===1){e.moveTo(o[0],o[1]),e.lineTo(l[0],l[1]);return}var u=a.orient,v=u==="TB"||u==="BT"?0:1,h=1-v,c=O(a.forkPosition,1),f=[];f[v]=o[v],f[h]=o[h]+(s[h]-o[h])*c,e.moveTo(o[0],o[1]),e.lineTo(f[0],f[1]),e.moveTo(l[0],l[1]),f[v]=l[v],e.lineTo(f[0],f[1]),f[v]=s[v],e.lineTo(f[0],f[1]),e.lineTo(s[0],s[1]);for(var g=1;g<i-1;g++){var p=n[g];e.moveTo(p[0],p[1]),f[v]=p[v],e.lineTo(f[0],f[1])}},t}(De),Cu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new ae,e}return t.prototype.init=function(e,a){this._controller=new wr(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,a,n){var i=e.getData(),o=e.layoutInfo,l=this._mainGroup,s=e.get("layout");s==="radial"?(l.x=o.x+o.width/2,l.y=o.y+o.height/2):(l.x=o.x,l.y=o.y),this._updateViewCoordSys(e,n),this._updateController(e,a,n);var u=this._data;i.diff(u).add(function(v){xn(i,v)&&In(i,v,null,l,e)}).update(function(v,h){var c=u.getItemGraphicEl(h);if(!xn(i,v)){c&&Ln(u,h,c,l,e);return}In(i,v,c,l,e)}).remove(function(v){var h=u.getItemGraphicEl(v);h&&Ln(u,v,h,l,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(v,h){v.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:h})})}),this._data=i},t.prototype._updateViewCoordSys=function(e,a){var n=e.getData(),i=[];n.each(function(h){var c=n.getItemLayout(h);c&&!isNaN(c.x)&&!isNaN(c.y)&&i.push([+c.x,+c.y])});var o=[],l=[];di(i,o,l);var s=this._min,u=this._max;l[0]-o[0]===0&&(o[0]=s?s[0]:o[0]-1,l[0]=u?u[0]:l[0]+1),l[1]-o[1]===0&&(o[1]=s?s[1]:o[1]-1,l[1]=u?u[1]:l[1]+1);var v=e.coordinateSystem=new Dr;v.zoomLimit=e.get("scaleLimit"),v.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),v.setCenter(e.get("center"),a),v.setZoom(e.get("zoom")),this.group.attr({x:v.x,y:v.y,scaleX:v.scaleX,scaleY:v.scaleY}),this._min=o,this._max=l},t.prototype._updateController=function(e,a,n){var i=this,o=this._controller,l=this._controllerHost,s=this.group;o.setPointerChecker(function(u,v,h){var c=s.getBoundingRect();return c.applyTransform(s.transform),c.contain(v,h)&&!zi(u,n,e)}),o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Bi(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Gi(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(e),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var a=e.getData(),n=this._getNodeGlobalScale(e);a.eachItemGraphicEl(function(i,o){i.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var a=e.coordinateSystem;if(a.type!=="view")return 1;var n=this._nodeScaleRatio,i=a.scaleX||1,o=a.getZoom(),l=(o-1)*n+1;return l/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ee);function xn(r,t){var e=r.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function In(r,t,e,a,n){var i=!e,o=r.tree.getNodeByDataIndex(t),l=o.getModel(),s=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?s:"#fff",v=r.tree.root,h=o.parentNode===v?o:o.parentNode||o,c=r.getItemGraphicEl(h.dataIndex),f=h.getLayout(),g=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:f,p=o.getLayout();i?(e=new wa(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.x=g.x,e.y=g.y):e.updateData(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,a.add(e),r.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,K(e,{x:p.x,y:p.y},n);var d=e.getSymbolPath();if(n.get("layout")==="radial"){var S=v.children[0],y=S.getLayout(),m=S.children.length,b=void 0,w=void 0;if(p.x===y.x&&o.isExpand===!0&&S.children.length){var D={x:(S.children[0].getLayout().x+S.children[m-1].getLayout().x)/2,y:(S.children[0].getLayout().y+S.children[m-1].getLayout().y)/2};b=Math.atan2(D.y-y.y,D.x-y.x),b<0&&(b=Math.PI*2+b),w=D.x<y.x,w&&(b=b-Math.PI)}else b=Math.atan2(p.y-y.y,p.x-y.x),b<0&&(b=Math.PI*2+b),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(w=p.x<y.x,w&&(b=b-Math.PI)):(w=p.x>y.x,w||(b=b-Math.PI));var _=w?"left":"right",x=l.getModel("label"),C=x.get("rotate"),A=C*(Math.PI/180),I=d.getTextContent();I&&(d.setTextConfig({position:x.get("position")||_,rotation:C==null?-b:A,origin:"center"}),I.setStyle("verticalAlign","middle"))}var L=l.get(["emphasis","focus"]),N=L==="relative"?Qt(o.getAncestorsIndices(),o.getDescendantIndices()):L==="ancestor"?o.getAncestorsIndices():L==="descendant"?o.getDescendantIndices():null;N&&(ue(e).focus=N),Pu(n,o,v,e,g,f,p,a),e.__edge&&(e.onHoverStateChange=function(P){if(P!=="blur"){var T=o.parentNode&&r.getItemGraphicEl(o.parentNode.dataIndex);T&&T.hoverState===Dl||ta(e.__edge,P)}})}function Pu(r,t,e,a,n,i,o,l){var s=t.getModel(),u=r.get("edgeShape"),v=r.get("layout"),h=r.getOrient(),c=r.get(["lineStyle","curveness"]),f=r.get("edgeForkPosition"),g=s.getModel("lineStyle").getLineStyle(),p=a.__edge;if(u==="curve")t.parentNode&&t.parentNode!==e&&(p||(p=a.__edge=new _l({shape:ur(v,h,c,n,n)})),K(p,{shape:ur(v,h,c,i,o)},r));else if(u==="polyline"&&v==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var d=t.children,S=[],y=0;y<d.length;y++){var m=d[y].getLayout();S.push([m.x,m.y])}p||(p=a.__edge=new Tu({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:f}})),K(p,{shape:{parentPoint:[o.x,o.y],childPoints:S}},r)}p&&!(u==="polyline"&&!t.isExpand)&&(p.useStyle(Me({strokeNoScale:!0,fill:null},g)),ge(p,s,"lineStyle"),ra(p),l.add(p))}function An(r,t,e,a,n){var i=t.tree.root,o=uo(i,r),l=o.source,s=o.sourceLayout,u=t.getItemGraphicEl(r.dataIndex);if(u){var v=t.getItemGraphicEl(l.dataIndex),h=v.__edge,c=u.__edge||(l.isExpand===!1||l.children.length===1?h:void 0),f=a.get("edgeShape"),g=a.get("layout"),p=a.get("orient"),d=a.get(["lineStyle","curveness"]);c&&(f==="curve"?na(c,{shape:ur(g,p,d,s,s),style:{opacity:0}},a,{cb:function(){e.remove(c)},removeOpt:n}):f==="polyline"&&a.get("layout")==="orthogonal"&&na(c,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},a,{cb:function(){e.remove(c)},removeOpt:n}))}}function uo(r,t){for(var e=t.parentNode===r?t:t.parentNode||t,a;a=e.getLayout(),a==null;)e=e.parentNode===r?e:e.parentNode||e;return{source:e,sourceLayout:a}}function Ln(r,t,e,a,n){var i=r.tree.getNodeByDataIndex(t),o=r.tree.root,l=uo(o,i).sourceLayout,s={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};na(e,{x:l.x+1,y:l.y+1},n,{cb:function(){a.remove(e),r.setItemGraphicEl(t,null)},removeOpt:s}),e.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:s}),i.children.forEach(function(u){An(u,r,a,n,s)}),An(i,r,a,n,s)}function ur(r,t,e,a,n){var i,o,l,s,u,v,h,c;if(r==="radial"){u=a.rawX,h=a.rawY,v=n.rawX,c=n.rawY;var f=At(u,h),g=At(u,h+(c-h)*e),p=At(v,c+(h-c)*e),d=At(v,c);return{x1:f.x||0,y1:f.y||0,x2:d.x||0,y2:d.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:p.x||0,cpy2:p.y||0}}else u=a.x,h=a.y,v=n.x,c=n.y,(t==="LR"||t==="RL")&&(i=u+(v-u)*e,o=h,l=v+(u-v)*e,s=c),(t==="TB"||t==="BT")&&(i=u,o=h+(c-h)*e,l=v,s=c+(h-c)*e);return{x1:u,y1:h,x2:v,y2:c,cpx1:i,cpy1:o,cpx2:l,cpy2:s}}const Nu=Cu;var Ie=St();function vo(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,ho(t,e,r),k(e,function(a){k(t.TRANSFERABLE_METHODS,function(n){a.wrapMethod(n,ye(Eu,r))})}),t.wrapMethod("cloneShallow",ye(Ru,r)),k(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,ye(Mu,r))}),el(e[t.dataType]===t)}function Eu(r,t){if(zu(this)){var e=Z({},Ie(this).datas);e[this.dataType]=t,ho(t,e,r)}else xr(t,this.dataType,Ie(this).mainData,r);return t}function Mu(r,t){return r.struct&&r.struct.update(),t}function Ru(r,t){return k(Ie(t).datas,function(e,a){e!==t&&xr(e.cloneShallow(),a,t,r)}),t}function Vu(r){var t=Ie(this).mainData;return r==null||t==null?t:Ie(t).datas[r]}function ku(){var r=Ie(this).mainData;return r==null?[{data:r}]:J(tl(Ie(r).datas),function(t){return{type:t,data:Ie(r).datas[t]}})}function zu(r){return Ie(r).mainData===r}function ho(r,t,e){Ie(r).datas={},k(t,function(a,n){xr(a,n,r,e)})}function xr(r,t,e,a){Ie(e).datas[t]=r,Ie(r).mainData=e,r.dataType=t,a.struct&&(r[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=r),r.getLinkedData=Vu,r.getLinkedDataAll=ku}var Bu=function(){function r(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,e,a){be(t)&&(a=e,e=t,t=null),t=t||{},Re(t)&&(t={order:t});var n=t.order||"preorder",i=this[t.attr||"children"],o;n==="preorder"&&(o=e.call(a,this));for(var l=0;!o&&l<i.length;l++)i[l].eachNode(t,e,a);n==="postorder"&&e.call(a,this)},r.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var a=0;a<this.children.length;a++){var n=this.children[a];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,a=this.children,n=a.length;e<n;e++){var i=a[e].getNodeById(t);if(i)return i}},r.prototype.contains=function(t){if(t===this)return!0;for(var e=0,a=this.children,n=a.length;e<n;e++){var i=a[e].contains(t);if(i)return i}},r.prototype.getAncestors=function(t){for(var e=[],a=t?this:this.parentNode;a;)e.push(a),a=a.parentNode;return e.reverse(),e},r.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},r.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r}(),Gu=function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,e,a){this.root.eachNode(t,e,a)},r.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,e=this._nodes,a=0,n=e.length;a<n;a++)e[a].dataIndex=-1;for(var a=0,n=t.count();a<n;a++)e[t.getRawIndex(a)].dataIndex=a},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,e,a){var n=new r(e),i=[],o=1;l(t);function l(v,h){var c=v.value;o=Math.max(o,Y(c)?c.length:1),i.push(v);var f=new Bu(ma(v.name,""),n);h?Ou(f,h):n.root=f,n._nodes.push(f);var g=v.children;if(g)for(var p=0;p<g.length;p++)l(g[p],f)}n.root.updateDepthAndHeight(0);var s=fa(i,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new st(s,e);return u.initData(i),a&&a(u),vo({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},r}();function Ou(r,t){var e=t.children;r.parentNode!==t&&(e.push(r),r.parentNode=t)}const Ir=Gu;function Rt(r,t,e){if(r&&dt(t,r.type)>=0){var a=e.getData().tree.root,n=r.targetNode;if(Re(n)&&(n=a.getNodeById(n)),n&&a.contains(n))return{node:n};var i=r.targetNodeId;if(i!=null&&(n=a.getNodeById(i)))return{node:n}}}function co(r){for(var t=[];r;)r=r.parentNode,r&&t.push(r);return t.reverse()}function Ar(r,t){var e=co(r);return dt(e,t)>=0}function _a(r,t){for(var e=[];r;){var a=r.dataIndex;e.push({name:r.name,dataIndex:a,value:t.getRawValue(a)}),r=r.parentNode}return e.reverse(),e}var Fu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var a={name:e.name,children:e.data},n=e.leaves||{},i=new ut(n,this,this.ecModel),o=Ir.createTree(a,this,l);function l(h){h.wrapMethod("getItemModel",function(c,f){var g=o.getNodeByDataIndex(f);return g&&g.children.length&&g.isExpand||(c.parentModel=i),c})}var s=0;o.eachNode("preorder",function(h){h.depth>s&&(s=h.depth)});var u=e.expandAndCollapse,v=u&&e.initialTreeDepth>=0?e.initialTreeDepth:s;return o.root.eachNode("preorder",function(h){var c=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=c&&c.collapsed!=null?!c.collapsed:h.depth<=v}),o.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,a,n){for(var i=this.getData().tree,o=i.root.children[0],l=i.getNodeByDataIndex(e),s=l.getValue(),u=l.name;l&&l!==o;)u=l.parentNode.name+"."+u,l=l.parentNode;return Pe("nameValue",{name:u,value:s,noValue:isNaN(s)||s==null})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=_a(n,this),a.collapsed=!n.isExpand,a},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(ne);const Hu=Fu;function $u(r,t,e){for(var a=[r],n=[],i;i=a.pop();)if(n.push(i),i.isExpand){var o=i.children;if(o.length)for(var l=0;l<o.length;l++)a.push(o[l])}for(;i=n.pop();)t(i,e)}function Dt(r,t){for(var e=[r],a;a=e.pop();)if(t(a),a.isExpand){var n=a.children;if(n.length)for(var i=n.length-1;i>=0;i--)e.push(n[i])}}function Wu(r,t){r.eachSeriesByType("tree",function(e){Uu(e,t)})}function Uu(r,t){var e=wu(r,t);r.layoutInfo=e;var a=r.get("layout"),n=0,i=0,o=null;a==="radial"?(n=2*Math.PI,i=Math.min(e.height,e.width)/2,o=_n(function(m,b){return(m.parentNode===b.parentNode?1:2)/m.depth})):(n=e.width,i=e.height,o=_n());var l=r.getData().tree.root,s=l.children[0];if(s){mu(l),$u(s,Su,o),l.hierNode.modifier=-s.hierNode.prelim,Dt(s,bu);var u=s,v=s,h=s;Dt(s,function(m){var b=m.getLayout().x;b<u.getLayout().x&&(u=m),b>v.getLayout().x&&(v=m),m.depth>h.depth&&(h=m)});var c=u===v?1:o(u,v)/2,f=c-u.getLayout().x,g=0,p=0,d=0,S=0;if(a==="radial")g=n/(v.getLayout().x+c+f),p=i/(h.depth-1||1),Dt(s,function(m){d=(m.getLayout().x+f)*g,S=(m.depth-1)*p;var b=At(d,S);m.setLayout({x:b.x,y:b.y,rawX:d,rawY:S},!0)});else{var y=r.getOrient();y==="RL"||y==="LR"?(p=i/(v.getLayout().x+c+f),g=n/(h.depth-1||1),Dt(s,function(m){S=(m.getLayout().x+f)*p,d=y==="LR"?(m.depth-1)*g:n-(m.depth-1)*g,m.setLayout({x:d,y:S},!0)})):(y==="TB"||y==="BT")&&(g=n/(v.getLayout().x+c+f),p=i/(h.depth-1||1),Dt(s,function(m){d=(m.getLayout().x+f)*g,S=y==="TB"?(m.depth-1)*p:i-(m.depth-1)*p,m.setLayout({x:d,y:S},!0)}))}}}function Zu(r){r.eachSeriesByType("tree",function(t){var e=t.getData(),a=e.tree;a.eachNode(function(n){var i=n.getModel(),o=i.getModel("itemStyle").getItemStyle(),l=e.ensureUniqueItemVisual(n.dataIndex,"style");Z(l,o)})})}function Xu(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(a){var n=t.dataIndex,i=a.getData().tree,o=i.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,a){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=n.coordinateSystem,o=Oi(i,t,void 0,a);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function _g(r){r.registerChartView(Nu),r.registerSeriesModel(Hu),r.registerLayout(Wu),r.registerVisual(Zu),Xu(r)}var Tn=["treemapZoomToNode","treemapRender","treemapMove"];function Yu(r){for(var t=0;t<Tn.length;t++)r.registerAction({type:Tn[t],update:"updateView"},rr);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,a){a.eachComponent({mainType:"series",subType:"treemap",query:e},n);function n(i,o){var l=["treemapZoomToNode","treemapRootToNode"],s=Rt(e,l,i);if(s){var u=i.getViewRoot();u&&(e.direction=Ar(u,s.node)?"rollUp":"drillDown"),i.resetViewRoot(s.node)}}})}function fo(r){var t=r.getData(),e=t.tree,a={};e.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var o=xl(r.ecModel,i.name||i.dataIndex+"",a);n.setVisual("decal",o)})}var qu=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};go(n);var i=e.levels||[],o=this.designatedVisualItemStyle={},l=new ut({itemStyle:o},this,a);i=e.levels=Ku(i,a);var s=J(i||[],function(h){return new ut(h,l,a)},this),u=Ir.createTree(n,this,v);function v(h){h.wrapMethod("getItemModel",function(c,f){var g=u.getNodeByDataIndex(f),p=g?s[g.depth]:null;return c.parentModel=p||l,c})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=this.getRawValue(e),l=i.getName(e);return Pe("nameValue",{name:l,value:o})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=_a(n,this),a.treePathInfo=a.treeAncestors,a},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},Z(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var a=this._idIndexMap;a||(a=this._idIndexMap=lt(),this._idIndexMapCount=0);var n=a.get(e);return n==null&&a.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){fo(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(ne);function go(r){var t=0;k(r.children,function(a){go(a);var n=a.value;Y(n)&&(n=n[0]),t+=n});var e=r.value;Y(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),Y(r.value)?r.value[0]=e:r.value=e}function Ku(r,t){var e=Kr(t.get("color")),a=Kr(t.get(["aria","decal","decals"]));if(e){r=r||[];var n,i;k(r,function(l){var s=new ut(l),u=s.get("color"),v=s.get("decal");(s.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(s.get(["itemStyle","decal"])||v&&v!=="none")&&(i=!0)});var o=r[0]||(r[0]={});return n||(o.color=e.slice()),!i&&a&&(o.decal=a.slice()),r}}const ju=qu;var Ju=8,Cn=8,ka=5,Qu=function(){function r(t){this.group=new ae,t.add(this.group)}return r.prototype.render=function(t,e,a,n){var i=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!i.get("show")||!a)){var l=i.getModel("itemStyle"),s=i.getModel("emphasis"),u=l.getModel("textStyle"),v=s.getModel(["itemStyle","textStyle"]),h={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,h,u),this._renderContent(t,h,l,s,u,v,n),Il(o,h.pos,h.box)}},r.prototype._prepare=function(t,e,a){for(var n=t;n;n=n.parentNode){var i=ma(n.getModel().get("name"),""),o=a.getTextRect(i),l=Math.max(o.width+Ju*2,e.emptyItemWidth);e.totalWidth+=l+Cn,e.renderList.push({node:n,text:i,width:l})}},r.prototype._renderContent=function(t,e,a,n,i,o,l){for(var s=0,u=e.emptyItemWidth,v=t.get(["breadcrumb","height"]),h=Al(e.pos,e.box),c=e.totalWidth,f=e.renderList,g=n.getModel("itemStyle").getItemStyle(),p=f.length-1;p>=0;p--){var d=f[p],S=d.node,y=d.width,m=d.text;c>h.width&&(c-=y-u,y=u,m=null);var b=new br({shape:{points:ev(s,0,y,v,p===f.length-1,p===0)},style:Me(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ee({style:Be(i,{text:m})}),textConfig:{position:"inside"},z2:Bt*1e4,onclick:ye(l,S)});b.disableLabelAnimation=!0,b.getTextContent().ensureState("emphasis").style=Be(o,{text:m}),b.ensureState("emphasis").style=g,ie(b,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(b),tv(b,t,S),s+=y+Cn}},r.prototype.remove=function(){this.group.removeAll()},r}();function ev(r,t,e,a,n,i){var o=[[n?r:r-ka,t],[r+e,t],[r+e,t+a],[n?r:r-ka,t+a]];return!i&&o.splice(2,0,[r+e+ka,t+a/2]),!n&&o.push([r,t+a/2]),o}function tv(r,t,e){ue(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&_a(e,t)}}const av=Qu;var rv=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,e,a,n,i){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:a,delay:n,easing:i}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,e=this._storage.length,a=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,i=this._storage.length;n<i;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:a,aborted:a})}return this},r}();function nv(){return new rv}var vr=ae,Pn=Le,Nn=3,En="label",Mn="upperLabel",iv=Bt*10,ov=Bt*2,lv=Bt*3,tt=Ll([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Rn=function(r){var t=tt(r);return t.stroke=t.fill=t.lineWidth=null,t},sa=St(),sv=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=_t(),e}return t.prototype.render=function(e,a,n,i){var o=a.findComponents({mainType:"series",subType:"treemap",query:i});if(!(dt(o,e)<0)){this.seriesModel=e,this.api=n,this.ecModel=a;var l=["treemapZoomToNode","treemapRootToNode"],s=Rt(i,l,e),u=i&&i.type,v=e.layoutInfo,h=!this._oldTree,c=this._storage,f=u==="treemapRootToNode"&&s&&c?{rootNodeGroup:c.nodeGroup[s.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(v),p=e.get("animation"),d=this._doRender(g,e,f);p&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(g,d,e,f):d.renderFinally(),this._resetController(n),this._renderBreadcrumb(e,n,s)}},t.prototype._giveContainerGroup=function(e){var a=this._containerGroup;return a||(a=this._containerGroup=new vr,this._initEvents(a),this.group.add(a)),a.x=e.x,a.y=e.y,a},t.prototype._doRender=function(e,a,n){var i=a.getData().tree,o=this._oldTree,l=_t(),s=_t(),u=this._storage,v=[];function h(y,m,b,w){return uv(a,s,u,n,l,v,y,m,b,w)}p(i.root?[i.root]:[],o&&o.root?[o.root]:[],e,i===o||!o,0);var c=d(u);if(this._oldTree=i,this._storage=s,this._controllerHost){var f=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===f.width&&g.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:l,willDeleteEls:c,renderFinally:S};function p(y,m,b,w,D){w?(m=y,k(y,function(C,A){!C.isRemoved()&&x(A,A)})):new Sa(m,y,_,_).add(x).update(x).remove(ye(x,null)).execute();function _(C){return C.getId()}function x(C,A){var I=C!=null?y[C]:null,L=A!=null?m[A]:null,N=h(I,L,b,D);N&&p(I&&I.viewChildren||[],L&&L.viewChildren||[],N,w,D+1)}}function d(y){var m=_t();return y&&k(y,function(b,w){var D=m[w];k(b,function(_){_&&(D.push(_),sa(_).willDelete=!0)})}),m}function S(){k(c,function(y){k(y,function(m){m.parent&&m.parent.remove(m)})}),k(v,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(e,a,n,i){var o=n.get("animationDurationUpdate"),l=n.get("animationEasing"),s=(be(o)?0:o)||0,u=(be(l)?null:l)||"cubicOut",v=nv();k(a.willDeleteEls,function(h,c){k(h,function(f,g){if(!f.invisible){var p=f.parent,d,S=sa(p);if(i&&i.direction==="drillDown")d=p===i.rootNodeGroup?{shape:{x:0,y:0,width:S.nodeWidth,height:S.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,m=0;S.willDelete||(y=S.nodeWidth/2,m=S.nodeHeight/2),d=c==="nodeGroup"?{x:y,y:m,style:{opacity:0}}:{shape:{x:y,y:m,width:0,height:0},style:{opacity:0}}}d&&v.add(f,d,s,0,u)}})}),k(this._storage,function(h,c){k(h,function(f,g){var p=a.lastsForAnimation[c][g],d={};p&&(f instanceof ae?p.oldX!=null&&(d.x=f.x,d.y=f.y,f.x=p.oldX,f.y=p.oldY):(p.oldShape&&(d.shape=Z({},f.shape),f.setShape(p.oldShape)),p.fadein?(f.setStyle("opacity",0),d.style={opacity:1}):f.style.opacity!==1&&(d.style={opacity:1})),v.add(f,d,s,0,u))})},this),this._state="animating",v.finished(le(function(){this._state="ready",a.renderFinally()},this)).start()},t.prototype._resetController=function(e){var a=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),a||(a=this._controller=new wr(e.getZr()),a.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),a.on("pan",le(this._onPan,this)),a.on("zoom",le(this._onZoom,this)));var i=new gt(0,0,e.getWidth(),e.getHeight());a.setPointerChecker(function(o,l,s){return i.contain(l,s)})},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>Nn||Math.abs(e.dy)>Nn)){var a=this.seriesModel.getData().tree.root;if(!a)return;var n=a.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var a=e.originX,n=e.originY,i=e.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var s=new gt(l.x,l.y,l.width,l.height),u=null,v=this._controllerHost;u=v.zoomLimit;var h=v.zoom=v.zoom||1;if(h*=i,u){var c=u.min||0,f=u.max||1/0;h=Math.max(Math.min(f,h),c)}var g=h/v.zoom;v.zoom=h;var p=this.seriesModel.layoutInfo;a-=p.x,n-=p.y;var d=rl();Wr(d,d,[-a,-n]),al(d,d,[g,g]),Wr(d,d,[a,n]),s.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},t.prototype._initEvents=function(e){var a=this;e.on("click",function(n){if(a._state==="ready"){var i=a.seriesModel.get("nodeClick",!0);if(i){var o=a.findTarget(n.offsetX,n.offsetY);if(o){var l=o.node;if(l.getLayout().isLeafRoot)a._rootToNode(o);else if(i==="zoomToNode")a._zoomToNode(o);else if(i==="link"){var s=l.hostTree.data.getItemModel(l.dataIndex),u=s.get("link",!0),v=s.get("target",!0)||"blank";u&&Ci(u,v)}}}}},this)},t.prototype._renderBreadcrumb=function(e,a,n){var i=this;n||(n=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(a.getWidth()/2,a.getHeight()/2),n||(n={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new av(this.group))).render(e,a,n.node,function(o){i._state!=="animating"&&(Ar(e.getViewRoot(),o)?i._rootToNode({node:o}):i._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=_t(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,a){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(o){var l=this._storage.background[o.getRawIndex()];if(l){var s=l.transformCoordToLocal(e,a),u=l.shape;if(u.x<=s[0]&&s[0]<=u.x+u.width&&u.y<=s[1]&&s[1]<=u.y+u.height)n={node:o,offsetX:s[0],offsetY:s[1]};else return!1}},this),n},t.type="treemap",t}(ee);function _t(){return{nodeGroup:[],background:[],content:[]}}function uv(r,t,e,a,n,i,o,l,s,u){if(!o)return;var v=o.getLayout(),h=r.getData(),c=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!v||!v.isInView)return;var f=v.width,g=v.height,p=v.borderWidth,d=v.invisible,S=o.getRawIndex(),y=l&&l.getRawIndex(),m=o.viewChildren,b=v.upperHeight,w=m&&m.length,D=c.getModel("itemStyle"),_=c.getModel(["emphasis","itemStyle"]),x=c.getModel(["blur","itemStyle"]),C=c.getModel(["select","itemStyle"]),A=D.get("borderRadius")||0,I=U("nodeGroup",vr);if(!I)return;if(s.add(I),I.x=v.x||0,I.y=v.y||0,I.markRedraw(),sa(I).nodeWidth=f,sa(I).nodeHeight=g,v.isAboveViewRoot)return I;var L=U("background",Pn,u,ov);L&&B(I,L,w&&v.upperLabelHeight);var N=c.getModel("emphasis"),P=N.get("focus"),T=N.get("blurScope"),E=N.get("disabled"),R=P==="ancestor"?o.getAncestorsIndices():P==="descendant"?o.getDescendantIndices():P;if(w)jr(I)&&Ut(I,!1),L&&(Ut(L,!E),h.setItemGraphicEl(o.dataIndex,L),Jr(L,R,T));else{var M=U("content",Pn,u,lv);M&&z(I,M),L.disableMorphing=!0,L&&jr(L)&&Ut(L,!1),Ut(I,!E),h.setItemGraphicEl(o.dataIndex,I);var V=c.getShallow("cursor");V&&M.attr("cursor",V),Jr(I,R,T)}return I;function B(X,W,j){var q=ue(W);if(q.dataIndex=o.dataIndex,q.seriesIndex=r.seriesIndex,W.setShape({x:0,y:0,width:f,height:g,r:A}),d)F(W);else{W.invisible=!1;var te=o.getVisual("style"),ce=te.stroke,me=Rn(D);me.fill=ce;var Q=tt(_);Q.fill=_.get("borderColor");var ve=tt(x);ve.fill=x.get("borderColor");var pe=tt(C);if(pe.fill=C.get("borderColor"),j){var $e=f-2*p;$(W,ce,te.opacity,{x:p,y:0,width:$e,height:b})}else W.removeTextContent();W.setStyle(me),W.ensureState("emphasis").style=Q,W.ensureState("blur").style=ve,W.ensureState("select").style=pe,ra(W)}X.add(W)}function z(X,W){var j=ue(W);j.dataIndex=o.dataIndex,j.seriesIndex=r.seriesIndex;var q=Math.max(f-2*p,0),te=Math.max(g-2*p,0);if(W.culling=!0,W.setShape({x:p,y:p,width:q,height:te,r:A}),d)F(W);else{W.invisible=!1;var ce=o.getVisual("style"),me=ce.fill,Q=Rn(D);Q.fill=me,Q.decal=ce.decal;var ve=tt(_),pe=tt(x),$e=tt(C);$(W,me,ce.opacity,null),W.setStyle(Q),W.ensureState("emphasis").style=ve,W.ensureState("blur").style=pe,W.ensureState("select").style=$e,ra(W)}X.add(W)}function F(X){!X.invisible&&i.push(X)}function $(X,W,j,q){var te=c.getModel(q?Mn:En),ce=ma(c.get("name"),null),me=te.getShallow("show");Te(X,we(c,q?Mn:En),{defaultText:me?ce:null,inheritColor:W,defaultOpacity:j,labelFetcher:r,labelDataIndex:o.dataIndex});var Q=X.getTextContent();if(Q){var ve=Q.style,pe=nl(ve.padding||0);q&&(X.setTextConfig({layoutRect:q}),Q.disableLabelLayout=!0),Q.beforeUpdate=function(){var ze=Math.max((q?q.width:X.shape.width)-pe[1]-pe[3],0),$t=Math.max((q?q.height:X.shape.height)-pe[0]-pe[2],0);(ve.width!==ze||ve.height!==$t)&&Q.setStyle({width:ze,height:$t})},ve.truncateMinChar=2,ve.lineOverflow="truncate",H(ve,q,v);var $e=Q.getState("emphasis");H($e?$e.style:null,q,v)}}function H(X,W,j){var q=X?X.text:null;if(!W&&j.isLeafRoot&&q!=null){var te=r.get("drillDownIcon",!0);X.text=te?te+" "+q:q}}function U(X,W,j,q){var te=y!=null&&e[X][y],ce=n[X];return te?(e[X][y]=null,oe(ce,te)):d||(te=new W,te instanceof yi&&(te.z2=vv(j,q)),Ce(ce,te)),t[X][S]=te}function oe(X,W){var j=X[S]={};W instanceof vr?(j.oldX=W.x,j.oldY=W.y):j.oldShape=Z({},W.shape)}function Ce(X,W){var j=X[S]={},q=o.parentNode,te=W instanceof ae;if(q&&(!a||a.direction==="drillDown")){var ce=0,me=0,Q=n.background[q.getRawIndex()];!a&&Q&&Q.oldShape&&(ce=Q.oldShape.width,me=Q.oldShape.height),te?(j.oldX=0,j.oldY=me):j.oldShape={x:ce,y:me,width:0,height:0}}j.fadein=!te}}function vv(r,t){return r*iv+t}const hv=sv;var cv="itemStyle",po=St();const fv={seriesType:"treemap",reset:function(r){var t=r.getData().tree,e=t.root;e.isRemoved()||yo(e,{},r.getViewRoot().getAncestors(),r)}};function yo(r,t,e,a){var n=r.getModel(),i=r.getLayout(),o=r.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var l=n.getModel(cv),s=gv(l,t,a),u=o.ensureUniqueItemVisual(r.dataIndex,"style"),v=l.get("borderColor"),h=l.get("borderColorSaturation"),c;h!=null&&(c=Vn(s),v=pv(h,c)),u.stroke=v;var f=r.viewChildren;if(!f||!f.length)c=Vn(s),u.fill=c;else{var g=dv(r,n,i,l,s,f);k(f,function(p,d){if(p.depth>=e.length||p===e[p.depth]){var S=yv(n,s,p,d,g,a);yo(p,S,e,a)}})}}}function gv(r,t,e){var a=Z({},t),n=e.designatedVisualItemStyle;return k(["color","colorAlpha","colorSaturation"],function(i){n[i]=t[i];var o=r.get(i);n[i]=null,o!=null&&(a[i]=o)}),a}function Vn(r){var t=za(r,"color");if(t){var e=za(r,"colorAlpha"),a=za(r,"colorSaturation");return a&&(t=mi(t,null,null,a)),e&&(t=il(t,e)),t}}function pv(r,t){return t!=null?mi(t,null,null,r):null}function za(r,t){var e=r[t];if(e!=null&&e!=="none")return e}function dv(r,t,e,a,n,i){if(!(!i||!i.length)){var o=Ba(t,"color")||n.color!=null&&n.color!=="none"&&(Ba(t,"colorAlpha")||Ba(t,"colorSaturation"));if(o){var l=t.get("visualMin"),s=t.get("visualMax"),u=e.dataExtent.slice();l!=null&&l<u[0]&&(u[0]=l),s!=null&&s>u[1]&&(u[1]=s);var v=t.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};h.type==="color"&&(v==="index"||v==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var c=new Fi(h);return po(c).drColorMappingBy=v,c}}}function Ba(r,t){var e=r.get(t);return Y(e)&&e.length?{name:t,range:e}:null}function yv(r,t,e,a,n,i){var o=Z({},t);if(n){var l=n.type,s=l==="color"&&po(n).drColorMappingBy,u=s==="index"?a:s==="id"?i.mapIdToIndex(e.getId()):e.getValue(r.get("visualDimension"));o[l]=n.mapValueToVisual(u)}return o}var Vt=Math.max,ua=Math.min,kn=Nt,Lr=k,mo=["itemStyle","borderWidth"],mv=["itemStyle","gapWidth"],Sv=["upperLabel","show"],bv=["upperLabel","height"];const wv={seriesType:"treemap",reset:function(r,t,e,a){var n=e.getWidth(),i=e.getHeight(),o=r.option,l=mt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),s=o.size||[],u=O(kn(l.width,s[0]),n),v=O(kn(l.height,s[1]),i),h=a&&a.type,c=["treemapZoomToNode","treemapRootToNode"],f=Rt(a,c,r),g=h==="treemapRender"||h==="treemapMove"?a.rootRect:null,p=r.getViewRoot(),d=co(p);if(h!=="treemapMove"){var S=h==="treemapZoomToNode"?Lv(r,f,p,u,v):g?[g.width,g.height]:[u,v],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var m={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var b={x:0,y:0,width:S[0],height:S[1],area:S[0]*S[1]};p.setLayout(b),So(p,m,!1,0),b=p.getLayout(),Lr(d,function(D,_){var x=(d[_+1]||p).getValue();D.setLayout(Z({dataExtent:[x,x],borderWidth:0,upperHeight:0},b))})}var w=r.getData().tree.root;w.setLayout(Tv(l,g,f),!0),r.setLayoutInfo(l),bo(w,new gt(-l.x,-l.y,n,i),d,p,0)}};function So(r,t,e,a){var n,i;if(!r.isRemoved()){var o=r.getLayout();n=o.width,i=o.height;var l=r.getModel(),s=l.get(mo),u=l.get(mv)/2,v=wo(l),h=Math.max(s,v),c=s-u,f=h-u;r.setLayout({borderWidth:s,upperHeight:h,upperLabelHeight:v},!0),n=Vt(n-2*c,0),i=Vt(i-c-f,0);var g=n*i,p=Dv(r,l,g,t,e,a);if(p.length){var d={x:c,y:f,width:n,height:i},S=ua(n,i),y=1/0,m=[];m.area=0;for(var b=0,w=p.length;b<w;){var D=p[b];m.push(D),m.area+=D.getLayout().area;var _=Av(m,S,t.squareRatio);_<=y?(b++,y=_):(m.area-=m.pop().getLayout().area,zn(m,S,d,u,!1),S=ua(d.width,d.height),m.length=m.area=0,y=1/0)}if(m.length&&zn(m,S,d,u,!0),!e){var x=l.get("childrenVisibleMin");x!=null&&g<x&&(e=!0)}for(var b=0,w=p.length;b<w;b++)So(p[b],t,e,a+1)}}}function Dv(r,t,e,a,n,i){var o=r.children||[],l=a.sort;l!=="asc"&&l!=="desc"&&(l=null);var s=a.leafDepth!=null&&a.leafDepth<=i;if(n&&!s)return r.viewChildren=[];o=dr(o,function(f){return!f.isRemoved()}),xv(o,l);var u=Iv(t,o,l);if(u.sum===0)return r.viewChildren=[];if(u.sum=_v(t,e,u.sum,l,o),u.sum===0)return r.viewChildren=[];for(var v=0,h=o.length;v<h;v++){var c=o[v].getValue()/u.sum*e;o[v].setLayout({area:c})}return s&&(o.length&&r.setLayout({isLeafRoot:!0},!0),o.length=0),r.viewChildren=o,r.setLayout({dataExtent:u.dataExtent},!0),o}function _v(r,t,e,a,n){if(!a)return e;for(var i=r.get("visibleMin"),o=n.length,l=o,s=o-1;s>=0;s--){var u=n[a==="asc"?o-s-1:s].getValue();u/e*t<i&&(l=s,e-=u)}return a==="asc"?n.splice(0,o-l):n.splice(l,o-l),e}function xv(r,t){return t&&r.sort(function(e,a){var n=t==="asc"?e.getValue()-a.getValue():a.getValue()-e.getValue();return n===0?t==="asc"?e.dataIndex-a.dataIndex:a.dataIndex-e.dataIndex:n}),r}function Iv(r,t,e){for(var a=0,n=0,i=t.length;n<i;n++)a+=t[n].getValue();var o=r.get("visualDimension"),l;return!t||!t.length?l=[NaN,NaN]:o==="value"&&e?(l=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&l.reverse()):(l=[1/0,-1/0],Lr(t,function(s){var u=s.getValue(o);u<l[0]&&(l[0]=u),u>l[1]&&(l[1]=u)})),{sum:a,dataExtent:l}}function Av(r,t,e){for(var a=0,n=1/0,i=0,o=void 0,l=r.length;i<l;i++)o=r[i].getLayout().area,o&&(o<n&&(n=o),o>a&&(a=o));var s=r.area*r.area,u=t*t*e;return s?Vt(u*a/s,s/(u*n)):1/0}function zn(r,t,e,a,n){var i=t===e.width?0:1,o=1-i,l=["x","y"],s=["width","height"],u=e[l[i]],v=t?r.area/t:0;(n||v>e[s[o]])&&(v=e[s[o]]);for(var h=0,c=r.length;h<c;h++){var f=r[h],g={},p=v?f.getLayout().area/v:0,d=g[s[o]]=Vt(v-2*a,0),S=e[l[i]]+e[s[i]]-u,y=h===c-1||S<p?S:p,m=g[s[i]]=Vt(y-2*a,0);g[l[o]]=e[l[o]]+ua(a,d/2),g[l[i]]=u+ua(a,m/2),u+=y,f.setLayout(g,!0)}e[l[o]]+=v,e[s[o]]-=v}function Lv(r,t,e,a,n){var i=(t||{}).node,o=[a,n];if(!i||i===e)return o;for(var l,s=a*n,u=s*r.option.zoomToNodeRatio;l=i.parentNode;){for(var v=0,h=l.children,c=0,f=h.length;c<f;c++)v+=h[c].getValue();var g=i.getValue();if(g===0)return o;u*=v/g;var p=l.getModel(),d=p.get(mo),S=Math.max(d,wo(p));u+=4*d*d+(3*d+S)*Math.pow(u,.5),u>Qr&&(u=Qr),i=l}u<s&&(u=s);var y=Math.pow(u/s,.5);return[a*y,n*y]}function Tv(r,t,e){if(t)return{x:t.x,y:t.y};var a={x:0,y:0};if(!e)return a;var n=e.node,i=n.getLayout();if(!i)return a;for(var o=[i.width/2,i.height/2],l=n;l;){var s=l.getLayout();o[0]+=s.x,o[1]+=s.y,l=l.parentNode}return{x:r.width/2-o[0],y:r.height/2-o[1]}}function bo(r,t,e,a,n){var i=r.getLayout(),o=e[n],l=o&&o===r;if(!(o&&!l||n===e.length&&r!==a)){r.setLayout({isInView:!0,invisible:!l&&!t.intersect(i),isAboveViewRoot:l},!0);var s=new gt(t.x-i.x,t.y-i.y,t.width,t.height);Lr(r.viewChildren||[],function(u){bo(u,s,e,a,n+1)})}}function wo(r){return r.get(Sv)?r.get(bv):0}function xg(r){r.registerSeriesModel(ju),r.registerChartView(hv),r.registerVisual(fv),r.registerLayout(wv),Yu(r)}function Cv(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getGraph(),i=n.data,o=a.mapArray(a.getName);i.filterSelf(function(l){var s=i.getItemModel(l),u=s.getShallow("category");if(u!=null){Ae(u)&&(u=o[u]);for(var v=0;v<t.length;v++)if(!t[v].isSelected(u))return!1}return!0})})}function Pv(r){var t={};r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getData(),i={};a.each(function(o){var l=a.getName(o);i["ec-"+l]=o;var s=a.getItemModel(o),u=s.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(l,t)),a.setItemVisual(o,"style",u);for(var v=["symbol","symbolSize","symbolKeepAspect"],h=0;h<v.length;h++){var c=s.getShallow(v[h],!0);c!=null&&a.setItemVisual(o,v[h],c)}}),a.count()&&n.each(function(o){var l=n.getItemModel(o),s=l.getShallow("category");if(s!=null){Re(s)&&(s=i["ec-"+s]);var u=a.getItemVisual(s,"style"),v=n.ensureUniqueItemVisual(o,"style");Z(v,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],c=0;c<h.length;c++)n.setItemVisual(o,h[c],a.getItemVisual(s,h[c]))}})})}function Kt(r){return r instanceof Array||(r=[r,r]),r}function Nv(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),a=t.getEdgeData(),n=Kt(t.get("edgeSymbol")),i=Kt(t.get("edgeSymbolSize"));a.setVisual("fromSymbol",n&&n[0]),a.setVisual("toSymbol",n&&n[1]),a.setVisual("fromSymbolSize",i&&i[0]),a.setVisual("toSymbolSize",i&&i[1]),a.setVisual("style",t.getModel("lineStyle").getLineStyle()),a.each(function(o){var l=a.getItemModel(o),s=e.getEdgeByIndex(o),u=Kt(l.getShallow("symbol",!0)),v=Kt(l.getShallow("symbolSize",!0)),h=l.getModel("lineStyle").getLineStyle(),c=a.ensureUniqueItemVisual(o,"style");switch(Z(c,h),c.stroke){case"source":{var f=s.node1.getVisual("style");c.stroke=f&&f.fill;break}case"target":{var f=s.node2.getVisual("style");c.stroke=f&&f.fill;break}}u[0]&&s.setVisual("fromSymbol",u[0]),u[1]&&s.setVisual("toSymbol",u[1]),v[0]&&s.setVisual("fromSymbolSize",v[0]),v[1]&&s.setVisual("toSymbolSize",v[1])})})}var hr="-->",xa=function(r){return r.get("autoCurveness")||null},Do=function(r,t){var e=xa(r),a=20,n=[];if(Ae(e))a=e;else if(Y(e)){r.__curvenessList=e;return}t>a&&(a=t);var i=a%2?a+2:a+3;n=[];for(var o=0;o<i;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));r.__curvenessList=n},kt=function(r,t,e){var a=[r.id,r.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[e.uid,a,n].join(hr)},_o=function(r){var t=r.split(hr);return[t[0],t[2],t[1]].join(hr)},Ev=function(r,t){var e=kt(r.node1,r.node2,t);return t.__edgeMap[e]},Mv=function(r,t){var e=cr(kt(r.node1,r.node2,t),t),a=cr(kt(r.node2,r.node1,t),t);return e+a},cr=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function Rv(r){xa(r)&&(r.__curvenessList=[],r.__edgeMap={},Do(r))}function Vv(r,t,e,a){if(xa(e)){var n=kt(r,t,e),i=e.__edgeMap,o=i[_o(n)];i[n]&&!o?i[n].isForward=!0:o&&i[n]&&(o.isForward=!0,i[n].isForward=!1),i[n]=i[n]||[],i[n].push(a)}}function Tr(r,t,e,a){var n=xa(t),i=Y(n);if(!n)return null;var o=Ev(r,t);if(!o)return null;for(var l=-1,s=0;s<o.length;s++)if(o[s]===e){l=s;break}var u=Mv(r,t);Do(t,u),r.lineStyle=r.lineStyle||{};var v=kt(r.node1,r.node2,t),h=t.__curvenessList,c=i||u%2?0:1;if(o.isForward)return h[c+l];var f=_o(v),g=cr(f,t),p=h[l+g+c];return a?i?n&&n[0]===0?(g+c)%2?p:-p:((g%2?0:1)+c)%2?p:-p:(g+c)%2?p:-p:h[l+g+c]}function xo(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var e=r.getGraph();e.eachNode(function(a){var n=a.getModel();a.setLayout([+n.get("x"),+n.get("y")])}),Cr(e,r)}}function Cr(r,t){r.eachEdge(function(e,a){var n=pt(e.getModel().get(["lineStyle","curveness"]),-Tr(e,t,a,!0),0),i=Ke(e.node1.getLayout()),o=Ke(e.node2.getLayout()),l=[i,o];+n&&l.push([(i[0]+o[0])/2-(i[1]-o[1])*n,(i[1]+o[1])/2-(o[0]-i[0])*n]),e.setLayout(l)})}function kv(r,t){r.eachSeriesByType("graph",function(e){var a=e.get("layout"),n=e.coordinateSystem;if(n&&n.type!=="view"){var i=e.getData(),o=[];k(n.dimensions,function(c){o=o.concat(i.mapDimensionsAll(c))});for(var l=0;l<i.count();l++){for(var s=[],u=!1,v=0;v<o.length;v++){var h=i.get(o[v],l);isNaN(h)||(u=!0),s.push(h)}u?i.setItemLayout(l,n.dataToPoint(s)):i.setItemLayout(l,[NaN,NaN])}Cr(i.graph,e)}else(!a||a==="none")&&xo(e)})}function Lt(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,a=t.scaleX,n=t.getZoom(),i=(n-1)*e+1;return i/a}function Tt(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Bn=Math.PI,Ga=[];function Pr(r,t,e,a){var n=r.coordinateSystem;if(!(n&&n.type!=="view")){var i=n.getBoundingRect(),o=r.getData(),l=o.graph,s=i.width/2+i.x,u=i.height/2+i.y,v=Math.min(i.width,i.height)/2,h=o.count();if(o.setLayout({cx:s,cy:u}),!!h){if(e){var c=n.pointToData(a),f=c[0],g=c[1],p=[f-s,g-u];yr(p,p),ol(p,p,v),e.setLayout([s+p[0],u+p[1]],!0);var d=r.get(["circular","rotateLabel"]);Io(e,d,s,u)}zv[t](r,l,o,v,s,u,h),l.eachEdge(function(S,y){var m=pt(S.getModel().get(["lineStyle","curveness"]),Tr(S,r,y),0),b=Ke(S.node1.getLayout()),w=Ke(S.node2.getLayout()),D,_=(b[0]+w[0])/2,x=(b[1]+w[1])/2;+m&&(m*=3,D=[s*m+_*(1-m),u*m+x*(1-m)]),S.setLayout([b,w,D])})}}}var zv={value:function(r,t,e,a,n,i,o){var l=0,s=e.getSum("value"),u=Math.PI*2/(s||o);t.eachNode(function(v){var h=v.getValue("value"),c=u*(s?h:1)/2;l+=c,v.setLayout([a*Math.cos(l)+n,a*Math.sin(l)+i]),l+=c})},symbolSize:function(r,t,e,a,n,i,o){var l=0;Ga.length=o;var s=Lt(r);t.eachNode(function(h){var c=Tt(h);isNaN(c)&&(c=2),c<0&&(c=0),c*=s;var f=Math.asin(c/2/a);isNaN(f)&&(f=Bn/2),Ga[h.dataIndex]=f,l+=f*2});var u=(2*Bn-l)/o/2,v=0;t.eachNode(function(h){var c=u+Ga[h.dataIndex];v+=c,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([a*Math.cos(v)+n,a*Math.sin(v)+i]),v+=c})}};function Io(r,t,e,a){var n=r.getGraphicEl();if(n){var i=r.getModel(),o=i.get(["label","rotate"])||0,l=n.getSymbolPath();if(t){var s=r.getLayout(),u=Math.atan2(s[1]-a,s[0]-e);u<0&&(u=Math.PI*2+u);var v=s[0]<e;v&&(u=u-Math.PI);var h=v?"left":"right";l.setTextConfig({rotation:-u,position:h,origin:"center"});var c=l.ensureState("emphasis");Z(c.textConfig||(c.textConfig={}),{position:h})}else l.setTextConfig({rotation:o*=Math.PI/180})}}function Bv(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&Pr(t,"symbolSize")})}var vt=nr;function Gv(r,t,e){for(var a=r,n=t,i=e.rect,o=i.width,l=i.height,s=[i.x+o/2,i.y+l/2],u=e.gravity==null?.1:e.gravity,v=0;v<a.length;v++){var h=a[v];h.p||(h.p=ll(o*(Math.random()-.5)+s[0],l*(Math.random()-.5)+s[1])),h.pp=Ke(h.p),h.edges=null}var c=e.friction==null?.6:e.friction,f=c,g,p;return{warmUp:function(){f=c*.8},setFixed:function(d){a[d].fixed=!0},setUnfixed:function(d){a[d].fixed=!1},beforeStep:function(d){g=d},afterStep:function(d){p=d},step:function(d){g&&g(a,n);for(var S=[],y=a.length,m=0;m<n.length;m++){var b=n[m];if(!b.ignoreForceLayout){var w=b.n1,D=b.n2;xt(S,D.p,w.p);var _=Ur(S)-b.d,x=D.w/(w.w+D.w);isNaN(x)&&(x=0),yr(S,S),!w.fixed&&vt(w.p,w.p,S,x*_*f),!D.fixed&&vt(D.p,D.p,S,-(1-x)*_*f)}}for(var m=0;m<y;m++){var C=a[m];C.fixed||(xt(S,s,C.p),vt(C.p,C.p,S,u*f))}for(var m=0;m<y;m++)for(var w=a[m],A=m+1;A<y;A++){var D=a[A];xt(S,D.p,w.p);var _=Ur(S);_===0&&(sl(S,Math.random()-.5,Math.random()-.5),_=1);var I=(w.rep+D.rep)/_/_;!w.fixed&&vt(w.pp,w.pp,S,I),!D.fixed&&vt(D.pp,D.pp,S,-I)}for(var L=[],m=0;m<y;m++){var C=a[m];C.fixed||(xt(L,C.p,C.pp),vt(C.p,C.p,L,f),Se(C.pp,C.p))}f=f*.992;var N=f<.01;p&&p(a,n,N),d&&d(N)}}}function Ov(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var a=t.preservedPoints||{},n=t.getGraph(),i=n.data,o=n.edgeData,l=t.getModel("force"),s=l.get("initLayout");t.preservedPoints?i.each(function(m){var b=i.getId(m);i.setItemLayout(m,a[b]||[NaN,NaN])}):!s||s==="none"?xo(t):s==="circular"&&Pr(t,"value");var u=i.getDataExtent("value"),v=o.getDataExtent("value"),h=l.get("repulsion"),c=l.get("edgeLength"),f=Y(h)?h:[h,h],g=Y(c)?c:[c,c];g=[g[1],g[0]];var p=i.mapArray("value",function(m,b){var w=i.getItemLayout(b),D=xe(m,u,f);return isNaN(D)&&(D=(f[0]+f[1])/2),{w:D,rep:D,fixed:i.getItemModel(b).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),d=o.mapArray("value",function(m,b){var w=n.getEdgeByIndex(b),D=xe(m,v,g);isNaN(D)&&(D=(g[0]+g[1])/2);var _=w.getModel(),x=pt(w.getModel().get(["lineStyle","curveness"]),-Tr(w,t,b,!0),0);return{n1:p[w.node1.dataIndex],n2:p[w.node2.dataIndex],d:D,curveness:x,ignoreForceLayout:_.get("ignoreForceLayout")}}),S=e.getBoundingRect(),y=Gv(p,d,{rect:S,gravity:l.get("gravity"),friction:l.get("friction")});y.beforeStep(function(m,b){for(var w=0,D=m.length;w<D;w++)m[w].fixed&&Se(m[w].p,n.getNodeByIndex(w).getLayout())}),y.afterStep(function(m,b,w){for(var D=0,_=m.length;D<_;D++)m[D].fixed||n.getNodeByIndex(D).setLayout(m[D].p),a[i.getId(D)]=m[D].p;for(var D=0,_=b.length;D<_;D++){var x=b[D],C=n.getEdgeByIndex(D),A=x.n1.p,I=x.n2.p,L=C.getLayout();L=L?L.slice():[],L[0]=L[0]||[],L[1]=L[1]||[],Se(L[0],A),Se(L[1],I),+x.curveness&&(L[2]=[(A[0]+I[0])/2-(A[1]-I[1])*x.curveness,(A[1]+I[1])/2-(I[0]-A[0])*x.curveness]),C.setLayout(L)}}),t.forceLayout=y,t.preservedPoints=a,y.step()}else t.forceLayout=null})}function Fv(r,t,e){var a=Z(r.getBoxLayoutParams(),{aspect:e});return mt(a,{width:t.getWidth(),height:t.getHeight()})}function Hv(r,t){var e=[];return r.eachSeriesByType("graph",function(a){var n=a.get("coordinateSystem");if(!n||n==="view"){var i=a.getData(),o=i.mapArray(function(d){var S=i.getItemModel(d);return[+S.get("x"),+S.get("y")]}),l=[],s=[];di(o,l,s),s[0]-l[0]===0&&(s[0]+=1,l[0]-=1),s[1]-l[1]===0&&(s[1]+=1,l[1]-=1);var u=(s[0]-l[0])/(s[1]-l[1]),v=Fv(a,t,u);isNaN(u)&&(l=[v.x,v.y],s=[v.x+v.width,v.y+v.height]);var h=s[0]-l[0],c=s[1]-l[1],f=v.width,g=v.height,p=a.coordinateSystem=new Dr;p.zoomLimit=a.get("scaleLimit"),p.setBoundingRect(l[0],l[1],h,c),p.setViewRect(v.x,v.y,f,g),p.setCenter(a.get("center"),t),p.setZoom(a.get("zoom")),e.push(p)}}),e}var Oa=[],Fa=[],Ha=[],ht=Si,$a=vl,Gn=Math.abs;function On(r,t,e){for(var a=r[0],n=r[1],i=r[2],o=1/0,l,s=e*e,u=.1,v=.1;v<=.9;v+=.1){Oa[0]=ht(a[0],n[0],i[0],v),Oa[1]=ht(a[1],n[1],i[1],v);var h=Gn($a(Oa,t)-s);h<o&&(o=h,l=v)}for(var c=0;c<32;c++){var f=l+u;Fa[0]=ht(a[0],n[0],i[0],l),Fa[1]=ht(a[1],n[1],i[1],l),Ha[0]=ht(a[0],n[0],i[0],f),Ha[1]=ht(a[1],n[1],i[1],f);var h=$a(Fa,t)-s;if(Gn(h)<.01)break;var g=$a(Ha,t)-s;u/=2,h<0?g>=0?l=l+u:l=l-u:g>=0?l=l-u:l=l+u}return l}function Wa(r,t){var e=[],a=ul,n=[[],[],[]],i=[[],[]],o=[];t/=2,r.eachEdge(function(l,s){var u=l.getLayout(),v=l.getVisual("fromSymbol"),h=l.getVisual("toSymbol");u.__original||(u.__original=[Ke(u[0]),Ke(u[1])],u[2]&&u.__original.push(Ke(u[2])));var c=u.__original;if(u[2]!=null){if(Se(n[0],c[0]),Se(n[1],c[2]),Se(n[2],c[1]),v&&v!=="none"){var f=Tt(l.node1),g=On(n,c[0],f*t);a(n[0][0],n[1][0],n[2][0],g,e),n[0][0]=e[3],n[1][0]=e[4],a(n[0][1],n[1][1],n[2][1],g,e),n[0][1]=e[3],n[1][1]=e[4]}if(h&&h!=="none"){var f=Tt(l.node2),g=On(n,c[1],f*t);a(n[0][0],n[1][0],n[2][0],g,e),n[1][0]=e[1],n[2][0]=e[2],a(n[0][1],n[1][1],n[2][1],g,e),n[1][1]=e[1],n[2][1]=e[2]}Se(u[0],n[0]),Se(u[1],n[2]),Se(u[2],n[1])}else{if(Se(i[0],c[0]),Se(i[1],c[1]),xt(o,i[1],i[0]),yr(o,o),v&&v!=="none"){var f=Tt(l.node1);nr(i[0],i[0],o,f*t)}if(h&&h!=="none"){var f=Tt(l.node2);nr(i[1],i[1],o,-f*t)}Se(u[0],i[0]),Se(u[1],i[1])}})}function Fn(r){return r.type==="view"}var $v=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){var n=new ba,i=new Hi,o=this.group;this._controller=new wr(a.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(e,a,n){var i=this,o=e.coordinateSystem;this._model=e;var l=this._symbolDraw,s=this._lineDraw,u=this.group;if(Fn(o)){var v={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(v):K(u,v,e)}Wa(e.getGraph(),Lt(e));var h=e.getData();l.updateData(h);var c=e.getEdgeData();s.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,a,n),clearTimeout(this._layoutTimeout);var f=e.forceLayout,g=e.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,g);var p=e.get("layout");h.graph.eachNode(function(m){var b=m.dataIndex,w=m.getGraphicEl(),D=m.getModel();if(w){w.off("drag").off("dragend");var _=D.get("draggable");_&&w.on("drag",function(C){switch(p){case"force":f.warmUp(),!i._layouting&&i._startForceLayoutIteration(f,g),f.setFixed(b),h.setItemLayout(b,[w.x,w.y]);break;case"circular":h.setItemLayout(b,[w.x,w.y]),m.setLayout({fixed:!0},!0),Pr(e,"symbolSize",m,[C.offsetX,C.offsetY]),i.updateLayout(e);break;case"none":default:h.setItemLayout(b,[w.x,w.y]),Cr(e.getGraph(),e),i.updateLayout(e);break}}).on("dragend",function(){f&&f.setUnfixed(b)}),w.setDraggable(_,!!D.get("cursor"));var x=D.get(["emphasis","focus"]);x==="adjacency"&&(ue(w).focus=m.getAdjacentDataIndices())}}),h.graph.eachEdge(function(m){var b=m.getGraphicEl(),w=m.getModel().get(["emphasis","focus"]);b&&w==="adjacency"&&(ue(b).focus={edge:[m.dataIndex],node:[m.node1.dataIndex,m.node2.dataIndex]})});var d=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),S=h.getLayout("cx"),y=h.getLayout("cy");h.graph.eachNode(function(m){Io(m,d,S,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,a){var n=this;(function i(){e.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(a?n._layoutTimeout=setTimeout(i,16):i())})})()},t.prototype._updateController=function(e,a,n){var i=this,o=this._controller,l=this._controllerHost,s=this.group;if(o.setPointerChecker(function(u,v,h){var c=s.getBoundingRect();return c.applyTransform(s.transform),c.contain(v,h)&&!zi(u,n,e)}),!Fn(e.coordinateSystem)){o.disable();return}o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Bi(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Gi(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(),Wa(e.getGraph(),Lt(e)),i._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,a=e.getData(),n=Lt(e);a.eachItemGraphicEl(function(i,o){i&&i.setSymbolScale(n)})},t.prototype.updateLayout=function(e){Wa(e.getGraph(),Lt(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(ee);const Wv=$v;function ct(r){return"_EC_"+r}var Uv=function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var a=this._nodesMap;if(!a[ct(t)]){var n=new at(t,e);return n.hostGraph=this,this.nodes.push(n),a[ct(t)]=n,n}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[ct(t)]},r.prototype.addEdge=function(t,e,a){var n=this._nodesMap,i=this._edgesMap;if(Ae(t)&&(t=this.nodes[t]),Ae(e)&&(e=this.nodes[e]),t instanceof at||(t=n[ct(t)]),e instanceof at||(e=n[ct(e)]),!(!t||!e)){var o=t.id+"-"+e.id,l=new Ao(t,e,a);return l.hostGraph=this,this._directed&&(t.outEdges.push(l),e.inEdges.push(l)),t.edges.push(l),t!==e&&e.edges.push(l),this.edges.push(l),i[o]=l,l}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof at&&(t=t.id),e instanceof at&&(e=e.id);var a=this._edgesMap;return this._directed?a[t+"-"+e]:a[t+"-"+e]||a[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var a=this.nodes,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&t.call(e,a[i],i)},r.prototype.eachEdge=function(t,e){for(var a=this.edges,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&a[i].node1.dataIndex>=0&&a[i].node2.dataIndex>=0&&t.call(e,a[i],i)},r.prototype.breadthFirstTraverse=function(t,e,a,n){if(e instanceof at||(e=this._nodesMap[ct(e)]),!!e){for(var i=a==="out"?"outEdges":a==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,e,null))for(var l=[e];l.length;)for(var s=l.shift(),u=s[i],o=0;o<u.length;o++){var v=u[o],h=v.node1===s?v.node2:v.node1;if(!h.__visited){if(t.call(n,h,s))return;l.push(h),h.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,a=this.nodes,n=this.edges,i=0,o=a.length;i<o;i++)a[i].dataIndex=-1;for(var i=0,o=t.count();i<o;i++)a[t.getRawIndex(i)].dataIndex=i;e.filterSelf(function(l){var s=n[e.getRawIndex(l)];return s.node1.dataIndex>=0&&s.node2.dataIndex>=0});for(var i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(var i=0,o=e.count();i<o;i++)n[e.getRawIndex(i)].dataIndex=i},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,a=this.edges,n=0;n<e.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(var n=0;n<a.length;n++){var i=a[n];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},r}(),at=function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var a=this.edges[e];a.dataIndex<0||(t.edge.push(a.dataIndex),t.node.push(a.node1.dataIndex,a.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=lt(),e=lt(),a=0;a<this.edges.length;a++){var n=this.edges[a];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var i=[n.node1],o=[n.node2],l=0;l<i.length;){var s=i[l];l++,e.set(s.dataIndex,!0);for(var u=0;u<s.inEdges.length;u++)t.set(s.inEdges[u].dataIndex,!0),i.push(s.inEdges[u].node1)}for(l=0;l<o.length;){var v=o[l];l++,e.set(v.dataIndex,!0);for(var u=0;u<v.outEdges.length;u++)t.set(v.outEdges[u].dataIndex,!0),o.push(v.outEdges[u].node2)}}}return{edge:t.keys(),node:e.keys()}},r}(),Ao=function(){function r(t,e,a){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=a??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=lt(),e=lt();t.set(this.dataIndex,!0);for(var a=[this.node1],n=[this.node2],i=0;i<a.length;){var o=a[i];i++,e.set(o.dataIndex,!0);for(var l=0;l<o.inEdges.length;l++)t.set(o.inEdges[l].dataIndex,!0),a.push(o.inEdges[l].node1)}for(i=0;i<n.length;){var s=n[i];i++,e.set(s.dataIndex,!0);for(var l=0;l<s.outEdges.length;l++)t.set(s.outEdges[l].dataIndex,!0),n.push(s.outEdges[l].node2)}return{edge:t.keys(),node:e.keys()}},r}();function Lo(r,t){return{getValue:function(e){var a=this[r][t];return a.getStore().get(a.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,a){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,a)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,a){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,a)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}ca(at,Lo("hostGraph","data"));ca(Ao,Lo("hostGraph","edgeData"));const Zv=Uv;function To(r,t,e,a,n){for(var i=new Zv(a),o=0;o<r.length;o++)i.addNode(Nt(r[o].id,r[o].name,o),o);for(var l=[],s=[],u=0,o=0;o<t.length;o++){var v=t[o],h=v.source,c=v.target;i.addEdge(h,c,u)&&(s.push(v),l.push(Nt(ma(v.id,null),h+" > "+c)),u++)}var f=e.get("coordinateSystem"),g;if(f==="cartesian2d"||f==="polar")g=He(r,e);else{var p=Pi.get(f),d=p?p.dimensions||[]:[];dt(d,"value")<0&&d.concat(["value"]);var S=fa(r,{coordDimensions:d,encodeDefine:e.getEncode()}).dimensions;g=new st(S,e),g.initData(r)}var y=new st(["value"],e);return y.initData(s,l),n&&n(g,y),vo({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var Xv=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var a=this;function n(){return a._categoriesData}this.legendVisualProvider=new Ht(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),Sr(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],i=e.data||e.nodes||[],o=this;if(i&&n){Rv(this);var l=To(i,n,this,!0,s);return k(l.edges,function(u){Vv(u.node1,u.node2,this,u.dataIndex)},this),l.data}function s(u,v){u.wrapMethod("getItemModel",function(g){var p=o._categoriesModels,d=g.getShallow("category"),S=p[d];return S&&(S.parentModel=g.parentModel,g.parentModel=S),g});var h=ut.prototype.getModel;function c(g,p){var d=h.call(this,g,p);return d.resolveParentPath=f,d}v.wrapMethod("getItemModel",function(g){return g.resolveParentPath=f,g.getModel=c,g});function f(g){if(g&&(g[0]==="label"||g[1]==="label")){var p=g.slice();return g[0]==="label"?p[0]="edgeLabel":g[1]==="label"&&(p[1]="edgeLabel"),p}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,a,n){if(n==="edge"){var i=this.getData(),o=this.getDataParams(e,n),l=i.graph.getEdgeByIndex(e),s=i.getName(l.node1.dataIndex),u=i.getName(l.node2.dataIndex),v=[];return s!=null&&v.push(s),u!=null&&v.push(u),Pe("nameValue",{name:v.join(" > "),value:o.value,noValue:o.value==null})}var h=Tl({series:this,dataIndex:e,multipleSeries:a});return h},t.prototype._updateCategoriesData=function(){var e=J(this.option.categories||[],function(n){return n.value!=null?n:Z({value:0},n)}),a=new st(["value"],this);a.initData(e),this._categoriesData=a,this._categoriesModels=a.mapArray(function(n){return a.getItemModel(n)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(ne);const Yv=Xv;var qv={type:"graphRoam",event:"graphRoam",update:"none"};function Ig(r){r.registerChartView(Wv),r.registerSeriesModel(Yv),r.registerProcessor(Cv),r.registerVisual(Pv),r.registerVisual(Nv),r.registerLayout(kv),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,Bv),r.registerLayout(Ov),r.registerCoordinateSystem("graphView",{dimensions:Dr.dimensions,create:Hv}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},rr),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},rr),r.registerAction(qv,function(t,e,a){e.eachComponent({mainType:"series",query:t},function(n){var i=n.coordinateSystem,o=Oi(i,t,void 0,a);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var Kv=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),jv=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="pointer",a}return t.prototype.getDefaultShape=function(){return new Kv},t.prototype.buildPath=function(e,a){var n=Math.cos,i=Math.sin,o=a.r,l=a.width,s=a.angle,u=a.x-n(s)*l*(l>=o/3?1:2),v=a.y-i(s)*l*(l>=o/3?1:2);s=a.angle-Math.PI/2,e.moveTo(u,v),e.lineTo(a.x+n(s)*l,a.y+i(s)*l),e.lineTo(a.x+n(a.angle)*o,a.y+i(a.angle)*o),e.lineTo(a.x-n(s)*l,a.y-i(s)*l),e.lineTo(u,v)},t}(De);const Jv=jv;function Qv(r,t){var e=r.get("center"),a=t.getWidth(),n=t.getHeight(),i=Math.min(a,n),o=O(e[0],t.getWidth()),l=O(e[1],t.getHeight()),s=O(r.get("radius"),i/2);return{cx:o,cy:l,r:s}}function jt(r,t){var e=r==null?"":r+"";return t&&(Re(t)?e=t.replace("{value}",e):be(t)&&(e=t(r))),e}var eh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeAll();var i=e.get(["axisLine","lineStyle","color"]),o=Qv(e,n);this._renderMain(e,a,n,i,o),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,a,n,i,o){var l=this.group,s=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,v=-e.get("endAngle")/180*Math.PI,h=e.getModel("axisLine"),c=h.get("roundCap"),f=c?la:Je,g=h.get("show"),p=h.getModel("lineStyle"),d=p.get("width"),S=[u,v];pi(S,!s),u=S[0],v=S[1];for(var y=v-u,m=u,b=[],w=0;g&&w<i.length;w++){var D=Math.min(Math.max(i[w][0],0),1);v=u+y*D;var _=new f({shape:{startAngle:m,endAngle:v,cx:o.cx,cy:o.cy,clockwise:s,r0:o.r-d,r:o.r},silent:!0});_.setStyle({fill:i[w][1]}),_.setStyle(p.getLineStyle(["color","width"])),b.push(_),m=v}b.reverse(),k(b,function(C){return l.add(C)});var x=function(C){if(C<=0)return i[0][1];var A;for(A=0;A<i.length;A++)if(i[A][0]>=C&&(A===0?0:i[A-1][0])<C)return i[A][1];return i[A-1][1]};this._renderTicks(e,a,n,x,o,u,v,s,d),this._renderTitleAndDetail(e,a,n,x,o),this._renderAnchor(e,o),this._renderPointer(e,a,n,x,o,u,v,s,d)},t.prototype._renderTicks=function(e,a,n,i,o,l,s,u,v){for(var h=this.group,c=o.cx,f=o.cy,g=o.r,p=+e.get("min"),d=+e.get("max"),S=e.getModel("splitLine"),y=e.getModel("axisTick"),m=e.getModel("axisLabel"),b=e.get("splitNumber"),w=y.get("splitNumber"),D=O(S.get("length"),g),_=O(y.get("length"),g),x=l,C=(s-l)/b,A=C/w,I=S.getModel("lineStyle").getLineStyle(),L=y.getModel("lineStyle").getLineStyle(),N=S.get("distance"),P,T,E=0;E<=b;E++){if(P=Math.cos(x),T=Math.sin(x),S.get("show")){var R=N?N+v:v,M=new en({shape:{x1:P*(g-R)+c,y1:T*(g-R)+f,x2:P*(g-D-R)+c,y2:T*(g-D-R)+f},style:I,silent:!0});I.stroke==="auto"&&M.setStyle({stroke:i(E/b)}),h.add(M)}if(m.get("show")){var R=m.get("distance")+N,V=jt(It(E/b*(d-p)+p),m.get("formatter")),B=i(E/b),z=P*(g-D-R)+c,F=T*(g-D-R)+f,$=m.get("rotate"),H=0;$==="radial"?(H=-x+2*Math.PI,H>Math.PI/2&&(H+=Math.PI)):$==="tangential"?H=-x-Math.PI/2:Ae($)&&(H=$*Math.PI/180),H===0?h.add(new Ee({style:Be(m,{text:V,x:z,y:F,verticalAlign:T<-.8?"top":T>.8?"bottom":"middle",align:P<-.4?"left":P>.4?"right":"center"},{inheritColor:B}),silent:!0})):h.add(new Ee({style:Be(m,{text:V,x:z,y:F,verticalAlign:"middle",align:"center"},{inheritColor:B}),silent:!0,originX:z,originY:F,rotation:H}))}if(y.get("show")&&E!==b){var R=y.get("distance");R=R?R+v:v;for(var U=0;U<=w;U++){P=Math.cos(x),T=Math.sin(x);var oe=new en({shape:{x1:P*(g-R)+c,y1:T*(g-R)+f,x2:P*(g-_-R)+c,y2:T*(g-_-R)+f},silent:!0,style:L});L.stroke==="auto"&&oe.setStyle({stroke:i((E+U/w)/b)}),h.add(oe),x+=A}x-=A}else x+=C}},t.prototype._renderPointer=function(e,a,n,i,o,l,s,u,v){var h=this.group,c=this._data,f=this._progressEls,g=[],p=e.get(["pointer","show"]),d=e.getModel("progress"),S=d.get("show"),y=e.getData(),m=y.mapDimension("value"),b=+e.get("min"),w=+e.get("max"),D=[b,w],_=[l,s];function x(A,I){var L=y.getItemModel(A),N=L.getModel("pointer"),P=O(N.get("width"),o.r),T=O(N.get("length"),o.r),E=e.get(["pointer","icon"]),R=N.get("offsetCenter"),M=O(R[0],o.r),V=O(R[1],o.r),B=N.get("keepAspect"),z;return E?z=Ve(E,M-P/2,V-T,P,T,null,B):z=new Jv({shape:{angle:-Math.PI/2,width:P,r:T,x:M,y:V}}),z.rotation=-(I+Math.PI/2),z.x=o.cx,z.y=o.cy,z}function C(A,I){var L=d.get("roundCap"),N=L?la:Je,P=d.get("overlap"),T=P?d.get("width"):v/y.count(),E=P?o.r-T:o.r-(A+1)*T,R=P?o.r:o.r-A*T,M=new N({shape:{startAngle:l,endAngle:I,cx:o.cx,cy:o.cy,clockwise:u,r0:E,r:R}});return P&&(M.z2=xe(y.get(m,A),[b,w],[100,0],!0)),M}(S||p)&&(y.diff(c).add(function(A){var I=y.get(m,A);if(p){var L=x(A,l);se(L,{rotation:-((isNaN(+I)?_[0]:xe(I,D,_,!0))+Math.PI/2)},e),h.add(L),y.setItemGraphicEl(A,L)}if(S){var N=C(A,l),P=d.get("clip");se(N,{shape:{endAngle:xe(I,D,_,P)}},e),h.add(N),tn(e.seriesIndex,y.dataType,A,N),g[A]=N}}).update(function(A,I){var L=y.get(m,A);if(p){var N=c.getItemGraphicEl(I),P=N?N.rotation:l,T=x(A,P);T.rotation=P,K(T,{rotation:-((isNaN(+L)?_[0]:xe(L,D,_,!0))+Math.PI/2)},e),h.add(T),y.setItemGraphicEl(A,T)}if(S){var E=f[I],R=E?E.shape.endAngle:l,M=C(A,R),V=d.get("clip");K(M,{shape:{endAngle:xe(L,D,_,V)}},e),h.add(M),tn(e.seriesIndex,y.dataType,A,M),g[A]=M}}).execute(),y.each(function(A){var I=y.getItemModel(A),L=I.getModel("emphasis"),N=L.get("focus"),P=L.get("blurScope"),T=L.get("disabled");if(p){var E=y.getItemGraphicEl(A),R=y.getItemVisual(A,"style"),M=R.fill;if(E instanceof zt){var V=E.style;E.useStyle(Z({image:V.image,x:V.x,y:V.y,width:V.width,height:V.height},R))}else E.useStyle(R),E.type!=="pointer"&&E.setColor(M);E.setStyle(I.getModel(["pointer","itemStyle"]).getItemStyle()),E.style.fill==="auto"&&E.setStyle("fill",i(xe(y.get(m,A),D,[0,1],!0))),E.z2EmphasisLift=0,ge(E,I),ie(E,N,P,T)}if(S){var B=g[A];B.useStyle(y.getItemVisual(A,"style")),B.setStyle(I.getModel(["progress","itemStyle"]).getItemStyle()),B.z2EmphasisLift=0,ge(B,I),ie(B,N,P,T)}}),this._progressEls=g)},t.prototype._renderAnchor=function(e,a){var n=e.getModel("anchor"),i=n.get("show");if(i){var o=n.get("size"),l=n.get("icon"),s=n.get("offsetCenter"),u=n.get("keepAspect"),v=Ve(l,a.cx-o/2+O(s[0],a.r),a.cy-o/2+O(s[1],a.r),o,o,null,u);v.z2=n.get("showAbove")?1:0,v.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(v)}},t.prototype._renderTitleAndDetail=function(e,a,n,i,o){var l=this,s=e.getData(),u=s.mapDimension("value"),v=+e.get("min"),h=+e.get("max"),c=new ae,f=[],g=[],p=e.isAnimationEnabled(),d=e.get(["pointer","showAbove"]);s.diff(this._data).add(function(S){f[S]=new Ee({silent:!0}),g[S]=new Ee({silent:!0})}).update(function(S,y){f[S]=l._titleEls[y],g[S]=l._detailEls[y]}).execute(),s.each(function(S){var y=s.getItemModel(S),m=s.get(u,S),b=new ae,w=i(xe(m,[v,h],[0,1],!0)),D=y.getModel("title");if(D.get("show")){var _=D.get("offsetCenter"),x=o.cx+O(_[0],o.r),C=o.cy+O(_[1],o.r),A=f[S];A.attr({z2:d?0:2,style:Be(D,{x,y:C,text:s.getName(S),align:"center",verticalAlign:"middle"},{inheritColor:w})}),b.add(A)}var I=y.getModel("detail");if(I.get("show")){var L=I.get("offsetCenter"),N=o.cx+O(L[0],o.r),P=o.cy+O(L[1],o.r),T=O(I.get("width"),o.r),E=O(I.get("height"),o.r),R=e.get(["progress","show"])?s.getItemVisual(S,"style").fill:w,A=g[S],M=I.get("formatter");A.attr({z2:d?0:2,style:Be(I,{x:N,y:P,text:jt(m,M),width:isNaN(T)?null:T,height:isNaN(E)?null:E,align:"center",verticalAlign:"middle"},{inheritColor:R})}),_i(A,{normal:I},m,function(B){return jt(B,M)}),p&&Cl(A,S,s,e,{getFormattedLabel:function(B,z,F,$,H,U){return jt(U?U.interpolatedValue:m,M)}}),b.add(A)}c.add(b)}),this.group.add(c),this._titleEls=f,this._detailEls=g},t.type="gauge",t}(ee);const th=eh;var ah=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return t.prototype.getInitialData=function(e,a){return bt(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(ne);const rh=ah;function Ag(r){r.registerChartView(th),r.registerSeriesModel(rh)}var nh=["itemStyle","opacity"],ih=function(r){G(t,r);function t(e,a){var n=r.call(this)||this,i=n,o=new yt,l=new Ee;return i.setTextContent(l),n.setTextGuideLine(o),n.updateData(e,a,!0),n}return t.prototype.updateData=function(e,a,n){var i=this,o=e.hostModel,l=e.getItemModel(a),s=e.getItemLayout(a),u=l.getModel("emphasis"),v=l.get(nh);v=v??1,n||ke(i),i.useStyle(e.getItemVisual(a,"style")),i.style.lineJoin="round",n?(i.setShape({points:s.points}),i.style.opacity=0,se(i,{style:{opacity:v}},o,a)):K(i,{style:{opacity:v},shape:{points:s.points}},o,a),ge(i,l),this._updateLabel(e,a),ie(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a){var n=this,i=this.getTextGuideLine(),o=n.getTextContent(),l=e.hostModel,s=e.getItemModel(a),u=e.getItemLayout(a),v=u.label,h=e.getItemVisual(a,"style"),c=h.fill;Te(o,we(s),{labelFetcher:e.hostModel,labelDataIndex:a,defaultOpacity:h.opacity,defaultText:e.getName(a)},{normal:{align:v.textAlign,verticalAlign:v.verticalAlign}}),n.setTextConfig({local:!0,inside:!!v.inside,insideStroke:c,outsideFill:c});var f=v.linePoints;i.setShape({points:f}),n.textGuideLineConfig={anchor:f?new he(f[0][0],f[0][1]):null},K(o,{style:{x:v.x,y:v.y}},l,a),o.attr({rotation:v.rotation,originX:v.x,originY:v.y,z2:10}),Ui(n,Zi(s),{stroke:c})},t}(br),oh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._data,l=this.group;i.diff(o).add(function(s){var u=new ih(i,s);i.setItemGraphicEl(s,u),l.add(u)}).update(function(s,u){var v=o.getItemGraphicEl(u);v.updateData(i,s),l.add(v),i.setItemGraphicEl(s,v)}).remove(function(s){var u=o.getItemGraphicEl(s);aa(u,e,s)}).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ee);const lh=oh;var sh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ht(le(this.getData,this),le(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,a){return bt(this,{coordDimensions:["value"],encodeDefaulter:ye(mr,this)})},t.prototype._defaultLabelLine=function(e){Sr(e,"labelLine",["show"]);var a=e.labelLine,n=e.emphasis.labelLine;a.show=a.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var a=this.getData(),n=r.prototype.getDataParams.call(this,e),i=a.mapDimension("value"),o=a.getSum(i);return n.percent=o?+(a.get(i,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(ne);const uh=sh;function vh(r,t){return mt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function hh(r,t){for(var e=r.mapDimension("value"),a=r.mapArray(e,function(s){return s}),n=[],i=t==="ascending",o=0,l=r.count();o<l;o++)n[o]=o;return be(t)?n.sort(t):t!=="none"&&n.sort(function(s,u){return i?a[s]-a[u]:a[u]-a[s]}),n}function ch(r){var t=r.hostModel,e=t.get("orient");r.each(function(a){var n=r.getItemModel(a),i=n.getModel("label"),o=i.get("position"),l=n.getModel("labelLine"),s=r.getItemLayout(a),u=s.points,v=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,c,f,g;if(v)o==="insideLeft"?(c=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,h="left"):o==="insideRight"?(c=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,h="right"):(c=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),g=[[c,f],[c,f]];else{var p=void 0,d=void 0,S=void 0,y=void 0,m=l.get("length");o==="left"?(p=(u[3][0]+u[0][0])/2,d=(u[3][1]+u[0][1])/2,S=p-m,c=S-5,h="right"):o==="right"?(p=(u[1][0]+u[2][0])/2,d=(u[1][1]+u[2][1])/2,S=p+m,c=S+5,h="left"):o==="top"?(p=(u[3][0]+u[0][0])/2,d=(u[3][1]+u[0][1])/2,y=d-m,f=y-5,h="center"):o==="bottom"?(p=(u[1][0]+u[2][0])/2,d=(u[1][1]+u[2][1])/2,y=d+m,f=y+5,h="center"):o==="rightTop"?(p=e==="horizontal"?u[3][0]:u[1][0],d=e==="horizontal"?u[3][1]:u[1][1],e==="horizontal"?(y=d-m,f=y-5,h="center"):(S=p+m,c=S+5,h="top")):o==="rightBottom"?(p=u[2][0],d=u[2][1],e==="horizontal"?(y=d+m,f=y+5,h="center"):(S=p+m,c=S+5,h="bottom")):o==="leftTop"?(p=u[0][0],d=e==="horizontal"?u[0][1]:u[1][1],e==="horizontal"?(y=d-m,f=y-5,h="center"):(S=p-m,c=S-5,h="right")):o==="leftBottom"?(p=e==="horizontal"?u[1][0]:u[3][0],d=e==="horizontal"?u[1][1]:u[2][1],e==="horizontal"?(y=d+m,f=y+5,h="center"):(S=p-m,c=S-5,h="right")):(p=(u[1][0]+u[2][0])/2,d=(u[1][1]+u[2][1])/2,e==="horizontal"?(y=d+m,f=y+5,h="center"):(S=p+m,c=S+5,h="left")),e==="horizontal"?(S=p,c=S):(y=d,f=y),g=[[p,d],[S,y]]}s.label={linePoints:g,x:c,y:f,verticalAlign:"middle",textAlign:h,inside:v}})}function fh(r,t){r.eachSeriesByType("funnel",function(e){var a=e.getData(),n=a.mapDimension("value"),i=e.get("sort"),o=vh(e,t),l=e.get("orient"),s=o.width,u=o.height,v=hh(a,i),h=o.x,c=o.y,f=l==="horizontal"?[O(e.get("minSize"),u),O(e.get("maxSize"),u)]:[O(e.get("minSize"),s),O(e.get("maxSize"),s)],g=a.getDataExtent(n),p=e.get("min"),d=e.get("max");p==null&&(p=Math.min(g[0],0)),d==null&&(d=g[1]);var S=e.get("funnelAlign"),y=e.get("gap"),m=l==="horizontal"?s:u,b=(m-y*(a.count()-1))/a.count(),w=function(P,T){if(l==="horizontal"){var E=a.get(n,P)||0,R=xe(E,[p,d],f,!0),M=void 0;switch(S){case"top":M=c;break;case"center":M=c+(u-R)/2;break;case"bottom":M=c+(u-R);break}return[[T,M],[T,M+R]]}var V=a.get(n,P)||0,B=xe(V,[p,d],f,!0),z;switch(S){case"left":z=h;break;case"center":z=h+(s-B)/2;break;case"right":z=h+s-B;break}return[[z,T],[z+B,T]]};i==="ascending"&&(b=-b,y=-y,l==="horizontal"?h+=s:c+=u,v=v.reverse());for(var D=0;D<v.length;D++){var _=v[D],x=v[D+1],C=a.getItemModel(_);if(l==="horizontal"){var A=C.get(["itemStyle","width"]);A==null?A=b:(A=O(A,s),i==="ascending"&&(A=-A));var I=w(_,h),L=w(x,h+A);h+=A+y,a.setItemLayout(_,{points:I.concat(L.slice().reverse())})}else{var N=C.get(["itemStyle","height"]);N==null?N=b:(N=O(N,u),i==="ascending"&&(N=-N));var I=w(_,c),L=w(x,c+N);c+=N+y,a.setItemLayout(_,{points:I.concat(L.slice().reverse())})}}ch(a)})}function Lg(r){r.registerChartView(lh),r.registerSeriesModel(uh),r.registerLayout(fh),r.registerProcessor(Ft("funnel"))}var gh=.3,ph=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new ae,e._initialized=!1,e}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,a,n,i){this._progressiveEls=null;var o=this._dataGroup,l=e.getData(),s=this._data,u=e.coordinateSystem,v=u.dimensions,h=$n(e);l.diff(s).add(c).update(f).remove(g).execute();function c(d){var S=Hn(l,o,d,v,u);Ua(S,l,d,h)}function f(d,S){var y=s.getItemGraphicEl(S),m=Co(l,d,v,u);l.setItemGraphicEl(d,y),K(y,{shape:{points:m}},e,d),ke(y),Ua(y,l,d,h)}function g(d){var S=s.getItemGraphicEl(d);o.remove(S)}if(!this._initialized){this._initialized=!0;var p=dh(u,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(p)}this._data=l},t.prototype.incrementalPrepareRender=function(e,a,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,a,n){for(var i=a.getData(),o=a.coordinateSystem,l=o.dimensions,s=$n(a),u=this._progressiveEls=[],v=e.start;v<e.end;v++){var h=Hn(i,this._dataGroup,v,l,o);h.incremental=!0,Ua(h,i,v,s),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ee);function dh(r,t,e){var a=r.model,n=r.getRect(),i=new Le({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=a.get("layout")==="horizontal"?"width":"height";return i.setShape(o,0),se(i,{shape:{width:n.width,height:n.height}},t,e),i}function Co(r,t,e,a){for(var n=[],i=0;i<e.length;i++){var o=e[i],l=r.get(r.mapDimension(o),t);yh(l,a.getAxis(o).type)||n.push(a.dataToPoint(l,o))}return n}function Hn(r,t,e,a,n){var i=Co(r,e,a,n),o=new yt({shape:{points:i},z2:10});return t.add(o),r.setItemGraphicEl(e,o),o}function $n(r){var t=r.get("smooth",!0);return t===!0&&(t=gh),t=Pl(t),hl(t)&&(t=0),{smooth:t}}function Ua(r,t,e,a){r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.setShape("smooth",a.smooth);var n=t.getItemModel(e),i=n.getModel("emphasis");ge(r,n,"lineStyle"),ie(r,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function yh(r,t){return t==="category"?r==null:r==null||isNaN(r)}const mh=ph;var Sh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.getInitialData=function(e,a){return He(null,this,{useEncodeDefaulter:le(bh,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var a=this.coordinateSystem,n=this.getData(),i=[];return a.eachActiveState(n,function(o,l){e===o&&i.push(n.getRawIndex(l))}),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(ne);function bh(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var e={};return k(t.dimensions,function(a){var n=wh(a);e[a]=n}),e}}function wh(r){return+r.replace("dim","")}const Dh=Sh;var _h=["lineStyle","opacity"],xh={seriesType:"parallel",reset:function(r,t){var e=r.coordinateSystem,a={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(n,i){e.eachActiveState(i,function(o,l){var s=a[o];if(o==="normal"&&i.hasItemOption){var u=i.getItemModel(l).get(_h,!0);u!=null&&(s=u)}var v=i.ensureUniqueItemVisual(l,"style");v.opacity=s},n.start,n.end)}}}};const Ih=xh;function Tg(r){da(Xl),r.registerChartView(mh),r.registerSeriesModel(Dh),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,Ih)}var Ah=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),Lh=function(r){G(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new Ah},t.prototype.buildPath=function(e,a){var n=a.extent;e.moveTo(a.x1,a.y1),e.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),a.orient==="vertical"?(e.lineTo(a.x2+n,a.y2),e.bezierCurveTo(a.cpx2+n,a.cpy2,a.cpx1+n,a.cpy1,a.x1+n,a.y1)):(e.lineTo(a.x2,a.y2+n),e.bezierCurveTo(a.cpx2,a.cpy2+n,a.cpx1,a.cpy1+n,a.x1,a.y1+n)),e.closePath()},t.prototype.highlight=function(){Ni(this)},t.prototype.downplay=function(){Ei(this)},t}(De),Th=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return t.prototype.render=function(e,a,n){var i=this,o=e.getGraph(),l=this.group,s=e.layoutInfo,u=s.width,v=s.height,h=e.getData(),c=e.getData("edge"),f=e.get("orient");this._model=e,l.removeAll(),l.x=s.x,l.y=s.y,o.eachEdge(function(g){var p=new Lh,d=ue(p);d.dataIndex=g.dataIndex,d.seriesIndex=e.seriesIndex,d.dataType="edge";var S=g.getModel(),y=S.getModel("lineStyle"),m=y.get("curveness"),b=g.node1.getLayout(),w=g.node1.getModel(),D=w.get("localX"),_=w.get("localY"),x=g.node2.getLayout(),C=g.node2.getModel(),A=C.get("localX"),I=C.get("localY"),L=g.getLayout(),N,P,T,E,R,M,V,B;p.shape.extent=Math.max(1,L.dy),p.shape.orient=f,f==="vertical"?(N=(D!=null?D*u:b.x)+L.sy,P=(_!=null?_*v:b.y)+b.dy,T=(A!=null?A*u:x.x)+L.ty,E=I!=null?I*v:x.y,R=N,M=P*(1-m)+E*m,V=T,B=P*m+E*(1-m)):(N=(D!=null?D*u:b.x)+b.dx,P=(_!=null?_*v:b.y)+L.sy,T=A!=null?A*u:x.x,E=(I!=null?I*v:x.y)+L.ty,R=N*(1-m)+T*m,M=P,V=N*m+T*(1-m),B=E),p.setShape({x1:N,y1:P,x2:T,y2:E,cpx1:R,cpy1:M,cpx2:V,cpy2:B}),p.useStyle(y.getItemStyle()),Wn(p.style,f,g);var z=""+S.get("value"),F=we(S,"edgeLabel");Te(p,F,{labelFetcher:{getFormattedLabel:function(U,oe,Ce,X,W,j){return e.getFormattedLabel(U,oe,"edge",X,pt(W,F.normal&&F.normal.get("formatter"),z),j)}},labelDataIndex:g.dataIndex,defaultText:z}),p.setTextConfig({position:"inside"});var $=S.getModel("emphasis");ge(p,S,"lineStyle",function(U){var oe=U.getItemStyle();return Wn(oe,f,g),oe}),l.add(p),c.setItemGraphicEl(g.dataIndex,p);var H=$.get("focus");ie(p,H==="adjacency"?g.getAdjacentDataIndices():H==="trajectory"?g.getTrajectoryDataIndices():H,$.get("blurScope"),$.get("disabled"))}),o.eachNode(function(g){var p=g.getLayout(),d=g.getModel(),S=d.get("localX"),y=d.get("localY"),m=d.getModel("emphasis"),b=d.get(["itemStyle","borderRadius"])||0,w=new Le({shape:{x:S!=null?S*u:p.x,y:y!=null?y*v:p.y,width:p.dx,height:p.dy,r:b},style:d.getModel("itemStyle").getItemStyle(),z2:10});Te(w,we(d),{labelFetcher:{getFormattedLabel:function(_,x){return e.getFormattedLabel(_,x,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),w.disableLabelAnimation=!0,w.setStyle("fill",g.getVisual("color")),w.setStyle("decal",g.getVisual("style").decal),ge(w,d),l.add(w),h.setItemGraphicEl(g.dataIndex,w),ue(w).dataType="node";var D=m.get("focus");ie(w,D==="adjacency"?g.getAdjacentDataIndices():D==="trajectory"?g.getTrajectoryDataIndices():D,m.get("blurScope"),m.get("disabled"))}),h.eachItemGraphicEl(function(g,p){var d=h.getItemModel(p);d.get("draggable")&&(g.drift=function(S,y){i._focusAdjacencyDisabled=!0,this.shape.x+=S,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:h.getRawIndex(p),localX:this.shape.x/u,localY:this.shape.y/v})},g.ondragend=function(){i._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&e.isAnimationEnabled()&&l.setClipPath(Ch(l.getBoundingRect(),e,function(){l.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(ee);function Wn(r,t,e){switch(r.fill){case"source":r.fill=e.node1.getVisual("color"),r.decal=e.node1.getVisual("style").decal;break;case"target":r.fill=e.node2.getVisual("color"),r.decal=e.node2.getVisual("style").decal;break;case"gradient":var a=e.node1.getVisual("color"),n=e.node2.getVisual("color");Re(a)&&Re(n)&&(r.fill=new wi(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:a,offset:0},{color:n,offset:1}]))}}function Ch(r,t,e){var a=new Le({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return se(a,{shape:{width:r.width+20}},t,e),a}const Ph=Th;var Nh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],i=e.data||e.nodes||[],o=e.levels||[];this.levelModels=[];for(var l=this.levelModels,s=0;s<o.length;s++)o[s].depth!=null&&o[s].depth>=0&&(l[o[s].depth]=new ut(o[s],this,a));var u=To(i,n,this,!0,v);return u.data;function v(h,c){h.wrapMethod("getItemModel",function(f,g){var p=f.parentModel,d=p.getData().getItemLayout(g);if(d){var S=d.depth,y=p.levelModels[S];y&&(f.parentModel=y)}return f}),c.wrapMethod("getItemModel",function(f,g){var p=f.parentModel,d=p.getGraph().getEdgeByIndex(g),S=d.node1.getLayout();if(S){var y=S.depth,m=p.levelModels[y];m&&(f.parentModel=m)}return f})}},t.prototype.setNodePosition=function(e,a){var n=this.option.data||this.option.nodes,i=n[e];i.localX=a[0],i.localY=a[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,a,n){function i(f){return isNaN(f)||f==null}if(n==="edge"){var o=this.getDataParams(e,n),l=o.data,s=o.value,u=l.source+" -- "+l.target;return Pe("nameValue",{name:u,value:s,noValue:i(s)})}else{var v=this.getGraph().getNodeByIndex(e),h=v.getLayout().value,c=this.getDataParams(e,n).data.name;return Pe("nameValue",{name:c!=null?c+"":null,value:h,noValue:i(h)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,a){var n=r.prototype.getDataParams.call(this,e,a);if(n.value==null&&a==="node"){var i=this.getGraph().getNodeByIndex(e),o=i.getLayout().value;n.value=o}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(ne);const Eh=Nh;function Mh(r,t){r.eachSeriesByType("sankey",function(e){var a=e.get("nodeWidth"),n=e.get("nodeGap"),i=Rh(e,t);e.layoutInfo=i;var o=i.width,l=i.height,s=e.getGraph(),u=s.nodes,v=s.edges;kh(u);var h=dr(u,function(p){return p.getLayout().value===0}),c=h.length!==0?0:e.get("layoutIterations"),f=e.get("orient"),g=e.get("nodeAlign");Vh(u,v,a,n,o,l,c,f,g)})}function Rh(r,t){return mt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Vh(r,t,e,a,n,i,o,l,s){zh(r,t,e,n,i,l,s),Fh(r,t,i,n,a,o,l),Kh(r,l)}function kh(r){k(r,function(t){var e=je(t.outEdges,va),a=je(t.inEdges,va),n=t.getValue()||0,i=Math.max(e,a,n);t.setLayout({value:i},!0)})}function zh(r,t,e,a,n,i,o){for(var l=[],s=[],u=[],v=[],h=0,c=0;c<t.length;c++)l[c]=1;for(var c=0;c<r.length;c++)s[c]=r[c].inEdges.length,s[c]===0&&u.push(r[c]);for(var f=-1;u.length;){for(var g=0;g<u.length;g++){var p=u[g],d=p.hostGraph.data.getRawDataItem(p.dataIndex),S=d.depth!=null&&d.depth>=0;S&&d.depth>f&&(f=d.depth),p.setLayout({depth:S?d.depth:h},!0),i==="vertical"?p.setLayout({dy:e},!0):p.setLayout({dx:e},!0);for(var y=0;y<p.outEdges.length;y++){var m=p.outEdges[y],b=t.indexOf(m);l[b]=0;var w=m.node2,D=r.indexOf(w);--s[D]===0&&v.indexOf(w)<0&&v.push(w)}}++h,u=v,v=[]}for(var c=0;c<l.length;c++)if(l[c]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var _=f>h-1?f:h-1;o&&o!=="left"&&Bh(r,o,i,_);var x=i==="vertical"?(n-e)/_:(a-e)/_;Oh(r,x,i)}function Po(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function Bh(r,t,e,a){if(t==="right"){for(var n=[],i=r,o=0;i.length;){for(var l=0;l<i.length;l++){var s=i[l];s.setLayout({skNodeHeight:o},!0);for(var u=0;u<s.inEdges.length;u++){var v=s.inEdges[u];n.indexOf(v.node1)<0&&n.push(v.node1)}}i=n,n=[],++o}k(r,function(h){Po(h)||h.setLayout({depth:Math.max(0,a-h.getLayout().skNodeHeight)},!0)})}else t==="justify"&&Gh(r,a)}function Gh(r,t){k(r,function(e){!Po(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}function Oh(r,t,e){k(r,function(a){var n=a.getLayout().depth*t;e==="vertical"?a.setLayout({y:n},!0):a.setLayout({x:n},!0)})}function Fh(r,t,e,a,n,i,o){var l=Hh(r,o);$h(l,t,e,a,n,o),Za(l,n,e,a,o);for(var s=1;i>0;i--)s*=.99,Wh(l,s,o),Za(l,n,e,a,o),qh(l,s,o),Za(l,n,e,a,o)}function Hh(r,t){var e=[],a=t==="vertical"?"y":"x",n=or(r,function(i){return i.getLayout()[a]});return n.keys.sort(function(i,o){return i-o}),k(n.keys,function(i){e.push(n.buckets.get(i))}),e}function $h(r,t,e,a,n,i){var o=1/0;k(r,function(l){var s=l.length,u=0;k(l,function(h){u+=h.getLayout().value});var v=i==="vertical"?(a-(s-1)*n)/u:(e-(s-1)*n)/u;v<o&&(o=v)}),k(r,function(l){k(l,function(s,u){var v=s.getLayout().value*o;i==="vertical"?(s.setLayout({x:u},!0),s.setLayout({dx:v},!0)):(s.setLayout({y:u},!0),s.setLayout({dy:v},!0))})}),k(t,function(l){var s=+l.getValue()*o;l.setLayout({dy:s},!0)})}function Za(r,t,e,a,n){var i=n==="vertical"?"x":"y";k(r,function(o){o.sort(function(p,d){return p.getLayout()[i]-d.getLayout()[i]});for(var l,s,u,v=0,h=o.length,c=n==="vertical"?"dx":"dy",f=0;f<h;f++)s=o[f],u=v-s.getLayout()[i],u>0&&(l=s.getLayout()[i]+u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),v=s.getLayout()[i]+s.getLayout()[c]+t;var g=n==="vertical"?a:e;if(u=v-t-g,u>0){l=s.getLayout()[i]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0),v=l;for(var f=h-2;f>=0;--f)s=o[f],u=s.getLayout()[i]+s.getLayout()[c]+t-v,u>0&&(l=s.getLayout()[i]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),v=s.getLayout()[i]}})}function Wh(r,t,e){k(r.slice().reverse(),function(a){k(a,function(n){if(n.outEdges.length){var i=je(n.outEdges,Uh,e)/je(n.outEdges,va);if(isNaN(i)){var o=n.outEdges.length;i=o?je(n.outEdges,Zh,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(i-Qe(n,e))*t;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(i-Qe(n,e))*t;n.setLayout({y:s},!0)}}})})}function Uh(r,t){return Qe(r.node2,t)*r.getValue()}function Zh(r,t){return Qe(r.node2,t)}function Xh(r,t){return Qe(r.node1,t)*r.getValue()}function Yh(r,t){return Qe(r.node1,t)}function Qe(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function va(r){return r.getValue()}function je(r,t,e){for(var a=0,n=r.length,i=-1;++i<n;){var o=+t(r[i],e);isNaN(o)||(a+=o)}return a}function qh(r,t,e){k(r,function(a){k(a,function(n){if(n.inEdges.length){var i=je(n.inEdges,Xh,e)/je(n.inEdges,va);if(isNaN(i)){var o=n.inEdges.length;i=o?je(n.inEdges,Yh,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(i-Qe(n,e))*t;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(i-Qe(n,e))*t;n.setLayout({y:s},!0)}}})})}function Kh(r,t){var e=t==="vertical"?"x":"y";k(r,function(a){a.outEdges.sort(function(n,i){return n.node2.getLayout()[e]-i.node2.getLayout()[e]}),a.inEdges.sort(function(n,i){return n.node1.getLayout()[e]-i.node1.getLayout()[e]})}),k(r,function(a){var n=0,i=0;k(a.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),k(a.inEdges,function(o){o.setLayout({ty:i},!0),i+=o.getLayout().dy})})}function jh(r){r.eachSeriesByType("sankey",function(t){var e=t.getGraph(),a=e.nodes,n=e.edges;if(a.length){var i=1/0,o=-1/0;k(a,function(l){var s=l.getLayout().value;s<i&&(i=s),s>o&&(o=s)}),k(a,function(l){var s=new Fi({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:t.get("color")}),u=s.mapValueToVisual(l.getLayout().value),v=l.getModel().get(["itemStyle","color"]);v!=null?(l.setVisual("color",v),l.setVisual("style",{fill:v})):(l.setVisual("color",u),l.setVisual("style",{fill:u}))})}n.length&&k(n,function(l){var s=l.getModel().get("lineStyle");l.setVisual("style",s)})})}function Cg(r){r.registerChartView(Ph),r.registerSeriesModel(Eh),r.registerLayout(Mh),r.registerVisual(jh),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(a){a.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var No=function(){function r(){}return r.prototype._hasEncodeRule=function(t){var e=this.getEncode();return e&&e.get(t)!=null},r.prototype.getInitialData=function(t,e){var a,n=e.getComponent("xAxis",this.get("xAxisIndex")),i=e.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),l=i.get("type"),s;o==="category"?(t.layout="horizontal",a=n.getOrdinalMeta(),s=!this._hasEncodeRule("x")):l==="category"?(t.layout="vertical",a=i.getOrdinalMeta(),s=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var u=["x","y"],v=t.layout==="horizontal"?0:1,h=this._baseAxisDim=u[v],c=u[1-v],f=[n,i],g=f[v].get("type"),p=f[1-v].get("type"),d=t.data;if(d&&s){var S=[];k(d,function(b,w){var D;Y(b)?(D=b.slice(),b.unshift(w)):Y(b.value)?(D=Z({},b),D.value=D.value.slice(),b.value.unshift(w)):D=b,S.push(D)}),t.data=S}var y=this.defaultValueDimensions,m=[{name:h,type:lr(g),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:lr(p),dimsDef:y.slice()}];return bt(this,{coordDimensions:m,dimensionsCount:y.length+1,encodeDefaulter:ye(Nl,m,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r}(),Eo=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(ne);ca(Eo,No,!0);const Jh=Eo;var Qh=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this.group,l=this._data;this._data||o.removeAll();var s=e.get("layout")==="horizontal"?1:0;i.diff(l).add(function(u){if(i.hasValue(u)){var v=i.getItemLayout(u),h=Un(v,i,u,s,!0);i.setItemGraphicEl(u,h),o.add(h)}}).update(function(u,v){var h=l.getItemGraphicEl(v);if(!i.hasValue(u)){o.remove(h);return}var c=i.getItemLayout(u);h?(ke(h),Mo(c,h,i,u)):h=Un(c,i,u,s),o.add(h),i.setItemGraphicEl(u,h)}).remove(function(u){var v=l.getItemGraphicEl(u);v&&o.remove(v)}).execute(),this._data=i},t.prototype.remove=function(e){var a=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&a.remove(i)})},t.type="boxplot",t}(ee),ec=function(){function r(){}return r}(),tc=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="boxplotBoxPath",a}return t.prototype.getDefaultShape=function(){return new ec},t.prototype.buildPath=function(e,a){var n=a.points,i=0;for(e.moveTo(n[i][0],n[i][1]),i++;i<4;i++)e.lineTo(n[i][0],n[i][1]);for(e.closePath();i<n.length;i++)e.moveTo(n[i][0],n[i][1]),i++,e.lineTo(n[i][0],n[i][1])},t}(De);function Un(r,t,e,a,n){var i=r.ends,o=new tc({shape:{points:n?ac(i,a,r):i}});return Mo(r,o,t,e,n),o}function Mo(r,t,e,a,n){var i=e.hostModel,o=ya[n?"initProps":"updateProps"];o(t,{shape:{points:r.ends}},i,a),t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var l=e.getItemModel(a),s=l.getModel("emphasis");ge(t,l),ie(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function ac(r,t,e){return J(r,function(a){return a=a.slice(),a[t]=e.initBaseline,a})}const rc=Qh;var Ct=k;function nc(r){var t=ic(r);Ct(t,function(e){var a=e.seriesModels;a.length&&(oc(e),Ct(a,function(n,i){lc(n,e.boxOffsetList[i],e.boxWidthList[i])}))})}function ic(r){var t=[],e=[];return r.eachSeriesByType("boxplot",function(a){var n=a.getBaseAxis(),i=dt(e,n);i<0&&(i=e.length,e[i]=n,t[i]={axis:n,seriesModels:[]}),t[i].seriesModels.push(a)}),t}function oc(r){var t=r.axis,e=r.seriesModels,a=e.length,n=r.boxWidthList=[],i=r.boxOffsetList=[],o=[],l;if(t.type==="category")l=t.getBandWidth();else{var s=0;Ct(e,function(g){s=Math.max(s,g.getData().count())});var u=t.getExtent();l=Math.abs(u[1]-u[0])/s}Ct(e,function(g){var p=g.get("boxWidth");Y(p)||(p=[p,p]),o.push([O(p[0],l)||0,O(p[1],l)||0])});var v=l*.8-2,h=v/a*.3,c=(v-h*(a-1))/a,f=c/2-v/2;Ct(e,function(g,p){i.push(f),f+=h+c,n.push(Math.min(Math.max(c,o[p][0]),o[p][1]))})}function lc(r,t,e){var a=r.coordinateSystem,n=r.getData(),i=e/2,o=r.get("layout")==="horizontal"?0:1,l=1-o,s=["x","y"],u=n.mapDimension(s[o]),v=n.mapDimensionsAll(s[l]);if(u==null||v.length<5)return;for(var h=0;h<n.count();h++){var c=n.get(u,h),f=m(c,v[2],h),g=m(c,v[0],h),p=m(c,v[1],h),d=m(c,v[3],h),S=m(c,v[4],h),y=[];b(y,p,!1),b(y,d,!0),y.push(g,p,S,d),w(y,g),w(y,S),w(y,f),n.setItemLayout(h,{initBaseline:f[l],ends:y})}function m(D,_,x){var C=n.get(_,x),A=[];A[o]=D,A[l]=C;var I;return isNaN(D)||isNaN(C)?I=[NaN,NaN]:(I=a.dataToPoint(A),I[o]+=t),I}function b(D,_,x){var C=_.slice(),A=_.slice();C[o]+=i,A[o]-=i,x?D.push(C,A):D.push(A,C)}function w(D,_){var x=_.slice(),C=_.slice();x[o]-=i,C[o]+=i,D.push(x,C)}}function sc(r,t){t=t||{};for(var e=[],a=[],n=t.boundIQR,i=n==="none"||n===0,o=0;o<r.length;o++){var l=El(r[o].slice()),s=La(l,.25),u=La(l,.5),v=La(l,.75),h=l[0],c=l[l.length-1],f=(n??1.5)*(v-s),g=i?h:Math.max(h,s-f),p=i?c:Math.min(c,v+f),d=t.itemNameFormatter,S=be(d)?d({value:o}):Re(d)?d.replace("{value}",o+""):o+"";e.push([S,g,s,u,v,p]);for(var y=0;y<l.length;y++){var m=l[y];if(m<g||m>p){var b=[S,m];a.push(b)}}}return{boxData:e,outliers:a}}var uc={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Ml){var a="";Mi(a)}var n=sc(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function Pg(r){r.registerSeriesModel(Jh),r.registerChartView(rc),r.registerLayout(nc),r.registerTransform(uc)}var vc=["itemStyle","borderColor"],hc=["itemStyle","borderColor0"],cc=["itemStyle","borderColorDoji"],fc=["itemStyle","color"],gc=["itemStyle","color0"];function Nr(r,t){return t.get(r>0?fc:gc)}function Er(r,t){return t.get(r===0?cc:r>0?vc:hc)}var pc={seriesType:"candlestick",plan:ga(),performRawSeries:!0,reset:function(r,t){if(!t.isSeriesFiltered(r)){var e=r.pipelineContext.large;return!e&&{progress:function(a,n){for(var i;(i=a.next())!=null;){var o=n.getItemModel(i),l=n.getItemLayout(i).sign,s=o.getItemStyle();s.fill=Nr(l,o),s.stroke=Er(l,o)||s.fill;var u=n.ensureUniqueItemVisual(i,"style");Z(u,s)}}}}}};const dc=pc;var yc=["color","borderColor"],mc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,a,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,a,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,a):this._incrementalRenderNormal(e,a)},t.prototype.eachRendered=function(e){pa(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e){var a=e.getData(),n=this._data,i=this.group,o=a.getLayout("isSimpleBox"),l=e.get("clip",!0),s=e.coordinateSystem,u=s.getArea&&s.getArea();this._data||i.removeAll(),a.diff(n).add(function(v){if(a.hasValue(v)){var h=a.getItemLayout(v);if(l&&Zn(u,h))return;var c=Xa(h,v,!0);se(c,{shape:{points:h.ends}},e,v),Ya(c,a,v,o),i.add(c),a.setItemGraphicEl(v,c)}}).update(function(v,h){var c=n.getItemGraphicEl(h);if(!a.hasValue(v)){i.remove(c);return}var f=a.getItemLayout(v);if(l&&Zn(u,f)){i.remove(c);return}c?(K(c,{shape:{points:f.ends}},e,v),ke(c)):c=Xa(f),Ya(c,a,v,o),i.add(c),a.setItemGraphicEl(v,c)}).remove(function(v){var h=n.getItemGraphicEl(v);h&&i.remove(h)}).execute(),this._data=a},t.prototype._renderLarge=function(e){this._clear(),Xn(e,this.group);var a=e.get("clip",!0)?Gt(e.coordinateSystem,!1,e):null;a?this.group.setClipPath(a):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,a){for(var n=a.getData(),i=n.getLayout("isSimpleBox"),o;(o=e.next())!=null;){var l=n.getItemLayout(o),s=Xa(l);Ya(s,n,o,i),s.incremental=!0,this.group.add(s),this._progressiveEls.push(s)}},t.prototype._incrementalRenderLarge=function(e,a){Xn(a,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ee),Sc=function(){function r(){}return r}(),bc=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="normalCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new Sc},t.prototype.buildPath=function(e,a){var n=a.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(De);function Xa(r,t,e){var a=r.ends;return new bc({shape:{points:e?wc(a,r):a},z2:100})}function Zn(r,t){for(var e=!0,a=0;a<t.ends.length;a++)if(r.contain(t.ends[a][0],t.ends[a][1])){e=!1;break}return e}function Ya(r,t,e,a){var n=t.getItemModel(e);r.useStyle(t.getItemVisual(e,"style")),r.style.strokeNoScale=!0,r.__simpleBox=a,ge(r,n);var i=t.getItemLayout(e).sign;k(r.states,function(l,s){var u=n.getModel(s),v=Nr(i,u),h=Er(i,u)||v,c=l.style||(l.style={});v&&(c.fill=v),h&&(c.stroke=h)});var o=n.getModel("emphasis");ie(r,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function wc(r,t){return J(r,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var Dc=function(){function r(){}return r}(),qa=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new Dc},t.prototype.buildPath=function(e,a){for(var n=a.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];e.moveTo(o,n[i++]),e.lineTo(o,n[i++])}else i+=3},t}(De);function Xn(r,t,e,a){var n=r.getData(),i=n.getLayout("largePoints"),o=new qa({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});t.add(o);var l=new qa({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});t.add(l);var s=new qa({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});t.add(s),Ka(1,o,r),Ka(-1,l,r),Ka(0,s,r),a&&(o.incremental=!0,l.incremental=!0),e&&e.push(o,l)}function Ka(r,t,e,a){var n=Er(r,e)||Nr(r,e),i=e.getModel("itemStyle").getItemStyle(yc);t.useStyle(i),t.style.fill=null,t.style.stroke=n}const _c=mc;var Ro=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,a,n){var i=a.getItemLayout(e);return i&&n.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(ne);ca(Ro,No,!0);const xc=Ro;function Ic(r){!r||!Y(r.series)||k(r.series,function(t){cl(t)&&t.type==="k"&&(t.type="candlestick")})}var Ac={seriesType:"candlestick",plan:ga(),reset:function(r){var t=r.coordinateSystem,e=r.getData(),a=Lc(r,e),n=0,i=1,o=["x","y"],l=e.getDimensionIndex(e.mapDimension(o[n])),s=J(e.mapDimensionsAll(o[i]),e.getDimensionIndex,e),u=s[0],v=s[1],h=s[2],c=s[3];if(e.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),l<0||s.length<4)return;return{progress:r.pipelineContext.large?g:f};function f(p,d){for(var S,y=d.getStore();(S=p.next())!=null;){var m=y.get(l,S),b=y.get(u,S),w=y.get(v,S),D=y.get(h,S),_=y.get(c,S),x=Math.min(b,w),C=Math.max(b,w),A=R(x,m),I=R(C,m),L=R(D,m),N=R(_,m),P=[];M(P,I,0),M(P,A,1),P.push(B(N),B(I),B(L),B(A));var T=d.getItemModel(S),E=!!T.get(["itemStyle","borderColorDoji"]);d.setItemLayout(S,{sign:Yn(y,S,b,w,v,E),initBaseline:b>w?I[i]:A[i],ends:P,brushRect:V(D,_,m)})}function R(z,F){var $=[];return $[n]=F,$[i]=z,isNaN(F)||isNaN(z)?[NaN,NaN]:t.dataToPoint($)}function M(z,F,$){var H=F.slice(),U=F.slice();H[n]=Ta(H[n]+a/2,1,!1),U[n]=Ta(U[n]-a/2,1,!0),$?z.push(H,U):z.push(U,H)}function V(z,F,$){var H=R(z,$),U=R(F,$);return H[n]-=a/2,U[n]-=a/2,{x:H[0],y:H[1],width:a,height:U[1]-H[1]}}function B(z){return z[n]=Ta(z[n],1),z}}function g(p,d){for(var S=nt(p.count*4),y=0,m,b=[],w=[],D,_=d.getStore(),x=!!r.get(["itemStyle","borderColorDoji"]);(D=p.next())!=null;){var C=_.get(l,D),A=_.get(u,D),I=_.get(v,D),L=_.get(h,D),N=_.get(c,D);if(isNaN(C)||isNaN(L)||isNaN(N)){S[y++]=NaN,y+=3;continue}S[y++]=Yn(_,D,A,I,v,x),b[n]=C,b[i]=L,m=t.dataToPoint(b,null,w),S[y++]=m?m[0]:NaN,S[y++]=m?m[1]:NaN,b[i]=N,m=t.dataToPoint(b,null,w),S[y++]=m?m[1]:NaN}d.setLayout("largePoints",S)}}};function Yn(r,t,e,a,n,i){var o;return e>a?o=-1:e<a?o=1:o=i?0:t>0?r.get(n,t-1)<=a?1:-1:1,o}function Lc(r,t){var e=r.getBaseAxis(),a,n=e.type==="category"?e.getBandWidth():(a=e.getExtent(),Math.abs(a[1]-a[0])/t.count()),i=O(Pt(r.get("barMaxWidth"),n),n),o=O(Pt(r.get("barMinWidth"),1),n),l=r.get("barWidth");return l!=null?O(l,n):Math.max(Math.min(n/2,i),o)}const Tc=Ac;function Ng(r){r.registerChartView(_c),r.registerSeriesModel(xc),r.registerPreprocessor(Ic),r.registerVisual(dc),r.registerLayout(Tc)}function qn(r,t){var e=t.rippleEffectColor||t.color;r.eachChild(function(a){a.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var Cc=function(r){G(t,r);function t(e,a){var n=r.call(this)||this,i=new wa(e,a),o=new ae;return n.add(i),n.add(o),n.updateData(e,a),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var a=e.symbolType,n=e.color,i=e.rippleNumber,o=this.childAt(1),l=0;l<i;l++){var s=Ve(a,-1,-1,2,2,n);s.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-l/i*e.period+e.effectOffset;s.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),s.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),o.add(s)}qn(o,e)},t.prototype.updateEffectAnimation=function(e){for(var a=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],o=0;o<i.length;o++){var l=i[o];if(a[l]!==e[l]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}qn(n,e)},t.prototype.highlight=function(){Ni(this)},t.prototype.downplay=function(){Ei(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,a){var n=this,i=e.hostModel;this.childAt(0).updateData(e,a);var o=this.childAt(1),l=e.getItemModel(a),s=e.getItemVisual(a,"symbol"),u=Li(e.getItemVisual(a,"symbolSize")),v=e.getItemVisual(a,"style"),h=v&&v.fill,c=l.getModel("emphasis");o.setScale(u),o.traverse(function(d){d.setStyle("fill",h)});var f=Ri(e.getItemVisual(a,"symbolOffset"),u);f&&(o.x=f[0],o.y=f[1]);var g=e.getItemVisual(a,"symbolRotate");o.rotation=(g||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=l.get(["rippleEffect","scale"]),p.brushType=l.get(["rippleEffect","brushType"]),p.period=l.get(["rippleEffect","period"])*1e3,p.effectOffset=a/e.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=s,p.color=h,p.rippleEffectColor=l.get(["rippleEffect","color"]),p.rippleNumber=l.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(d){d==="emphasis"?p.showEffectOn!=="render"&&n.startEffectAnimation(p):d==="normal"&&p.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=p,ie(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(ae);const Pc=Cc;var Nc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._symbolDraw=new ba(Pc)},t.prototype.render=function(e,a,n){var i=e.getData(),o=this._symbolDraw;o.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},t.prototype._getClipShape=function(e){var a=e.coordinateSystem,n=a&&a.getArea&&a.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,a,n){var i=e.getData();this.group.dirty();var o=Ot("").reset(e,a,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var a=e.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=fl(a.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ee);const Ec=Nc;var Mc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return He(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(ne);const Rc=Mc;function Eg(r){r.registerChartView(Ec),r.registerSeriesModel(Rc),r.registerLayout(Ot("effectScatter"))}var Vc=function(r){G(t,r);function t(e,a,n){var i=r.call(this)||this;return i.add(i.createLine(e,a,n)),i._updateEffectSymbol(e,a),i}return t.prototype.createLine=function(e,a,n){return new $i(e,a,n)},t.prototype._updateEffectSymbol=function(e,a){var n=e.getItemModel(a),i=n.getModel("effect"),o=i.get("symbolSize"),l=i.get("symbol");Y(o)||(o=[o,o]);var s=e.getItemVisual(a,"style"),u=i.get("color")||s&&s.stroke,v=this.childAt(1);this._symbolType!==l&&(this.remove(v),v=Ve(l,-.5,-.5,1,1,u),v.z2=100,v.culling=!0,this.add(v)),v&&(v.setStyle("shadowColor",u),v.setStyle(i.getItemStyle(["color"])),v.scaleX=o[0],v.scaleY=o[1],v.setColor(u),this._symbolType=l,this._symbolScale=o,this._updateEffectAnimation(e,i,a))},t.prototype._updateEffectAnimation=function(e,a,n){var i=this.childAt(1);if(i){var o=e.getItemLayout(n),l=a.get("period")*1e3,s=a.get("loop"),u=a.get("roundTrip"),v=a.get("constantSpeed"),h=Nt(a.get("delay"),function(f){return f/e.count()*l/3});if(i.ignore=!0,this._updateAnimationPoints(i,o),v>0&&(l=this._getLineLength(i)/v*1e3),l!==this._period||s!==this._loop||u!==this._roundTrip){i.stopAnimation();var c=void 0;be(h)?c=h(n):c=h,i.__t>0&&(c=-l*i.__t),this._animateSymbol(i,l,c,s,u)}this._period=l,this._loop=s,this._roundTrip=u}},t.prototype._animateSymbol=function(e,a,n,i,o){if(a>0){e.__t=0;var l=this,s=e.animate("",i).when(o?a*2:a,{__t:o?2:1}).delay(n).during(function(){l._updateSymbolPosition(e)});i||s.done(function(){l.remove(e)}),s.start()}},t.prototype._getLineLength=function(e){return rt(e.__p1,e.__cp1)+rt(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,a){e.__p1=a[0],e.__p2=a[1],e.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},t.prototype.updateData=function(e,a,n){this.childAt(0).updateData(e,a,n),this._updateEffectSymbol(e,a)},t.prototype._updateSymbolPosition=function(e){var a=e.__p1,n=e.__p2,i=e.__cp1,o=e.__t<1?e.__t:2-e.__t,l=[e.x,e.y],s=l.slice(),u=Si,v=gl;l[0]=u(a[0],i[0],n[0],o),l[1]=u(a[1],i[1],n[1],o);var h=e.__t<1?v(a[0],i[0],n[0],o):v(n[0],i[0],a[0],1-o),c=e.__t<1?v(a[1],i[1],n[1],o):v(n[1],i[1],a[1],1-o);e.rotation=-Math.atan2(c,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=rt(s,l)*1.05,o===1&&(l[0]=s[0]+(l[0]-s[0])/2,l[1]=s[1]+(l[1]-s[1])/2)):e.__lastT===1?e.scaleY=2*rt(a,l):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=l[0],e.y=l[1]},t.prototype.updateLayout=function(e,a){this.childAt(0).updateLayout(e,a);var n=e.getItemModel(a).getModel("effect");this._updateEffectAnimation(e,n,a)},t}(ae);const Vo=Vc;var kc=function(r){G(t,r);function t(e,a,n){var i=r.call(this)||this;return i._createPolyline(e,a,n),i}return t.prototype._createPolyline=function(e,a,n){var i=e.getItemLayout(a),o=new yt({shape:{points:i}});this.add(o),this._updateCommonStl(e,a,n)},t.prototype.updateData=function(e,a,n){var i=e.hostModel,o=this.childAt(0),l={shape:{points:e.getItemLayout(a)}};K(o,l,i,a),this._updateCommonStl(e,a,n)},t.prototype._updateCommonStl=function(e,a,n){var i=this.childAt(0),o=e.getItemModel(a),l=n&&n.emphasisLineStyle,s=n&&n.focus,u=n&&n.blurScope,v=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var h=o.getModel("emphasis");l=h.getModel("lineStyle").getLineStyle(),v=h.get("disabled"),s=h.get("focus"),u=h.get("blurScope")}i.useStyle(e.getItemVisual(a,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var c=i.ensureState("emphasis");c.style=l,ie(this,s,u,v)},t.prototype.updateLayout=function(e,a){var n=this.childAt(0);n.setShape("points",e.getItemLayout(a))},t}(ae);const ko=kc;var zc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return t.prototype.createLine=function(e,a,n){return new ko(e,a,n)},t.prototype._updateAnimationPoints=function(e,a){this._points=a;for(var n=[0],i=0,o=1;o<a.length;o++){var l=a[o-1],s=a[o];i+=rt(l,s),n.push(i)}if(i===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var a=e.__t<1?e.__t:2-e.__t,n=this._points,i=this._offsets,o=n.length;if(i){var l=this._lastFrame,s;if(a<this._lastFramePercent){var u=Math.min(l+1,o-1);for(s=u;s>=0&&!(i[s]<=a);s--);s=Math.min(s,o-2)}else{for(s=l;s<o&&!(i[s]>a);s++);s=Math.min(s-1,o-2)}var v=(a-i[s])/(i[s+1]-i[s]),h=n[s],c=n[s+1];e.x=h[0]*(1-v)+v*c[0],e.y=h[1]*(1-v)+v*c[1];var f=e.__t<1?c[0]-h[0]:h[0]-c[0],g=e.__t<1?c[1]-h[1]:h[1]-c[1];e.rotation=-Math.atan2(g,f)-Math.PI/2,this._lastFrame=s,this._lastFramePercent=a,e.ignore=!1}},t}(Vo);const Bc=zc;var Gc=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),Oc=function(r){G(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Gc},t.prototype.buildPath=function(e,a){var n=a.segs,i=a.curveness,o;if(a.polyline)for(o=this._off;o<n.length;){var l=n[o++];if(l>0){e.moveTo(n[o++],n[o++]);for(var s=1;s<l;s++)e.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var u=n[o++],v=n[o++],h=n[o++],c=n[o++];if(e.moveTo(u,v),i>0){var f=(u+h)/2-(v-c)*i,g=(v+c)/2-(h-u)*i;e.quadraticCurveTo(f,g,h,c)}else e.lineTo(h,c)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(e,a){var n=this.shape,i=n.segs,o=n.curveness,l=this.style.lineWidth;if(n.polyline)for(var s=0,u=0;u<i.length;){var v=i[u++];if(v>0)for(var h=i[u++],c=i[u++],f=1;f<v;f++){var g=i[u++],p=i[u++];if(Zr(h,c,g,p,l,e,a))return s}s++}else for(var s=0,u=0;u<i.length;){var h=i[u++],c=i[u++],g=i[u++],p=i[u++];if(o>0){var d=(h+g)/2-(c-p)*o,S=(c+p)/2-(g-h)*o;if(pl(h,c,d,S,g,p,l,e,a))return s}else if(Zr(h,c,g,p,l,e,a))return s;s++}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),i=this.getBoundingRect();if(e=n[0],a=n[1],i.contain(e,a)){var o=this.hoverDataIdx=this.findDataIndex(e,a);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.segs,i=1/0,o=1/0,l=-1/0,s=-1/0,u=0;u<n.length;){var v=n[u++],h=n[u++];i=Math.min(v,i),l=Math.max(v,l),o=Math.min(h,o),s=Math.max(h,s)}e=this._rect=new gt(i,o,l,s)}return e},t}(De),Fc=function(){function r(){this.group=new ae}return r.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,e){var a=this._newAdded[0],n=e.getLayout("linesPoints"),i=a&&a.shape.segs;if(i&&i.length<2e4){var o=i.length,l=new Float32Array(o+n.length);l.set(i),l.set(n,o),a.setShape({segs:l})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:n}),this._setCommon(s,e),s.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new Oc({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var o=ue(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(l){o.dataIndex=null;var s=t.hoverDataIdx;s>0&&(o.dataIndex=s+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}();const Hc=Fc;var $c={seriesType:"lines",plan:ga(),reset:function(r){var t=r.coordinateSystem;if(t){var e=r.get("polyline"),a=r.pipelineContext.large;return{progress:function(n,i){var o=[];if(a){var l=void 0,s=n.end-n.start;if(e){for(var u=0,v=n.start;v<n.end;v++)u+=r.getLineCoordsCount(v);l=new Float32Array(s+u*2)}else l=new Float32Array(s*4);for(var h=0,c=[],v=n.start;v<n.end;v++){var f=r.getLineCoords(v,o);e&&(l[h++]=f);for(var g=0;g<f;g++)c=t.dataToPoint(o[g],!1,c),l[h++]=c[0],l[h++]=c[1]}i.setLayout("linesPoints",l)}else for(var v=n.start;v<n.end;v++){var p=i.getItemModel(v),f=r.getLineCoords(v,o),d=[];if(e)for(var S=0;S<f;S++)d.push(t.dataToPoint(o[S]));else{d[0]=t.dataToPoint(o[0]),d[1]=t.dataToPoint(o[1]);var y=p.get(["lineStyle","curveness"]);+y&&(d[2]=[(d[0][0]+d[1][0])/2-(d[0][1]-d[1][1])*y,(d[0][1]+d[1][1])/2-(d[1][0]-d[0][0])*y])}i.setItemLayout(v,d)}}}}}};const zo=$c;var Wc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this._updateLineDraw(i,e),l=e.get("zlevel"),s=e.get(["effect","trailLength"]),u=n.getZr(),v=u.painter.getType()==="svg";v||u.painter.getLayer(l).clear(!0),this._lastZlevel!=null&&!v&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s>0&&(v||u.configLayer(l,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),o.updateData(i);var h=e.get("clip",!0)&&Gt(e.coordinateSystem,!1,e);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=l,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var i=e.getData(),o=this._updateLineDraw(i,e);o.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._lineDraw.incrementalUpdate(e,a.getData()),this._finished=e.end===a.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,a,n){var i=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var l=zo.reset(e,a,n);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,a){var n=this._lineDraw,i=this._showEffect(a),o=!!a.get("polyline"),l=a.pipelineContext,s=l.large;return(!n||i!==this._hasEffet||o!==this._isPolyline||s!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=s?new Hc:new Hi(o?i?Bc:ko:i?Vo:$i),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=s),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var a=e.getZr(),n=a.painter.getType()==="svg";!n&&this._lastZlevel!=null&&a.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},t.prototype.dispose=function(e,a){this.remove(e,a)},t.type="lines",t}(ee);const Uc=Wc;var Zc=typeof Uint32Array>"u"?Array:Uint32Array,Xc=typeof Float64Array>"u"?Array:Float64Array;function Kn(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=J(t,function(e){var a=[e[0].coord,e[1].coord],n={coords:a};return e[0].name&&(n.fromName=e[0].name),e[1].name&&(n.toName=e[1].name),dl([n,e[0],e[1]])}))}var Yc=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.init=function(e){e.data=e.data||[],Kn(e);var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(Kn(e),e.data){var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var a=this._processFlatCoordsArray(e.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=Qt(this._flatCoords,a.flatCoords),this._flatCoordsOffset=Qt(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),e.data=new Float32Array(a.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var a=this.getData().getItemModel(e),n=a.option instanceof Array?a.option:a.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,a){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[e*2],i=this._flatCoordsOffset[e*2+1],o=0;o<i;o++)a[o]=a[o]||[],a[o][0]=this._flatCoords[n+o*2],a[o][1]=this._flatCoords[n+o*2+1];return i}else{for(var l=this._getCoordsFromItemModel(e),o=0;o<l.length;o++)a[o]=a[o]||[],a[o][0]=l[o][0],a[o][1]=l[o][1];return l.length}},t.prototype._processFlatCoordsArray=function(e){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),Ae(e[0])){for(var n=e.length,i=new Zc(n),o=new Xc(n),l=0,s=0,u=0,v=0;v<n;){u++;var h=e[v++];i[s++]=l+a,i[s++]=h;for(var c=0;c<h;c++){var f=e[v++],g=e[v++];o[l++]=f,o[l++]=g}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,s),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,a){var n=new st(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(i,o,l,s){if(i instanceof Array)return NaN;n.hasItemOption=!0;var u=i.value;if(u!=null)return u instanceof Array?u[s]:u}),n},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=i.getItemModel(e),l=o.get("name");if(l)return l;var s=o.get("fromName"),u=o.get("toName"),v=[];return s!=null&&v.push(s),u!=null&&v.push(u),Pe("nameValue",{name:v.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),a=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&a>0?a+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(ne);const qc=Yc;function Jt(r){return r instanceof Array||(r=[r,r]),r}var Kc={seriesType:"lines",reset:function(r){var t=Jt(r.get("symbol")),e=Jt(r.get("symbolSize")),a=r.getData();a.setVisual("fromSymbol",t&&t[0]),a.setVisual("toSymbol",t&&t[1]),a.setVisual("fromSymbolSize",e&&e[0]),a.setVisual("toSymbolSize",e&&e[1]);function n(i,o){var l=i.getItemModel(o),s=Jt(l.getShallow("symbol",!0)),u=Jt(l.getShallow("symbolSize",!0));s[0]&&i.setItemVisual(o,"fromSymbol",s[0]),s[1]&&i.setItemVisual(o,"toSymbol",s[1]),u[0]&&i.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&i.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:a.hasItemOption?n:null}}};const jc=Kc;function Mg(r){r.registerChartView(Uc),r.registerSeriesModel(qc),r.registerLayout(zo),r.registerVisual(jc)}var Jc=256,Qc=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Xr.createCanvas();this.canvas=t}return r.prototype.update=function(t,e,a,n,i,o){var l=this._getBrush(),s=this._getGradient(i,"inRange"),u=this._getGradient(i,"outOfRange"),v=this.pointSize+this.blurSize,h=this.canvas,c=h.getContext("2d"),f=t.length;h.width=e,h.height=a;for(var g=0;g<f;++g){var p=t[g],d=p[0],S=p[1],y=p[2],m=n(y);c.globalAlpha=m,c.drawImage(l,d-v,S-v)}if(!h.width||!h.height)return h;for(var b=c.getImageData(0,0,h.width,h.height),w=b.data,D=0,_=w.length,x=this.minOpacity,C=this.maxOpacity,A=C-x;D<_;){var m=w[D+3]/256,I=Math.floor(m*(Jc-1))*4;if(m>0){var L=o(m)?s:u;m>0&&(m=m*A+x),w[D++]=L[I],w[D++]=L[I+1],w[D++]=L[I+2],w[D++]=L[I+3]*m*256}else D+=4}return c.putImageData(b,0,0),h},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Xr.createCanvas()),e=this.pointSize+this.blurSize,a=e*2;t.width=a,t.height=a;var n=t.getContext("2d");return n.clearRect(0,0,a,a),n.shadowOffsetX=a,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-e,e,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},r.prototype._getGradient=function(t,e){for(var a=this._gradientPixels,n=a[e]||(a[e]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,l=0;l<256;l++)t[e](l/255,!0,i),n[o++]=i[0],n[o++]=i[1],n[o++]=i[2],n[o++]=i[3];return n},r}();const ef=Qc;function tf(r,t,e){var a=r[1]-r[0];t=J(t,function(o){return{interval:[(o.interval[0]-r[0])/a,(o.interval[1]-r[0])/a]}});var n=t.length,i=0;return function(o){var l;for(l=i;l<n;l++){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}if(l===n)for(l=i-1;l>=0;l--){var s=t[l].interval;if(s[0]<=o&&o<=s[1]){i=l;break}}return l>=0&&l<n&&e[l]}}function af(r,t){var e=r[1]-r[0];return t=[(t[0]-r[0])/e,(t[1]-r[0])/e],function(a){return a>=t[0]&&a<=t[1]}}function jn(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var rf=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i;a.eachComponent("visualMap",function(l){l.eachTargetSeries(function(s){s===e&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):jn(o)&&this._renderOnGeo(o,e,i,n)},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,a,n,i){var o=a.coordinateSystem;o&&(jn(o)?this.render(a,n,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(a,i,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){pa(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,a,n,i,o){var l=e.coordinateSystem,s=Da(l,"cartesian2d"),u,v,h,c;if(s){var f=l.getAxis("x"),g=l.getAxis("y");u=f.getBandWidth()+.5,v=g.getBandWidth()+.5,h=f.scale.getExtent(),c=g.scale.getExtent()}for(var p=this.group,d=e.getData(),S=e.getModel(["emphasis","itemStyle"]).getItemStyle(),y=e.getModel(["blur","itemStyle"]).getItemStyle(),m=e.getModel(["select","itemStyle"]).getItemStyle(),b=e.get(["itemStyle","borderRadius"]),w=we(e),D=e.getModel("emphasis"),_=D.get("focus"),x=D.get("blurScope"),C=D.get("disabled"),A=s?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],I=n;I<i;I++){var L=void 0,N=d.getItemVisual(I,"style");if(s){var P=d.get(A[0],I),T=d.get(A[1],I);if(isNaN(d.get(A[2],I))||isNaN(P)||isNaN(T)||P<h[0]||P>h[1]||T<c[0]||T>c[1])continue;var E=l.dataToPoint([P,T]);L=new Le({shape:{x:E[0]-u/2,y:E[1]-v/2,width:u,height:v},style:N})}else{if(isNaN(d.get(A[1],I)))continue;L=new Le({z2:1,shape:l.dataToRect([d.get(A[0],I)]).contentShape,style:N})}if(d.hasItemOption){var R=d.getItemModel(I),M=R.getModel("emphasis");S=M.getModel("itemStyle").getItemStyle(),y=R.getModel(["blur","itemStyle"]).getItemStyle(),m=R.getModel(["select","itemStyle"]).getItemStyle(),b=R.get(["itemStyle","borderRadius"]),_=M.get("focus"),x=M.get("blurScope"),C=M.get("disabled"),w=we(R)}L.shape.r=b;var V=e.getRawValue(I),B="-";V&&V[2]!=null&&(B=V[2]+""),Te(L,w,{labelFetcher:e,labelDataIndex:I,defaultOpacity:N.opacity,defaultText:B}),L.ensureState("emphasis").style=S,L.ensureState("blur").style=y,L.ensureState("select").style=m,ie(L,_,x,C),L.incremental=o,o&&(L.states.emphasis.hoverLayer=!0),p.add(L),d.setItemGraphicEl(I,L),this._progressiveEls&&this._progressiveEls.push(L)}},t.prototype._renderOnGeo=function(e,a,n,i){var o=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,s=a.getData(),u=this._hmLayer||this._hmLayer||new ef;u.blurSize=a.get("blurSize"),u.pointSize=a.get("pointSize"),u.minOpacity=a.get("minOpacity"),u.maxOpacity=a.get("maxOpacity");var v=e.getViewRect().clone(),h=e.getRoamTransform();v.applyTransform(h);var c=Math.max(v.x,0),f=Math.max(v.y,0),g=Math.min(v.width+v.x,i.getWidth()),p=Math.min(v.height+v.y,i.getHeight()),d=g-c,S=p-f,y=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],m=s.mapArray(y,function(_,x,C){var A=e.dataToPoint([_,x]);return A[0]-=c,A[1]-=f,A.push(C),A}),b=n.getExtent(),w=n.type==="visualMap.continuous"?af(b,n.option.range):tf(b,n.getPieceList(),n.option.selected);u.update(m,d,S,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},w);var D=new zt({style:{width:d,height:S,x:c,y:f,image:u.canvas},silent:!0});this.group.add(D)},t.type="heatmap",t}(ee);const nf=rf;var of=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return He(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Pi.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(ne);const lf=of;function Rg(r){r.registerChartView(nf),r.registerSeriesModel(lf)}var sf=["itemStyle","borderWidth"],Jn=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],ja=new Ti,uf=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=this.group,o=e.getData(),l=this._data,s=e.coordinateSystem,u=s.getBaseAxis(),v=u.isHorizontal(),h=s.master.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:v,valueDim:Jn[+v],categoryDim:Jn[1-+v]};o.diff(l).add(function(g){if(o.hasValue(g)){var p=ei(o,g),d=Qn(o,g,p,c),S=ti(o,c,d);o.setItemGraphicEl(g,S),i.add(S),ri(S,c,d)}}).update(function(g,p){var d=l.getItemGraphicEl(p);if(!o.hasValue(g)){i.remove(d);return}var S=ei(o,g),y=Qn(o,g,S,c),m=$o(o,y);d&&m!==d.__pictorialShapeStr&&(i.remove(d),o.setItemGraphicEl(g,null),d=null),d?df(d,c,y):d=ti(o,c,y,!0),o.setItemGraphicEl(g,d),d.__pictorialSymbolMeta=y,i.add(d),ri(d,c,y)}).remove(function(g){var p=l.getItemGraphicEl(g);p&&ai(l,g,p.__pictorialSymbolMeta.animationModel,p)}).execute();var f=e.get("clip",!0)?Gt(e.coordinateSystem,!1,e):null;return f?i.setClipPath(f):i.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(e,a){var n=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(o){ai(i,ue(o).dataIndex,e,o)}):n.removeAll()},t.type="pictorialBar",t}(ee);function Qn(r,t,e,a){var n=r.getItemLayout(t),i=e.get("symbolRepeat"),o=e.get("symbolClip"),l=e.get("symbolPosition")||"start",s=e.get("symbolRotate"),u=(s||0)*Math.PI/180||0,v=e.get("symbolPatternSize")||2,h=e.isAnimationEnabled(),c={dataIndex:t,layout:n,itemModel:e,symbolType:r.getItemVisual(t,"symbol")||"circle",style:r.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:i,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:u,animationModel:h?e:null,hoverScale:h&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};vf(e,i,n,a,c),hf(r,t,n,i,o,c.boundingLength,c.pxSign,v,a,c),cf(e,c.symbolScale,u,a,c);var f=c.symbolSize,g=Ri(e.get("symbolOffset"),f);return ff(e,f,n,i,o,g,l,c.valueLineWidth,c.boundingLength,c.repeatCutLength,a,c),c}function vf(r,t,e,a,n){var i=a.valueDim,o=r.get("symbolBoundingData"),l=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),s=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(e[i.wh]<=0),v;if(Y(o)){var h=[Ja(l,o[0])-s,Ja(l,o[1])-s];h[1]<h[0]&&h.reverse(),v=h[u]}else o!=null?v=Ja(l,o)-s:t?v=a.coordSysExtent[i.index][u]-s:v=e[i.wh];n.boundingLength=v,t&&(n.repeatCutLength=e[i.wh]);var c=i.xy==="x",f=l.inverse;n.pxSign=c&&!f||!c&&f?v>=0?1:-1:v>0?1:-1}function Ja(r,t){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(t)))}function hf(r,t,e,a,n,i,o,l,s,u){var v=s.valueDim,h=s.categoryDim,c=Math.abs(e[h.wh]),f=r.getItemVisual(t,"symbolSize"),g;Y(f)?g=f.slice():f==null?g=["100%","100%"]:g=[f,f],g[h.index]=O(g[h.index],c),g[v.index]=O(g[v.index],a?c:Math.abs(i)),u.symbolSize=g;var p=u.symbolScale=[g[0]/l,g[1]/l];p[v.index]*=(s.isHorizontal?-1:1)*o}function cf(r,t,e,a,n){var i=r.get(sf)||0;i&&(ja.attr({scaleX:t[0],scaleY:t[1],rotation:e}),ja.updateTransform(),i/=ja.getLineScale(),i*=t[a.valueDim.index]),n.valueLineWidth=i||0}function ff(r,t,e,a,n,i,o,l,s,u,v,h){var c=v.categoryDim,f=v.valueDim,g=h.pxSign,p=Math.max(t[f.index]+l,0),d=p;if(a){var S=Math.abs(s),y=Nt(r.get("symbolMargin"),"15%")+"",m=!1;y.lastIndexOf("!")===y.length-1&&(m=!0,y=y.slice(0,y.length-1));var b=O(y,t[f.index]),w=Math.max(p+b*2,0),D=m?0:b*2,_=Rl(a),x=_?a:ni((S+D)/w),C=S-x*p;b=C/2/(m?x:Math.max(x-1,1)),w=p+b*2,D=m?0:b*2,!_&&a!=="fixed"&&(x=u?ni((Math.abs(u)+D)/w):0),d=x*w-D,h.repeatTimes=x,h.symbolMargin=b}var A=g*(d/2),I=h.pathPosition=[];I[c.index]=e[c.wh]/2,I[f.index]=o==="start"?A:o==="end"?s-A:s/2,i&&(I[0]+=i[0],I[1]+=i[1]);var L=h.bundlePosition=[];L[c.index]=e[c.xy],L[f.index]=e[f.xy];var N=h.barRectShape=Z({},e);N[f.wh]=g*Math.max(Math.abs(e[f.wh]),Math.abs(I[f.index]+A)),N[c.wh]=e[c.wh];var P=h.clipShape={};P[c.xy]=-e[c.xy],P[c.wh]=v.ecSize[c.wh],P[f.xy]=0,P[f.wh]=e[f.wh]}function Bo(r){var t=r.symbolPatternSize,e=Ve(r.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function Go(r,t,e,a){var n=r.__pictorialBundle,i=e.symbolSize,o=e.valueLineWidth,l=e.pathPosition,s=t.valueDim,u=e.repeatTimes||0,v=0,h=i[t.valueDim.index]+o+e.symbolMargin*2;for(Mr(r,function(p){p.__pictorialAnimationIndex=v,p.__pictorialRepeatTimes=u,v<u?ft(p,null,g(v),e,a):ft(p,null,{scaleX:0,scaleY:0},e,a,function(){n.remove(p)}),v++});v<u;v++){var c=Bo(e);c.__pictorialAnimationIndex=v,c.__pictorialRepeatTimes=u,n.add(c);var f=g(v);ft(c,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},e,a)}function g(p){var d=l.slice(),S=e.pxSign,y=p;return(e.symbolRepeatDirection==="start"?S>0:S<0)&&(y=u-1-p),d[s.index]=h*(y-u/2+.5)+l[s.index],{x:d[0],y:d[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function Oo(r,t,e,a){var n=r.__pictorialBundle,i=r.__pictorialMainPath;i?ft(i,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,a):(i=r.__pictorialMainPath=Bo(e),n.add(i),ft(i,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,a))}function Fo(r,t,e){var a=Z({},t.barRectShape),n=r.__pictorialBarRect;n?ft(n,null,{shape:a},t,e):(n=r.__pictorialBarRect=new Le({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,r.add(n))}function Ho(r,t,e,a){if(e.symbolClip){var n=r.__pictorialClipPath,i=Z({},e.clipShape),o=t.valueDim,l=e.animationModel,s=e.dataIndex;if(n)K(n,{shape:i},l,s);else{i[o.wh]=0,n=new Le({shape:i}),r.__pictorialBundle.setClipPath(n),r.__pictorialClipPath=n;var u={};u[o.wh]=e.clipShape[o.wh],ya[a?"updateProps":"initProps"](n,{shape:u},l,s)}}}function ei(r,t){var e=r.getItemModel(t);return e.getAnimationDelayParams=gf,e.isAnimationEnabled=pf,e}function gf(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function pf(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function ti(r,t,e,a){var n=new ae,i=new ae;return n.add(i),n.__pictorialBundle=i,i.x=e.bundlePosition[0],i.y=e.bundlePosition[1],e.symbolRepeat?Go(n,t,e):Oo(n,t,e),Fo(n,e,a),Ho(n,t,e,a),n.__pictorialShapeStr=$o(r,e),n.__pictorialSymbolMeta=e,n}function df(r,t,e){var a=e.animationModel,n=e.dataIndex,i=r.__pictorialBundle;K(i,{x:e.bundlePosition[0],y:e.bundlePosition[1]},a,n),e.symbolRepeat?Go(r,t,e,!0):Oo(r,t,e,!0),Fo(r,e,!0),Ho(r,t,e,!0)}function ai(r,t,e,a){var n=a.__pictorialBarRect;n&&n.removeTextContent();var i=[];Mr(a,function(o){i.push(o)}),a.__pictorialMainPath&&i.push(a.__pictorialMainPath),a.__pictorialClipPath&&(e=null),k(i,function(o){na(o,{scaleX:0,scaleY:0},e,t,function(){a.parent&&a.parent.remove(a)})}),r.setItemGraphicEl(t,null)}function $o(r,t){return[r.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Mr(r,t,e){k(r.__pictorialBundle.children(),function(a){a!==r.__pictorialBarRect&&t.call(e,a)})}function ft(r,t,e,a,n,i){t&&r.attr(t),a.symbolClip&&!n?e&&r.attr(e):e&&ya[n?"updateProps":"initProps"](r,e,a.animationModel,a.dataIndex,i)}function ri(r,t,e){var a=e.dataIndex,n=e.itemModel,i=n.getModel("emphasis"),o=i.getModel("itemStyle").getItemStyle(),l=n.getModel(["blur","itemStyle"]).getItemStyle(),s=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),v=i.get("focus"),h=i.get("blurScope"),c=i.get("scale");Mr(r,function(p){if(p instanceof zt){var d=p.style;p.useStyle(Z({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},e.style))}else p.useStyle(e.style);var S=p.ensureState("emphasis");S.style=o,c&&(S.scaleX=p.scaleX*1.1,S.scaleY=p.scaleY*1.1),p.ensureState("blur").style=l,p.ensureState("select").style=s,u&&(p.cursor=u),p.z2=e.z2});var f=t.valueDim.posDesc[+(e.boundingLength>0)],g=r.__pictorialBarRect;g.ignoreClip=!0,Te(g,we(n),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:Mt(t.seriesModel.getData(),a),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:f}),ie(r,v,h,i.get("disabled"))}function ni(r){var t=Math.round(r);return Math.abs(r-t)<1e-4?t:Math.ceil(r)}const yf=uf;var mf=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return t.prototype.getInitialData=function(e){return e.stack=null,r.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Di(oa.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(oa);const Sf=mf;function Vg(r){r.registerChartView(yf),r.registerSeriesModel(Sf),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,ye(xi,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ii("pictorialBar"))}var bf=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return t.prototype.render=function(e,a,n){var i=e.getData(),o=this,l=this.group,s=e.getLayerSeries(),u=i.getLayout("layoutInfo"),v=u.rect,h=u.boundaryGap;l.x=0,l.y=v.y+h[0];function c(d){return d.name}var f=new Sa(this._layersSeries||[],s,c,c),g=[];f.add(le(p,this,"add")).update(le(p,this,"update")).remove(le(p,this,"remove")).execute();function p(d,S,y){var m=o._layers;if(d==="remove"){l.remove(m[S]);return}for(var b=[],w=[],D,_=s[S].indices,x=0;x<_.length;x++){var C=i.getItemLayout(_[x]),A=C.x,I=C.y0,L=C.y;b.push(A,I),w.push(A,I+L),D=i.getItemVisual(_[x],"style")}var N,P=i.getItemLayout(_[0]),T=e.getModel("label"),E=T.get("margin"),R=e.getModel("emphasis");if(d==="add"){var M=g[S]=new ae;N=new Ki({shape:{points:b,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),M.add(N),l.add(M),e.isAnimationEnabled()&&N.setClipPath(wf(N.getBoundingRect(),e,function(){N.removeClipPath()}))}else{var M=m[y];N=M.childAt(0),l.add(M),g[S]=M,K(N,{shape:{points:b,stackedOnPoints:w}},e),ke(N)}Te(N,we(e),{labelDataIndex:_[x-1],defaultText:i.getName(_[x-1]),inheritColor:D.fill},{normal:{verticalAlign:"middle"}}),N.setTextConfig({position:null,local:!0});var V=N.getTextContent();V&&(V.x=P.x-E,V.y=P.y0+P.y/2),N.useStyle(D),i.setItemGraphicEl(S,N),ge(N,e),ie(N,R.get("focus"),R.get("blurScope"),R.get("disabled"))}this._layersSeries=s,this._layers=g},t.type="themeRiver",t}(ee);function wf(r,t,e){var a=new Le({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return se(a,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},t,e),a}const Df=bf;var Qa=2,_f=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ht(le(this.getData,this),le(this.getRawData,this))},t.prototype.fixData=function(e){var a=e.length,n={},i=or(e,function(c){return n.hasOwnProperty(c[0]+"")||(n[c[0]+""]=-1),c[2]}),o=[];i.buckets.each(function(c,f){o.push({name:f,dataList:c})});for(var l=o.length,s=0;s<l;++s){for(var u=o[s].name,v=0;v<o[s].dataList.length;++v){var h=o[s].dataList[v][0]+"";n[h]=s}for(var h in n)n.hasOwnProperty(h)&&n[h]!==s&&(n[h]=s,e[a]=[h,0,u],a++)}return e},t.prototype.getInitialData=function(e,a){for(var n=this.getReferringComponents("singleAxis",Vl).models[0],i=n.get("type"),o=dr(e.data,function(g){return g[2]!==void 0}),l=this.fixData(o||[]),s=[],u=this.nameMap=lt(),v=0,h=0;h<l.length;++h)s.push(l[h][Qa]),u.get(l[h][Qa])||(u.set(l[h][Qa],v),v++);var c=fa(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:lr(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new st(c,this);return f.initData(l),f},t.prototype.getLayerSeries=function(){for(var e=this.getData(),a=e.count(),n=[],i=0;i<a;++i)n[i]=i;var o=e.mapDimension("single"),l=or(n,function(u){return e.get("name",u)}),s=[];return l.buckets.each(function(u,v){u.sort(function(h,c){return e.get(o,h)-e.get(o,c)}),s.push({name:v,indices:u})}),s},t.prototype.getAxisTooltipData=function(e,a,n){Y(e)||(e=e?[e]:[]);for(var i=this.getData(),o=this.getLayerSeries(),l=[],s=o.length,u,v=0;v<s;++v){for(var h=Number.MAX_VALUE,c=-1,f=o[v].indices.length,g=0;g<f;++g){var p=i.get(e[0],o[v].indices[g]),d=Math.abs(p-a);d<=h&&(u=p,h=d,c=o[v].indices[g])}l.push(c)}return{dataIndices:l,nestestValue:u}},t.prototype.formatTooltip=function(e,a,n){var i=this.getData(),o=i.getName(e),l=i.get(i.mapDimension("value"),e);return Pe("nameValue",{name:o,value:l})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(ne);const xf=_f;function If(r,t){r.eachSeriesByType("themeRiver",function(e){var a=e.getData(),n=e.coordinateSystem,i={},o=n.getRect();i.rect=o;var l=e.get("boundaryGap"),s=n.getAxis();if(i.boundaryGap=l,s.orient==="horizontal"){l[0]=O(l[0],o.height),l[1]=O(l[1],o.height);var u=o.height-l[0]-l[1];ii(a,e,u)}else{l[0]=O(l[0],o.width),l[1]=O(l[1],o.width);var v=o.width-l[0]-l[1];ii(a,e,v)}a.setLayout("layoutInfo",i)})}function ii(r,t,e){if(r.count())for(var a=t.coordinateSystem,n=t.getLayerSeries(),i=r.mapDimension("single"),o=r.mapDimension("value"),l=J(n,function(d){return J(d.indices,function(S){var y=a.dataToPoint(r.get(i,S));return y[1]=r.get(o,S),y})}),s=Af(l),u=s.y0,v=e/s.max,h=n.length,c=n[0].indices.length,f,g=0;g<c;++g){f=u[g]*v,r.setItemLayout(n[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:f,y:l[0][g][1]*v});for(var p=1;p<h;++p)f+=l[p-1][g][1]*v,r.setItemLayout(n[p].indices[g],{layerIndex:p,x:l[p][g][0],y0:f,y:l[p][g][1]*v})}}function Af(r){for(var t=r.length,e=r[0].length,a=[],n=[],i=0,o=0;o<e;++o){for(var l=0,s=0;s<t;++s)l+=r[s][o][1];l>i&&(i=l),a.push(l)}for(var u=0;u<e;++u)n[u]=(i-a[u])/2;i=0;for(var v=0;v<e;++v){var h=a[v]+n[v];h>i&&(i=h)}return{y0:n,max:i}}function kg(r){r.registerChartView(Df),r.registerSeriesModel(xf),r.registerLayout(If),r.registerProcessor(Ft("themeRiver"))}var Lf=2,Tf=4,Cf=function(r){G(t,r);function t(e,a,n,i){var o=r.call(this)||this;o.z2=Lf,o.textConfig={inside:!0},ue(o).seriesIndex=a.seriesIndex;var l=new Ee({z2:Tf,silent:e.getModel().get(["label","silent"])});return o.setTextContent(l),o.updateData(!0,e,a,n,i),o}return t.prototype.updateData=function(e,a,n,i,o){this.node=a,a.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var l=this;ue(l).dataIndex=a.dataIndex;var s=a.getModel(),u=s.getModel("emphasis"),v=a.getLayout(),h=Z({},v);h.label=null;var c=a.getVisual("style");c.lineJoin="bevel";var f=a.getVisual("decal");f&&(c.decal=Vi(f,o));var g=it(s.getModel("itemStyle"),h,!0);Z(h,g),k(Et,function(y){var m=l.ensureState(y),b=s.getModel([y,"itemStyle"]);m.style=b.getItemStyle();var w=it(b,h);w&&(m.shape=w)}),e?(l.setShape(h),l.shape.r=v.r0,se(l,{shape:{r:v.r}},n,a.dataIndex)):(K(l,{shape:h},n),ke(l)),l.useStyle(c),this._updateLabel(n);var p=s.getShallow("cursor");p&&l.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var d=u.get("focus"),S=d==="relative"?Qt(a.getAncestorsIndices(),a.getDescendantIndices()):d==="ancestor"?a.getAncestorsIndices():d==="descendant"?a.getDescendantIndices():d;ie(this,S,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var a=this,n=this.node.getModel(),i=n.getModel("label"),o=this.node.getLayout(),l=o.endAngle-o.startAngle,s=(o.startAngle+o.endAngle)/2,u=Math.cos(s),v=Math.sin(s),h=this,c=h.getTextContent(),f=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(g!=null&&Math.abs(l)<g);c.ignore=!p,k(ir,function(S){var y=S==="normal"?n.getModel("label"):n.getModel([S,"label"]),m=S==="normal",b=m?c:c.ensureState(S),w=e.getFormattedLabel(f,S);m&&(w=w||a.node.name),b.style=Be(y,{},null,S!=="normal",!0),w&&(b.style.text=w);var D=y.get("show");D!=null&&!m&&(b.ignore=!D);var _=d(y,"position"),x=m?h:h.states[S],C=x.style.fill;x.textConfig={outsideFill:y.get("color")==="inherit"?C:null,inside:_!=="outside"};var A,I=d(y,"distance")||0,L=d(y,"align"),N=d(y,"rotate"),P=Math.PI*.5,T=Math.PI*1.5,E=Wt(N==="tangential"?Math.PI/2-s:s),R=E>P&&!kl(E-P)&&E<T;_==="outside"?(A=o.r+I,L=R?"right":"left"):!L||L==="center"?(l===2*Math.PI&&o.r0===0?A=0:A=(o.r+o.r0)/2,L="center"):L==="left"?(A=o.r0+I,L=R?"right":"left"):L==="right"&&(A=o.r-I,L=R?"left":"right"),b.style.align=L,b.style.verticalAlign=d(y,"verticalAlign")||"middle",b.x=A*u+o.cx,b.y=A*v+o.cy;var M=0;N==="radial"?M=Wt(-s)+(R?Math.PI:0):N==="tangential"?M=Wt(Math.PI/2-s)+(R?Math.PI:0):Ae(N)&&(M=N*Math.PI/180),b.rotation=Wt(M)});function d(S,y){var m=S.get(y);return m??i.get(y)}c.dirtyStyle()},t}(Je);const oi=Cf;var fr="sunburstRootToNode",li="sunburstHighlight",Pf="sunburstUnhighlight";function Nf(r){r.registerAction({type:fr,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},a);function a(n,i){var o=Rt(t,[fr],n);if(o){var l=n.getViewRoot();l&&(t.direction=Ar(l,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),r.registerAction({type:li,update:"none"},function(t,e,a){t=Z({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(i){var o=Rt(t,[li],i);o&&(t.dataIndex=o.node.dataIndex)}a.dispatchAction(Z(t,{type:"highlight"}))}),r.registerAction({type:Pf,update:"updateView"},function(t,e,a){t=Z({},t),a.dispatchAction(Z(t,{type:"downplay"}))})}var Ef=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){var o=this;this.seriesModel=e,this.api=n,this.ecModel=a;var l=e.getData(),s=l.tree.root,u=e.getViewRoot(),v=this.group,h=e.get("renderLabelForZeroData"),c=[];u.eachNode(function(y){c.push(y)});var f=this._oldChildren||[];g(c,f),S(s,u),this._initEvents(),this._oldChildren=c;function g(y,m){if(y.length===0&&m.length===0)return;new Sa(m,y,b,b).add(w).update(w).remove(ye(w,null)).execute();function b(D){return D.getId()}function w(D,_){var x=D==null?null:y[D],C=_==null?null:m[_];p(x,C)}}function p(y,m){if(!h&&y&&!y.getValue()&&(y=null),y!==s&&m!==s){if(m&&m.piece)y?(m.piece.updateData(!1,y,e,a,n),l.setItemGraphicEl(y.dataIndex,m.piece)):d(m);else if(y){var b=new oi(y,e,a,n);v.add(b),l.setItemGraphicEl(y.dataIndex,b)}}}function d(y){y&&y.piece&&(v.remove(y.piece),y.piece=null)}function S(y,m){m.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,e,a,n):(o.virtualPiece=new oi(y,e,a,n),v.add(o.virtualPiece)),m.piece.off("click"),o.virtualPiece.on("click",function(b){o._rootToNode(m.parentNode)})):o.virtualPiece&&(v.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(a){var n=!1,i=e.seriesModel.getViewRoot();i.eachNode(function(o){if(!n&&o.piece&&o.piece===a.target){var l=o.getModel().get("nodeClick");if(l==="rootToNode")e._rootToNode(o);else if(l==="link"){var s=o.getModel(),u=s.get("link");if(u){var v=s.get("target",!0)||"_blank";Ci(u,v)}}n=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:fr,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,a){var n=a.getData(),i=n.getItemLayout(0);if(i){var o=e[0]-i.cx,l=e[1]-i.cy,s=Math.sqrt(o*o+l*l);return s<=i.r&&s>=i.r0}},t.type="sunburst",t}(ee);const Mf=Ef;var Rf=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};Wo(n);var i=this._levelModels=J(e.levels||[],function(s){return new ut(s,this,a)},this),o=Ir.createTree(n,this,l);function l(s){s.wrapMethod("getItemModel",function(u,v){var h=o.getNodeByDataIndex(v),c=i[h.depth];return c&&(u.parentModel=c),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treePathInfo=_a(n,this),a},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){fo(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(ne);function Wo(r){var t=0;k(r.children,function(a){Wo(a);var n=a.value;Y(n)&&(n=n[0]),t+=n});var e=r.value;Y(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),Y(r.value)?r.value[0]=e:r.value=e}const Vf=Rf;var si=Math.PI/180;function kf(r,t,e){t.eachSeriesByType(r,function(a){var n=a.get("center"),i=a.get("radius");Y(i)||(i=[0,i]),Y(n)||(n=[n,n]);var o=e.getWidth(),l=e.getHeight(),s=Math.min(o,l),u=O(n[0],o),v=O(n[1],l),h=O(i[0],s/2),c=O(i[1],s/2),f=-a.get("startAngle")*si,g=a.get("minAngle")*si,p=a.getData().tree.root,d=a.getViewRoot(),S=d.depth,y=a.get("sort");y!=null&&Uo(d,y);var m=0;k(d.children,function(E){!isNaN(E.getValue())&&m++});var b=d.getValue(),w=Math.PI/(b||m)*2,D=d.depth>0,_=d.height-(D?-1:1),x=(c-h)/(_||1),C=a.get("clockwise"),A=a.get("stillShowZeroSum"),I=C?1:-1,L=function(E,R){if(E){var M=R;if(E!==p){var V=E.getValue(),B=b===0&&A?w:V*w;B<g&&(B=g),M=R+I*B;var z=E.depth-S-(D?-1:1),F=h+x*z,$=h+x*(z+1),H=a.getLevelModel(E);if(H){var U=H.get("r0",!0),oe=H.get("r",!0),Ce=H.get("radius",!0);Ce!=null&&(U=Ce[0],oe=Ce[1]),U!=null&&(F=O(U,s/2)),oe!=null&&($=O(oe,s/2))}E.setLayout({angle:B,startAngle:R,endAngle:M,clockwise:C,cx:u,cy:v,r0:F,r:$})}if(E.children&&E.children.length){var X=0;k(E.children,function(W){X+=L(W,R+X)})}return M-R}};if(D){var N=h,P=h+x,T=Math.PI*2;p.setLayout({angle:T,startAngle:f,endAngle:f+T,clockwise:C,cx:u,cy:v,r0:N,r:P})}L(d,f)})}function Uo(r,t){var e=r.children||[];r.children=zf(e,t),e.length&&k(r.children,function(a){Uo(a,t)})}function zf(r,t){if(be(t)){var e=J(r,function(n,i){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:i}});return e.sort(function(n,i){return t(n.params,i.params)}),J(e,function(n){return r[n.index]})}else{var a=t==="asc";return r.sort(function(n,i){var o=(n.getValue()-i.getValue())*(a?1:-1);return o===0?(n.dataIndex-i.dataIndex)*(a?-1:1):o})}}function Bf(r){var t={};function e(a,n,i){for(var o=a;o&&o.depth>1;)o=o.parentNode;var l=n.getColorFromPalette(o.name||o.dataIndex+"",t);return a.depth>1&&Re(l)&&(l=yl(l,(a.depth-1)/(i-1)*.5)),l}r.eachSeriesByType("sunburst",function(a){var n=a.getData(),i=n.tree;i.eachNode(function(o){var l=o.getModel(),s=l.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e(o,a,i.root.height));var u=n.ensureUniqueItemVisual(o.dataIndex,"style");Z(u,s)})})}function zg(r){r.registerChartView(Mf),r.registerSeriesModel(Vf),r.registerLayout(ye(kf,"sunburst")),r.registerProcessor(ye(Ft,"sunburst")),r.registerVisual(Bf),Nf(r)}var ui={color:"fill",borderColor:"stroke"},Gf={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Oe=St(),Of=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,a){return He(null,this)},t.prototype.getDataParams=function(e,a,n){var i=r.prototype.getDataParams.call(this,e,a);return n&&(i.info=Oe(n).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(ne);const Ff=Of;function Hf(r,t){return t=t||[0,0],J(["x","y"],function(e,a){var n=this.getAxis(e),i=t[a],o=r[a]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))},this)}function $f(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:le(Hf,r)}}}function Wf(r,t){return t=t||[0,0],J([0,1],function(e){var a=t[e],n=r[e]/2,i=[],o=[];return i[e]=a-n,o[e]=a+n,i[1-e]=o[1-e]=t[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(o)[e])},this)}function Uf(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(e){return r.dataToPoint(e)},size:le(Wf,r)}}}function Zf(r,t){var e=this.getAxis(),a=t instanceof Array?t[0]:t,n=(r instanceof Array?r[0]:r)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(a-n)-e.dataToCoord(a+n))}function Xf(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:le(Zf,r)}}}function Yf(r,t){return t=t||[0,0],J(["Radius","Angle"],function(e,a){var n="get"+e+"Axis",i=this[n](),o=t[a],l=r[a]/2,s=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-l)-i.dataToCoord(o+l));return e==="Angle"&&(s=s*Math.PI/180),s},this)}function qf(r){var t=r.getRadiusAxis(),e=r.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:a[1],r0:a[0]},api:{coord:function(n){var i=t.dataToRadius(n[0]),o=e.dataToAngle(n[1]),l=r.coordToPoint([i,o]);return l.push(i,o*Math.PI/180),l},size:le(Yf,r)}}}function Kf(r){var t=r.getRect(),e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(a,n){return r.dataToPoint(a,n)}}}}var Fe="emphasis",qe="normal",Rr="blur",Vr="select",et=[qe,Fe,Rr,Vr],er={normal:["itemStyle"],emphasis:[Fe,"itemStyle"],blur:[Rr,"itemStyle"],select:[Vr,"itemStyle"]},tr={normal:["label"],emphasis:[Fe,"label"],blur:[Rr,"label"],select:[Vr,"label"]},jf=["x","y"],Jf="e\0\0",_e={normal:{},emphasis:{},blur:{},select:{}},Qf={cartesian2d:$f,geo:Uf,single:Xf,polar:qf,calendar:Kf};function gr(r){return r instanceof De}function pr(r){return r instanceof yi}function eg(r,t){t.copyTransform(r),pr(t)&&pr(r)&&(t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t.invisible=r.invisible,t.ignore=r.ignore,gr(t)&&gr(r)&&t.setShape(r.shape))}var tg=function(r){G(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){this._progressiveEls=null;var o=this._data,l=e.getData(),s=this.group,u=vi(e,l,a,n);o||s.removeAll(),l.diff(o).add(function(h){ar(n,null,h,u(h,i),e,s,l)}).remove(function(h){var c=o.getItemGraphicEl(h);c&&_r(c,Oe(c).option,e)}).update(function(h,c){var f=o.getItemGraphicEl(c);ar(n,f,h,u(h,i),e,s,l)}).execute();var v=e.get("clip",!0)?Gt(e.coordinateSystem,!1,e):null;v?s.setClipPath(v):s.removeClipPath(),this._data=l},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,a,n,i,o){var l=a.getData(),s=vi(a,l,n,i),u=this._progressiveEls=[];function v(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=e.start;h<e.end;h++){var c=ar(null,null,h,s(h,o),a,this.group,l);c&&(c.traverse(v),u.push(c))}},t.prototype.eachRendered=function(e){pa(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,a,n,i){var o=a.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(ee);const ag=tg;function kr(r){var t=r.type,e;if(t==="path"){var a=r.shape,n=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,i=Yo(a);e=Gl(i,null,n,a.layout||"center"),Oe(e).customPathData=i}else if(t==="image")e=new zt({}),Oe(e).customImagePath=r.style.image;else if(t==="text")e=new Ee({});else if(t==="group")e=new ae;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=Ol(t);if(!o){var l="";Mi(l)}e=new o}return Oe(e).customGraphicType=t,e.name=r.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function zr(r,t,e,a,n,i,o){Kl(t);var l=n&&n.normal.cfg;l&&t.setTextConfig(l),a&&a.transition==null&&(a.transition=jf);var s=a&&a.style;if(s){if(t.type==="text"){var u=s;Ge(u,"textFill")&&(u.fill=u.textFill),Ge(u,"textStroke")&&(u.stroke=u.textStroke)}var v=void 0,h=gr(t)?s.decal:null;r&&h&&(h.dirty=!0,v=Vi(h,r)),s.__decalPattern=v}if(pr(t)&&s){var v=s.__decalPattern;v&&(s.decal=v)}jl(t,a,i,{dataIndex:e,isInit:o,clearStyle:!0}),Jl(t,a.keyframeAnimation,i)}function Zo(r,t,e,a,n){var i=t.isGroup?null:t,o=n&&n[r].cfg;if(i){var l=i.ensureState(r);if(a===!1){var s=i.getState(r);s&&(s.style=null)}else l.style=a||null;o&&(l.textConfig=o),ra(i)}}function rg(r,t,e){if(!r.isGroup){var a=r,n=e.currentZ,i=e.currentZLevel;a.z=n,a.zlevel=i;var o=t.z2;o!=null&&(a.z2=o||0);for(var l=0;l<et.length;l++)ng(a,t,et[l])}}function ng(r,t,e){var a=e===qe,n=a?t:ha(t,e),i=n?n.z2:null,o;i!=null&&(o=a?r:r.ensureState(e),o.z2=i||0)}function vi(r,t,e,a){var n=r.get("renderItem"),i=r.coordinateSystem,o={};i&&(o=i.prepareCustoms?i.prepareCustoms(i):Qf[i.type](i));for(var l=Me({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:b,style:D,ordinalRawValue:w,styleEmphasis:_,visual:A,barLayout:I,currentSeriesIndices:L,font:N},o.api||{}),s={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:ig(r.getData())},u,v,h={},c={},f={},g={},p=0;p<et.length;p++){var d=et[p];f[d]=r.getModel(er[d]),g[d]=r.getModel(tr[d])}function S(P){return P===u?v||(v=t.getItemModel(P)):t.getItemModel(P)}function y(P,T){return t.hasItemOption?P===u?h[T]||(h[T]=S(P).getModel(er[T])):S(P).getModel(er[T]):f[T]}function m(P,T){return t.hasItemOption?P===u?c[T]||(c[T]=S(P).getModel(tr[T])):S(P).getModel(tr[T]):g[T]}return function(P,T){return u=P,v=null,h={},c={},n&&n(Me({dataIndexInside:P,dataIndex:t.getRawIndex(P),actionType:T?T.type:null},s),l)};function b(P,T){return T==null&&(T=u),t.getStore().get(t.getDimensionIndex(P||0),T)}function w(P,T){T==null&&(T=u),P=P||0;var E=t.getDimensionInfo(P);if(!E){var R=t.getDimensionIndex(P);return R>=0?t.getStore().get(R,T):void 0}var M=t.get(E.name,T),V=E&&E.ordinalMeta;return V?V.categories[M]:M}function D(P,T){T==null&&(T=u);var E=t.getItemVisual(T,"style"),R=E&&E.fill,M=E&&E.opacity,V=y(T,qe).getItemStyle();R!=null&&(V.fill=R),M!=null&&(V.opacity=M);var B={inheritColor:Re(R)?R:"#000"},z=m(T,qe),F=Be(z,null,B,!1,!0);F.text=z.getShallow("show")?Pt(r.getFormattedLabel(T,qe),Mt(t,T)):null;var $=an(z,B,!1);return C(P,V),V=rn(V,F,$),P&&x(V,P),V.legacy=!0,V}function _(P,T){T==null&&(T=u);var E=y(T,Fe).getItemStyle(),R=m(T,Fe),M=Be(R,null,null,!0,!0);M.text=R.getShallow("show")?pt(r.getFormattedLabel(T,Fe),r.getFormattedLabel(T,qe),Mt(t,T)):null;var V=an(R,null,!0);return C(P,E),E=rn(E,M,V),P&&x(E,P),E.legacy=!0,E}function x(P,T){for(var E in T)Ge(T,E)&&(P[E]=T[E])}function C(P,T){P&&(P.textFill&&(T.textFill=P.textFill),P.textPosition&&(T.textPosition=P.textPosition))}function A(P,T){if(T==null&&(T=u),Ge(ui,P)){var E=t.getItemVisual(T,"style");return E?E[ui[P]]:null}if(Ge(Gf,P))return t.getItemVisual(T,P)}function I(P){if(i.type==="cartesian2d"){var T=i.getBaseAxis();return zl(Me({axis:T},P))}}function L(){return e.getCurrentSeriesIndices()}function N(P){return Bl(P,e)}}function ig(r){var t={};return k(r.dimensions,function(e){var a=r.getDimensionInfo(e);if(!a.isExtraCoord){var n=a.coordDim,i=t[n]=t[n]||[];i[a.coordDimIndex]=r.getDimensionIndex(e)}}),t}function ar(r,t,e,a,n,i,o){if(!a){i.remove(t);return}var l=Br(r,t,e,a,n,i);return l&&o.setItemGraphicEl(e,l),l&&ie(l,a.focus,a.blurScope,a.emphasisDisabled),l}function Br(r,t,e,a,n,i){var o=-1,l=t;t&&Xo(t,a,n)&&(o=dt(i.childrenRef(),t),t=null);var s=!t,u=t;u?u.clearStates():(u=kr(a),l&&eg(l,u)),a.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),_e.normal.cfg=_e.normal.conOpt=_e.emphasis.cfg=_e.emphasis.conOpt=_e.blur.cfg=_e.blur.conOpt=_e.select.cfg=_e.select.conOpt=null,_e.isLegacy=!1,lg(u,e,a,n,s,_e),og(u,e,a,n,s),zr(r,u,e,a,_e,n,s),Ge(a,"info")&&(Oe(u).info=a.info);for(var v=0;v<et.length;v++){var h=et[v];if(h!==qe){var c=ha(a,h),f=Gr(a,c,h);Zo(h,u,c,f,_e)}}return rg(u,a,n),a.type==="group"&&sg(r,u,e,a,n),o>=0?i.replaceAt(u,o):i.add(u),u}function Xo(r,t,e){var a=Oe(r),n=t.type,i=t.shape,o=t.style;return e.isUniversalTransitionEnabled()||n!=null&&n!==a.customGraphicType||n==="path"&&cg(i)&&Yo(i)!==a.customPathData||n==="image"&&Ge(o,"image")&&o.image!==a.customImagePath}function og(r,t,e,a,n){var i=e.clipPath;if(i===!1)r&&r.getClipPath()&&r.removeClipPath();else if(i){var o=r.getClipPath();o&&Xo(o,i,a)&&(o=null),o||(o=kr(i),r.setClipPath(o)),zr(null,o,t,i,null,a,n)}}function lg(r,t,e,a,n,i){if(!r.isGroup){hi(e,null,i),hi(e,Fe,i);var o=i.normal.conOpt,l=i.emphasis.conOpt,s=i.blur.conOpt,u=i.select.conOpt;if(o!=null||l!=null||u!=null||s!=null){var v=r.getTextContent();if(o===!1)v&&r.removeTextContent();else{o=i.normal.conOpt=o||{type:"text"},v?v.clearStates():(v=kr(o),r.setTextContent(v)),zr(null,v,t,o,null,a,n);for(var h=o&&o.style,c=0;c<et.length;c++){var f=et[c];if(f!==qe){var g=i[f].conOpt;Zo(f,v,g,Gr(o,g,f),null)}}h?v.dirty():v.markRedraw()}}}}function hi(r,t,e){var a=t?ha(r,t):r,n=t?Gr(r,a,Fe):r.style,i=r.type,o=a?a.textConfig:null,l=r.textContent,s=l?t?ha(l,t):l:null;if(n&&(e.isLegacy||Yl(n,i,!!o,!!s))){e.isLegacy=!0;var u=ql(n,i,!t);!o&&u.textConfig&&(o=u.textConfig),!s&&u.textContent&&(s=u.textContent)}if(!t&&s){var v=s;!v.type&&(v.type="text")}var h=t?e[t]:e.normal;h.cfg=o,h.conOpt=s}function ha(r,t){return t?r?r[t]:null:r}function Gr(r,t,e){var a=t&&t.style;return a==null&&e===Fe&&r&&(a=r.styleEmphasis),a}function sg(r,t,e,a,n){var i=a.children,o=i?i.length:0,l=a.$mergeChildren,s=l==="byName"||a.diffChildrenByName,u=l===!1;if(!(!o&&!s&&!u)){if(s){vg({api:r,oldChildren:t.children()||[],newChildren:i||[],dataIndex:e,seriesModel:n,group:t});return}u&&t.removeAll();for(var v=0;v<o;v++){var h=i[v],c=t.childAt(v);h?(h.ignore==null&&(h.ignore=!1),Br(r,c,e,h,n,t)):c.ignore=!0}for(var f=t.childCount()-1;f>=v;f--){var g=t.childAt(f);ug(t,g,n)}}}function ug(r,t,e){t&&_r(t,Oe(r).option,e)}function vg(r){new Sa(r.oldChildren,r.newChildren,ci,ci,r).add(fi).update(fi).remove(hg).execute()}function ci(r,t){var e=r&&r.name;return e??Jf+t}function fi(r,t){var e=this.context,a=r!=null?e.newChildren[r]:null,n=t!=null?e.oldChildren[t]:null;Br(e.api,n,e.dataIndex,a,e.seriesModel,e.group)}function hg(r){var t=this.context,e=t.oldChildren[r];e&&_r(e,Oe(e).option,t.seriesModel)}function Yo(r){return r&&(r.pathData||r.d)}function cg(r){return r&&(Ge(r,"pathData")||Ge(r,"d"))}function Bg(r){r.registerChartView(ag),r.registerSeriesModel(Ff)}export{mg as BarChart,Pg as BoxplotChart,Ng as CandlestickChart,Bg as CustomChart,Eg as EffectScatterChart,Lg as FunnelChart,Ag as GaugeChart,Ig as GraphChart,Rg as HeatmapChart,yg as LineChart,Mg as LinesChart,Dg as MapChart,Tg as ParallelChart,Vg as PictorialBarChart,Sg as PieChart,wg as RadarChart,Cg as SankeyChart,bg as ScatterChart,zg as SunburstChart,kg as ThemeRiverChart,_g as TreeChart,xg as TreemapChart};
